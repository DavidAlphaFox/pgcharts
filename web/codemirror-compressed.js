!function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}}(function(){"use strict";function z(a,c){if(!(this instanceof z))return new z(a,c);this.options=c=c||{},zg(Yd,c,!1),M(c);var d=c.value;"string"==typeof d&&(d=new uf(d,c.mode)),this.doc=d;var e=this.display=new A(a,d);e.wrapper.CodeMirror=this,J(this),H(this),c.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),c.autofocus&&!r&&Pc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new pg},b&&setTimeout(Ag(Oc,this,!0),20),Sc(this);var f=this;yc(this,function(){f.curOp.forceUpdate=!0,yf(f,d),c.autofocus&&!r||Lg()==e.input?setTimeout(Ag(td,f),20):ud(f);for(var a in Zd)Zd.hasOwnProperty(a)&&Zd[a](f,c[a],_d);for(var b=0;b<de.length;++b)de[b](f)})}function A(a,b){var d=this,e=d.input=Gg("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");h?e.style.width="1000px":e.setAttribute("wrap","off"),q&&(e.style.border="1px solid black"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false"),d.inputDiv=Gg("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),d.scrollbarH=Gg("div",[Gg("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),d.scrollbarV=Gg("div",[Gg("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),d.scrollbarFiller=Gg("div",null,"CodeMirror-scrollbar-filler"),d.gutterFiller=Gg("div",null,"CodeMirror-gutter-filler"),d.lineDiv=Gg("div",null,"CodeMirror-code"),d.selectionDiv=Gg("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=Gg("div",null,"CodeMirror-cursors"),d.measure=Gg("div",null,"CodeMirror-measure"),d.lineMeasure=Gg("div",null,"CodeMirror-measure"),d.lineSpace=Gg("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none"),d.mover=Gg("div",[Gg("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative"),d.sizer=Gg("div",[d.mover],"CodeMirror-sizer"),d.heightForcer=Gg("div",null,null,"position: absolute; height: "+kg+"px; width: 1px;"),d.gutters=Gg("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=Gg("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=Gg("div",[d.inputDiv,d.scrollbarH,d.scrollbarV,d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),c&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),q&&(e.style.width="0px"),h||(d.scroller.draggable=!0),m&&(d.inputDiv.style.height="1px",d.inputDiv.style.position="absolute"),c&&(d.scrollbarH.style.minHeight=d.scrollbarV.style.minWidth="18px"),a.appendChild?a.appendChild(d.wrapper):a(d.wrapper),d.viewFrom=d.viewTo=b.first,d.view=[],d.externalMeasured=null,d.viewOffset=0,d.lastSizeC=0,d.updateLineNumbers=null,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.prevInput="",d.alignWidgets=!1,d.pollingFast=!1,d.poll=new pg,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.inaccurateSelection=!1,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1}function B(a){a.doc.mode=z.getMode(a.options,a.doc.modeOption),C(a)}function C(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.frontier=a.doc.first,Rb(a,100),a.state.modeGen++,a.curOp&&Ec(a)}function D(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),L(a)),F(a),Ec(a),hc(a),setTimeout(function(){O(a)},100)}function E(a){var b=tc(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/uc(a.display)-3);return function(e){if(Te(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function F(a){var b=a.doc,c=E(a);b.iter(function(a){var b=c(a);b!=a.height&&Cf(a,b)})}function G(a){var b=ie[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"")}function H(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hc(a)}function I(a){J(a),Ec(a),setTimeout(function(){Q(a)},20)}function J(a){var b=a.display.gutters,c=a.options.gutters;Ig(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(Gg("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";var g=b.offsetWidth;a.display.sizer.style.marginLeft=g+"px",d&&(a.display.scrollbarH.style.left=a.options.fixedGutter?g+"px":0)}function K(a){if(0==a.height)return 0;for(var c,b=a.text.length,d=a;c=Me(d);){var e=c.find(0,!0);d=e.from.line,b+=e.from.ch-e.to.ch}for(d=a;c=Ne(d);){var e=c.find(0,!0);b-=d.text.length-e.from.ch,d=e.to.line,b+=d.text.length-e.to.ch}return b}function L(a){var b=a.display,c=a.doc;b.maxLine=zf(c,c.first),b.maxLineLength=K(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=K(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function M(a){var b=wg(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function N(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Wb(a.display))}}function O(a,b){b||(b=N(a));var c=a.display,d=b.docHeight+kg,e=b.scrollWidth>b.clientWidth,f=d>b.clientHeight;if(f?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=e?Og(c.measure)+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,d-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0"),e?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=f?Og(c.measure)+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0"),e&&f?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=Og(c.measure)+"px"):c.scrollbarFiller.style.display="",e&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=Og(c.measure)+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display="",n&&0===Og(c.measure)){c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=o?"18px":"12px";var g=function(b){$f(b)!=c.scrollbarV&&$f(b)!=c.scrollbarH&&zc(a,Vc)(b)};ag(c.scrollbarV,"mousedown",g),ag(c.scrollbarH,"mousedown",g)}}function P(a,b,c){var d=c&&null!=c.top?c.top:a.scroller.scrollTop;d=Math.floor(d-Vb(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=Ef(b,d),g=Ef(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;if(f>h)return{from:h,to:Ef(b,Ff(zf(b,h))+a.wrapper.clientHeight)};if(Math.min(i,b.lastLine())>=g)return{from:Ef(b,Ff(zf(b,i))-a.wrapper.clientHeight),to:i}}return{from:f,to:g}}function Q(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=T(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function R(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=S(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(Gg("div",[Gg("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px";var h=d.gutters.offsetWidth;return d.scrollbarH.style.left=a.options.fixedGutter?h+"px":0,d.sizer.style.marginLeft=h+"px",!0}return!1}function S(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function T(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function U(a,b,c){for(var f,d=a.display.viewFrom,e=a.display.viewTo,g=P(a.display,a.doc,b),h=!0;;h=!1){var i=a.display.scroller.clientWidth;if(!V(a,g,c))break;f=!0,a.display.maxLineChanged&&!a.options.lineWrapping&&W(a);var j=N(a);if(Nb(a),X(a,j),O(a,j),h&&a.options.lineWrapping&&i!=a.display.scroller.clientWidth)c=!0;else if(c=!1,b&&null!=b.top&&(b={top:Math.min(j.docHeight-kg-j.clientHeight,b.top)}),g=P(a.display,a.doc,b),g.from>=a.display.viewFrom&&g.to<=a.display.viewTo)break}return a.display.updateLineNumbers=null,f&&(fg(a,"update",a),(a.display.viewFrom!=d||a.display.viewTo!=e)&&fg(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)),f}function V(a,b,c){var d=a.display,e=a.doc;if(!d.wrapper.offsetWidth)return Gc(a),void 0;if(!(!c&&b.from>=d.viewFrom&&b.to<=d.viewTo&&0==Kc(a))){R(a)&&Gc(a);var f=$(a),g=e.first+e.size,h=Math.max(b.from-a.options.viewportMargin,e.first),i=Math.min(g,b.to+a.options.viewportMargin);d.viewFrom<h&&h-d.viewFrom<20&&(h=Math.max(e.first,d.viewFrom)),d.viewTo>i&&d.viewTo-i<20&&(i=Math.min(g,d.viewTo)),y&&(h=Re(a.doc,h),i=Se(a.doc,i));var j=h!=d.viewFrom||i!=d.viewTo||d.lastSizeC!=d.wrapper.clientHeight;Jc(a,h,i),d.viewOffset=Ff(zf(a.doc,d.viewFrom)),a.display.mover.style.top=d.viewOffset+"px";var k=Kc(a);if(j||0!=k||c){var l=Lg();return k>4&&(d.lineDiv.style.display="none"),_(a,d.updateLineNumbers,f),k>4&&(d.lineDiv.style.display=""),l&&Lg()!=l&&l.offsetHeight&&l.focus(),Ig(d.cursorDiv),Ig(d.selectionDiv),j&&(d.lastSizeC=d.wrapper.clientHeight,Rb(a,400)),Y(a),!0}}}function W(a){var b=a.display,c=_b(a,b.maxLine,b.maxLine.text.length).left;b.maxLineChanged=!1;var d=Math.max(0,c+3),e=Math.max(0,b.sizer.offsetLeft+d+kg-b.scroller.clientWidth);b.sizer.style.minWidth=d+"px",e<a.doc.scrollLeft&&fd(a,Math.min(b.scroller.scrollLeft,e),!0)}function X(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-kg)+"px"}function Y(a){for(var b=a.display,d=b.lineDiv.offsetTop,e=0;e<b.view.length;e++){var g,f=b.view[e];if(!f.hidden){if(c){var h=f.node.offsetTop+f.node.offsetHeight;g=h-d,d=h}else{var i=f.node.getBoundingClientRect();g=i.bottom-i.top}var j=f.line.height-g;if(2>g&&(g=tc(b)),(j>.001||-.001>j)&&(Cf(f.line,g),Z(f.line),f.rest))for(var k=0;k<f.rest.length;k++)Z(f.rest[k])}}}function Z(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function $(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:T(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function _(a,b,c){function i(b){var c=b.nextSibling;return h&&s&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var d=a.display,e=a.options.lineNumbers,f=d.lineDiv,g=f.firstChild,j=d.view,k=d.viewFrom,l=0;l<j.length;l++){var m=j[l];if(m.hidden);else if(m.node){for(;g!=m.node;)g=i(g);var o=e&&null!=b&&k>=b&&m.lineNumber;m.changes&&(wg(m.changes,"gutter")>-1&&(o=!1),ab(a,m,k,c)),o&&(Ig(m.lineNumber),m.lineNumber.appendChild(document.createTextNode(S(a.options,k)))),g=m.node.nextSibling}else{var n=ib(a,m,k,c);f.insertBefore(n,g)}k+=m.size}for(;g;)g=i(g)}function ab(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?eb(a,b):"gutter"==f?gb(a,b,c,d):"class"==f?fb(b):"widget"==f&&hb(b,d)}b.changes=null}function bb(a){return a.node==a.text&&(a.node=Gg("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),c&&(a.node.style.zIndex=2)),a.node}function cb(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=bb(a);a.background=c.insertBefore(Gg("div",null,b),c.firstChild)}}function db(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):hf(a,b)}function eb(a,b){var c=b.text.className,d=db(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,fb(b)):c&&(b.text.className=c)}function fb(a){cb(a),a.line.wrapClass?bb(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||""}function gb(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=bb(b),g=b.gutter=f.insertBefore(Gg("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);if(!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(Gg("div",S(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),e)for(var h=0;h<a.options.gutters.length;++h){var i=a.options.gutters[h],j=e.hasOwnProperty(i)&&e[i];j&&g.appendChild(Gg("div",[j],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"))}}}function hb(a,b){a.alignable&&(a.alignable=null);for(var d,c=a.node.firstChild;c;c=d){var d=c.nextSibling;"CodeMirror-linewidget"==c.className&&a.node.removeChild(c)}jb(a,b)}function ib(a,b,c,d){var e=db(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),fb(b),gb(a,b,c,d),jb(b,d),b.node}function jb(a,b){if(kb(a.line,a,b,!0),a.rest)for(var c=0;c<a.rest.length;c++)kb(a.rest[c],a,b,!1)}function kb(a,b,c,d){if(a.widgets)for(var e=bb(b),f=0,g=a.widgets;f<g.length;++f){var h=g[f],i=Gg("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||(i.ignoreEvents=!0),lb(h,i,b,c),d&&h.above?e.insertBefore(i,b.gutter||b.text):e.appendChild(i),fg(h,"redraw")}}function lb(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function ob(a){return mb(a.line,a.ch)}function pb(a,b){return nb(a,b)<0?b:a}function qb(a,b){return nb(a,b)<0?a:b}function rb(a,b){this.ranges=a,this.primIndex=b}function sb(a,b){this.anchor=a,this.head=b}function tb(a,b){var c=a[b];a.sort(function(a,b){return nb(a.from(),b.from())}),b=wg(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(nb(f.to(),e.from())>=0){var g=qb(f.from(),e.from()),h=pb(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;b>=d&&--b,a.splice(--d,2,new sb(i?h:g,i?g:h))}}return new rb(a,b)}function ub(a,b){return new rb([new sb(a,b||a)],0)}function vb(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function wb(a,b){if(b.line<a.first)return mb(a.first,0);var c=a.first+a.size-1;return b.line>c?mb(c,zf(a,c).text.length):xb(b,zf(a,b.line).text.length)}function xb(a,b){var c=a.ch;return null==c||c>b?mb(a.line,b):0>c?mb(a.line,0):a}function yb(a,b){return b>=a.first&&b<a.first+a.size}function zb(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=wb(a,b[d]);return c}function Ab(a,b,c,d){if(a.cm&&a.cm.display.shift||a.extend){var e=b.anchor;if(d){var f=nb(c,e)<0;f!=nb(d,e)<0?(e=c,c=d):f!=nb(c,d)<0&&(c=d)}return new sb(e,c)}return new sb(d||c,c)}function Bb(a,b,c,d){Hb(a,new rb([Ab(a,a.sel.primary(),b,c)],0),d)}function Cb(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Ab(a,a.sel.ranges[e],b[e],null);var f=tb(d,a.sel.primIndex);Hb(a,f,c)}function Db(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,Hb(a,tb(e,a.sel.primIndex),d)}function Eb(a,b,c,d){Hb(a,ub(b,c),d)}function Fb(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new sb(wb(a,b[c].anchor),wb(a,b[c].head))}};return cg(a,"beforeSelectionChange",a,c),a.cm&&cg(a.cm,"beforeSelectionChange",a.cm,c),c.ranges!=b.ranges?tb(c.ranges,c.ranges.length-1):b}function Gb(a,b,c){var d=a.history.done,e=ug(d);e&&e.ranges?(d[d.length-1]=b,Ib(a,b,c)):Hb(a,b,c)}function Hb(a,b,c){c&&c.origin&&a.cm&&(a.cm.curOp.origin=c.origin),Ib(a,b,c),Nf(a,a.sel,a.cm?a.cm.curOp.id:0/0,c)}function Ib(a,b,c){(ig(a,"beforeSelectionChange")||a.cm&&ig(a.cm,"beforeSelectionChange"))&&(b=Fb(a,b));var d=nb(b.primary().head,a.sel.primary().head)<0?-1:1;Jb(a,Lb(a,b,d,!0)),c&&c.scroll===!1||!a.cm||Qd(a.cm)}function Jb(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),fg(a,"cursorActivity",a))}function Kb(a){Jb(a,Lb(a,a.sel,null,!1),mg)}function Lb(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=Mb(a,g.anchor,c,d),i=Mb(a,g.head,c,d);(e||h!=g.anchor||i!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new sb(h,i))}return e?tb(e,b.primIndex):b}function Mb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=zf(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(cg(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find(0>g?-1:1);if(0==nb(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?wb(a,mb(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?mb(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,mb(a.first,0)):Mb(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function Nb(a){for(var b=a.display,c=a.doc,d=document.createDocumentFragment(),e=document.createDocumentFragment(),f=0;f<c.sel.ranges.length;f++){var g=c.sel.ranges[f],h=g.empty();(h||a.options.showCursorWhenSelecting)&&Ob(a,g,d),h||Pb(a,g,e)}if(a.options.moveInputWithCursor){var i=nc(a,c.sel.primary().head,"div"),j=b.wrapper.getBoundingClientRect(),k=b.lineDiv.getBoundingClientRect(),l=Math.max(0,Math.min(b.wrapper.clientHeight-10,i.top+k.top-j.top)),m=Math.max(0,Math.min(b.wrapper.clientWidth-10,i.left+k.left-j.left));b.inputDiv.style.top=l+"px",b.inputDiv.style.left=m+"px"}Jg(b.cursorDiv,d),Jg(b.selectionDiv,e)}function Ob(a,b,c){var d=nc(a,b.head,"div"),e=c.appendChild(Gg("div","\xa0","CodeMirror-cursor"));if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",d.other){var f=c.appendChild(Gg("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=d.other.left+"px",f.style.top=d.other.top+"px",f.style.height=.85*(d.other.bottom-d.other.top)+"px"}}function Pb(a,b,c){function j(a,b,c,d){0>b&&(b=0),f.appendChild(Gg("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?i-a:c)+"px; height: "+(d-b)+"px"))}function k(b,c,d){function m(c,d){return mc(a,mb(b,c),"div",f,d)}var k,l,f=zf(e,b),g=f.text.length;return Xg(Gf(f),c||0,null==d?g:d,function(a,b,e){var n,o,p,f=m(a,"left");if(a==b)n=f,o=p=f.left;else{if(n=m(b-1,"right"),"rtl"==e){var q=f;f=n,n=q}o=f.left,p=n.right}null==c&&0==a&&(o=h),n.top-f.top>3&&(j(o,f.top,null,f.bottom),o=h,f.bottom<n.top&&j(o,f.bottom,null,n.top)),null==d&&b==g&&(p=i),(!k||f.top<k.top||f.top==k.top&&f.left<k.left)&&(k=f),(!l||n.bottom>l.bottom||n.bottom==l.bottom&&n.right>l.right)&&(l=n),h+1>o&&(o=h),j(o,n.top,p-o,n.bottom)}),{start:k,end:l}}var d=a.display,e=a.doc,f=document.createDocumentFragment(),g=Xb(a.display),h=g.left,i=d.lineSpace.offsetWidth-g.right,l=b.from(),m=b.to();if(l.line==m.line)k(l.line,l.ch,m.ch);else{var n=zf(e,l.line),o=zf(e,m.line),p=Pe(n)==Pe(o),q=k(l.line,l.ch,p?n.text.length+1:null).end,r=k(m.line,p?0:null,m.ch).start;p&&(q.top<r.top-2?(j(q.right,q.top,null,q.bottom),j(h,r.top,r.left,r.bottom)):j(q.right,q.top,r.left-q.right,q.bottom)),q.bottom<r.top&&j(h,q.bottom,null,r.top)}c.appendChild(f)}function Qb(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0&&(b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function Rb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,Ag(Sb,a))}function Sb(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=fe(b.mode,Ub(a,b.frontier));yc(a,function(){b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(e){if(b.frontier>=a.display.viewFrom){var f=e.styles;e.styles=bf(a,e,d,!0);for(var g=!f||f.length!=e.styles.length,h=0;!g&&h<f.length;++h)g=f[h]!=e.styles[h];g&&Fc(a,b.frontier,"text"),e.stateAfter=fe(b.mode,d)}else df(a,e.text,d),e.stateAfter=0==b.frontier%5?fe(b.mode,d):null;return++b.frontier,+new Date>c?(Rb(a,a.options.workDelay),!0):void 0})})}}function Tb(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=zf(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=qg(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function Ub(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Tb(a,b,c),g=f>d.first&&zf(d,f-1).stateAfter;return g=g?fe(d.mode,g):ge(d.mode),d.iter(f,b,function(c){df(a,c.text,g);var h=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo;c.stateAfter=h?fe(d.mode,g):null,++f}),c&&(d.frontier=f),g}function Vb(a){return a.lineSpace.offsetTop}function Wb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Xb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Jg(a.measure,Gg("pre","x")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;return a.cachedPaddingH={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)}}function Yb(a,b,c){var d=a.options.lineWrapping,e=d&&a.display.scroller.clientWidth;if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Zb(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var d=0;d<a.rest.length;d++)if(Df(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function $b(a,b){b=Pe(b);var c=Df(b),d=a.display.externalMeasured=new Cc(a.doc,b,c);d.lineN=c;var e=d.built=hf(a,d);return d.text=e.pre,Jg(a.display.lineMeasure,e.pre),d}function _b(a,b,c,d){return cc(a,bc(a,b),c,d)}function ac(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Hc(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function bc(a,b){var c=Df(b),d=ac(a,c);d&&!d.text?d=null:d&&d.changes&&ab(a,d,c,$(a)),d||(d=$b(a,b));var e=Zb(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function cc(a,b,c,d){b.before&&(c=-1);var f,e=c+(d||"");return b.cache.hasOwnProperty(e)?f=b.cache[e]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Yb(a,b.view,b.rect),b.hasHeights=!0),f=ec(a,b,c,d),f.bogus||(b.cache[e]=f)),{left:f.left,right:f.right,top:f.top,bottom:f.bottom}}function ec(a,b,c,e){for(var h,i,j,k,f=b.map,l=0;l<f.length;l+=3){var m=f[l],n=f[l+1];if(m>c?(i=0,j=1,k="left"):n>c?(i=c-m,j=i+1):(l==f.length-3||c==n&&f[l+3]>c)&&(j=n-m,i=j-1,c>=n&&(k="right")),null!=i){if(h=f[l+2],m==n&&e==(h.insertLeft?"left":"right")&&(k=e),"left"==e&&0==i)for(;l&&f[l-2]==f[l-3]&&f[l-1].insertLeft;)h=f[(l-=3)+2],k="left";if("right"==e&&i==n-m)for(;l<f.length-3&&f[l+3]==f[l+4]&&!f[l+5].insertLeft;)h=f[(l+=3)+2],k="right";break}}var o;if(3==h.nodeType){for(;i&&Fg(b.line.text.charAt(m+i));)--i;for(;n>m+j&&Fg(b.line.text.charAt(m+j));)++j;if(d&&0==i&&j==n-m)o=h.parentNode.getBoundingClientRect();else if(g&&a.options.lineWrapping){var p=Hg(h,i,j).getClientRects();o=p.length?p["right"==e?p.length-1:0]:dc}else o=Hg(h,i,j).getBoundingClientRect()}else{i>0&&(k=e="right");var p;o=a.options.lineWrapping&&(p=h.getClientRects()).length>1?p["right"==e?p.length-1:0]:h.getBoundingClientRect()}if(d&&!i&&(!o||!o.left&&!o.right)){var q=h.parentNode.getClientRects()[0];o=q?{left:q.left,right:q.left+uc(a.display),top:q.top,bottom:q.bottom}:dc}for(var r,s=(o.bottom+o.top)/2-b.rect.top,t=b.view.measure.heights,l=0;l<t.length-1&&!(s<t[l]);l++);r=l?t[l-1]:0,s=t[l];var u={left:("right"==k?o.right:o.left)-b.rect.left,right:("left"==k?o.left:o.right)-b.rect.left,top:r,bottom:s};return o.left||o.right||(u.bogus=!0),u}function fc(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function gc(a){a.display.externalMeasure=null,Ig(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)fc(a.display.view[b])}function hc(a){gc(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function ic(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jc(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function kc(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Xe(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=Ff(b);if("local"==d?g+=Vb(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:jc());var i=h.left+("window"==d?0:ic());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function lc(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=ic(),e-=jc();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function mc(a,b,c,d,e){return d||(d=zf(a.doc,b.line)),kc(a,d,_b(a,d,b.ch,e),c)}function nc(a,b,c,d,e){function f(b,f){var g=cc(a,e,b,f?"right":"left");return f?g.left=g.right:g.right=g.left,kc(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==Yg(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=Zg(c)-(c.level%2?0:1),d=!0):a==Zg(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=Yg(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||zf(a.doc,b.line),e||(e=bc(a,d));var h=Gf(d),i=b.ch;if(!h)return f(i);var j=eh(h,i),k=g(i,j);return null!=dh&&(k.other=g(i,dh)),k}function oc(a,b){var c=0,b=wb(a.doc,b);a.options.lineWrapping||(c=uc(a.display)*b.ch);var d=zf(a.doc,b.line),e=Ff(d)+Vb(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function pc(a,b,c,d){var e=mb(a,b);return e.xRel=d,c&&(e.outside=!0),e}function qc(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return pc(d.first,0,!0,-1);var e=Ef(d,c),f=d.first+d.size-1;if(e>f)return pc(d.first+d.size-1,zf(d,f).text.length,!0,1);0>b&&(b=0);for(var g=zf(d,e);;){var h=rc(a,g,e,b,c),i=Ne(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=Df(g=j.to.line)}}function rc(a,b,c,d,e){function j(d){var e=nc(a,mb(c,d),"line",b,i);return g=!0,f>e.bottom?e.left-h:f<e.top?e.left+h:(g=!1,e.left)}var f=e-Ff(b),g=!1,h=2*a.display.wrapper.clientWidth,i=bc(a,b),k=Gf(b),l=b.text.length,m=$g(b),n=_g(b),o=j(m),p=g,q=j(n),r=g;if(d>q)return pc(c,n,r,1);for(;;){if(k?n==m||n==gh(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);Fg(b.text.charAt(s));)++s;var u=pc(c,s,s==m?p:r,-1>t?-1:t>1?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=gh(b,w,1)}var y=j(w);y>d?(n=w,q=y,(r=g)&&(q+=1e3),l=v):(m=w,o=y,p=g,l-=v)}}function tc(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==sc){sc=Gg("pre");for(var b=0;49>b;++b)sc.appendChild(document.createTextNode("x")),sc.appendChild(Gg("br"));sc.appendChild(document.createTextNode("x"))}Jg(a.measure,sc);var c=sc.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),Ig(a.measure),c||1}function uc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=Gg("span","xxxxxxxxxx"),c=Gg("pre",[b]);Jg(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function wc(a){a.curOp={viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,origin:null,cursorActivity:!1,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++vc},eg++||(dg=[])}function xc(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&L(a),b.viewChanged||b.forceUpdate||null!=b.scrollTop||b.scrollToPos&&(b.scrollToPos.from.line<d.viewFrom||b.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&a.options.lineWrapping){var e=U(a,{top:b.scrollTop,ensure:b.scrollToPos},b.forceUpdate);a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)}if(!e&&b.selectionChanged&&Nb(a),e||b.startHeight==a.doc.height||O(a),null!=b.scrollTop&&d.scroller.scrollTop!=b.scrollTop){var f=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,b.scrollTop));d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=f}if(null!=b.scrollLeft&&d.scroller.scrollLeft!=b.scrollLeft){var g=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,b.scrollLeft));d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g,Q(a)}if(b.scrollToPos){var h=Md(a,wb(a.doc,b.scrollToPos.from),wb(a.doc,b.scrollToPos.to),b.scrollToPos.margin);b.scrollToPos.isCursor&&a.state.focused&&Ld(a,h)}b.selectionChanged&&Qb(a),a.state.focused&&b.updateInput&&Oc(a,b.typing);var i=b.maybeHiddenMarkers,j=b.maybeUnhiddenMarkers;if(i)for(var k=0;k<i.length;++k)i[k].lines.length||cg(i[k],"hide");if(j)for(var k=0;k<j.length;++k)j[k].lines.length&&cg(j[k],"unhide");var l;if(--eg||(l=dg,dg=null),b.changeObjs){for(var k=0;k<b.changeObjs.length;k++)cg(a,"change",a,b.changeObjs[k]);cg(a,"changes",a,b.changeObjs)}if(b.cursorActivity&&cg(a,"cursorActivity",a,b.origin),l)for(var k=0;k<l.length;++k)l[k]()}function yc(a,b){if(a.curOp)return b();wc(a);try{return b()}finally{xc(a)}}function zc(a,b){return function(){if(a.curOp)return b.apply(a,arguments);wc(a);try{return b.apply(a,arguments)}finally{xc(a)}}}function Ac(a){return function(){if(this.curOp)return a.apply(this,arguments);wc(this);try{return a.apply(this,arguments)}finally{xc(this)}}}function Bc(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);wc(b);try{return a.apply(this,arguments)}finally{xc(b)}}}function Cc(a,b,c){this.line=b,this.rest=Qe(b),this.size=this.rest?Df(ug(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Te(a,b)}function Dc(a,b,c){for(var e,d=[],f=b;c>f;f=e){var g=new Cc(a.doc,zf(a.doc,f),f);e=f+g.size,d.push(g)}return d}function Ec(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);
var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)y&&Re(a.doc,b)<e.viewTo&&Gc(a);else if(c<=e.viewFrom)y&&Se(a.doc,c+d)>e.viewFrom?Gc(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Gc(a);else if(b<=e.viewFrom){var f=Ic(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Gc(a)}else if(c>=e.viewTo){var f=Ic(a,b,b,-1);f?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Gc(a)}else{var g=Ic(a,b,b,-1),h=Ic(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(Dc(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):Gc(a)}var i=e.externalMeasured;i&&(c<i.lineN?i.lineN+=d:b<i.lineN+i.size&&(e.externalMeasured=null))}function Fc(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[Hc(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==wg(g,c)&&g.push(c)}}}function Gc(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Hc(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function Ic(a,b,c,d){var f,e=Hc(a,b),g=a.display.view;if(!y)return{index:e,lineN:c};for(var h=0,i=a.display.viewFrom;e>h;h++)i+=g[h].size;if(i!=b){if(d>0){if(e==g.length-1)return null;f=i+g[e].size-b,e++}else f=i-b;b+=f,c+=f}for(;Re(a.doc,c)!=c;){if(e==(0>d?0:g.length-1))return null;c+=d*g[e-(0>d?1:0)].size,e+=d}return{index:e,lineN:c}}function Jc(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=Dc(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=Dc(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(Hc(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(Dc(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,Hc(a,c)))),d.viewTo=c}function Kc(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function Lc(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Nc(a),a.state.focused&&Lc(a)})}function Mc(a){function c(){var d=Nc(a);d||b?(a.display.pollingFast=!1,Lc(a)):(b=!0,a.display.poll.set(60,c))}var b=!1;a.display.pollingFast=!0,a.display.poll.set(20,c)}function Nc(a){var b=a.display.input,c=a.display.prevInput,e=a.doc;if(!a.state.focused||Ug(b)||Rc(a)||a.options.disableInput)return!1;var f=b.value;if(f==c&&!a.somethingSelected())return!1;if(g&&!d&&a.display.inputHasSelection===f)return Oc(a),!1;var h=!a.curOp;h&&wc(a),a.display.shift=!1;for(var i=0,j=Math.min(c.length,f.length);j>i&&c.charCodeAt(i)==f.charCodeAt(i);)++i;for(var k=f.slice(i),l=Tg(k),m=a.state.pasteIncoming&&l.length>1&&e.sel.ranges.length==l.length,n=e.sel.ranges.length-1;n>=0;n--){var o=e.sel.ranges[n],p=o.from(),q=o.to();i<c.length?p=mb(p.line,p.ch-(c.length-i)):a.state.overwrite&&o.empty()&&!a.state.pasteIncoming&&(q=mb(q.line,Math.min(zf(e,q.line).text.length,q.ch+ug(l).length)));var r=a.curOp.updateInput,s={from:p,to:q,text:m?[l[n]]:l,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};if(Ed(a.doc,s),fg(a,"inputRead",a,s),k&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&o.head.ch<100&&(!n||e.sel.ranges[n-1].head.line!=o.head.line)){var t=a.getModeAt(o.head).electricChars;if(t)for(var u=0;u<t.length;u++)if(k.indexOf(t.charAt(u))>-1){Sd(a,o.head.line,"smart");break}}}return Qd(a),a.curOp.updateInput=r,a.curOp.typing=!0,f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,h&&xc(a),a.state.pasteIncoming=a.state.cutIncoming=!1,!0}function Oc(a,b){var c,e,f=a.doc;if(a.somethingSelected()){a.display.prevInput="";var h=f.sel.primary();c=Vg&&(h.to().line-h.from().line>100||(e=a.getSelection()).length>1e3);var i=c?"-":e||a.getSelection();a.display.input.value=i,a.state.focused&&vg(a.display.input),g&&!d&&(a.display.inputHasSelection=i)}else b||(a.display.prevInput=a.display.input.value="",g&&!d&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function Pc(a){"nocursor"==a.options.readOnly||r&&Lg()==a.display.input||a.display.input.focus()}function Qc(a){a.state.focused||(Pc(a),td(a))}function Rc(a){return a.options.readOnly||a.doc.cantEdit}function Sc(a){function e(){a.state.focused&&setTimeout(Ag(Pc,a),0)}function h(){null==f&&(f=setTimeout(function(){f=null,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=Ng=null,a.setSize()},100))}function i(){Kg(document.body,c.wrapper)?setTimeout(i,5e3):bg(window,"resize",h)}function j(b){hg(a,b)||Zf(b)}function k(b){if(a.somethingSelected())c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,c.input.value=a.getSelection(),vg(c.input));else{for(var d="",e=[],f=0;f<a.doc.sel.ranges.length;f++){var g=a.doc.sel.ranges[f].head.line,h={anchor:mb(g,0),head:mb(g+1,0)};e.push(h),d+=a.getRange(h.anchor,h.head)}"cut"==b.type?a.setSelections(e,null,mg):(c.prevInput="",c.input.value=d,vg(c.input))}"cut"==b.type&&(a.state.cutIncoming=!0)}var c=a.display;ag(c.scroller,"mousedown",zc(a,Vc)),b?ag(c.scroller,"dblclick",zc(a,function(b){if(!hg(a,b)){var c=Uc(a,b);if(c&&!ad(a,b)&&!Tc(a.display,b)){Wf(b);var d=Xd(a.doc,c);Bb(a.doc,d.anchor,d.head)}}})):ag(c.scroller,"dblclick",function(b){hg(a,b)||Wf(b)}),ag(c.lineSpace,"selectstart",function(a){Tc(c,a)||Wf(a)}),w||ag(c.scroller,"contextmenu",function(b){wd(a,b)}),ag(c.scroller,"scroll",function(){c.scroller.clientHeight&&(ed(a,c.scroller.scrollTop),fd(a,c.scroller.scrollLeft,!0),cg(a,"scroll",a))}),ag(c.scrollbarV,"scroll",function(){c.scroller.clientHeight&&ed(a,c.scrollbarV.scrollTop)}),ag(c.scrollbarH,"scroll",function(){c.scroller.clientHeight&&fd(a,c.scrollbarH.scrollLeft)}),ag(c.scroller,"mousewheel",function(b){id(a,b)}),ag(c.scroller,"DOMMouseScroll",function(b){id(a,b)}),ag(c.scrollbarH,"mousedown",e),ag(c.scrollbarV,"mousedown",e),ag(c.wrapper,"scroll",function(){c.wrapper.scrollTop=c.wrapper.scrollLeft=0});var f;ag(window,"resize",h),setTimeout(i,5e3),ag(c.input,"keyup",zc(a,rd)),ag(c.input,"input",function(){g&&!d&&a.display.inputHasSelection&&(a.display.inputHasSelection=null),Mc(a)}),ag(c.input,"keydown",zc(a,pd)),ag(c.input,"keypress",zc(a,sd)),ag(c.input,"focus",Ag(td,a)),ag(c.input,"blur",Ag(ud,a)),a.options.dragDrop&&(ag(c.scroller,"dragstart",function(b){dd(a,b)}),ag(c.scroller,"dragenter",j),ag(c.scroller,"dragover",j),ag(c.scroller,"drop",zc(a,cd))),ag(c.scroller,"paste",function(b){Tc(c,b)||(a.state.pasteIncoming=!0,Pc(a),Mc(a))}),ag(c.input,"paste",function(){a.state.pasteIncoming=!0,Mc(a)}),ag(c.input,"cut",k),ag(c.input,"copy",k),m&&ag(c.sizer,"mouseup",function(){Lg()==c.input&&c.input.blur(),Pc(a)})}function Tc(a,b){for(var c=$f(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function Uc(a,b,c,d){var e=a.display;if(!c){var f=$f(b);if(f==e.scrollbarH||f==e.scrollbarV||f==e.scrollbarFiller||f==e.gutterFiller)return null}var g,h,i=e.lineSpace.getBoundingClientRect();try{g=b.clientX-i.left,h=b.clientY-i.top}catch(b){return null}var k,j=qc(a,g,h);if(d&&1==j.xRel&&(k=zf(a.doc,j.line).text).length==j.ch){var l=qg(k,k.length,a.options.tabSize)-k.length;j=mb(j.line,Math.round((g-Xb(a.display).left)/uc(a.display))-l)}return j}function Vc(a){if(!hg(this,a)){var b=this,c=b.display;if(c.shift=a.shiftKey,Tc(c,a))return h||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100)),void 0;if(!ad(b,a)){var d=Uc(b,a);switch(window.focus(),_f(a)){case 1:d?Yc(b,a,d):$f(a)==c.scroller&&Wf(a);break;case 2:h&&(b.state.lastMiddleDown=+new Date),d&&Bb(b.doc,d),setTimeout(Ag(Pc,b),20),Wf(a);break;case 3:w&&wd(b,a)}}}}function Yc(a,b,c){setTimeout(Ag(Qc,a),0);var e,d=+new Date;Xc&&Xc.time>d-400&&0==nb(Xc.pos,c)?e="triple":Wc&&Wc.time>d-400&&0==nb(Wc.pos,c)?(e="double",Xc={time:d,pos:c}):(e="single",Wc={time:d,pos:c});var f=a.doc.sel,g=s?b.metaKey:b.ctrlKey;a.options.dragDrop&&Mg&&!g&&!Rc(a)&&"single"==e&&f.contains(c)>-1&&f.somethingSelected()?Zc(a,b,c):$c(a,b,c,e,g)}function Zc(a,c,e){var f=a.display,g=zc(a,function(i){h&&(f.scroller.draggable=!1),a.state.draggingText=!1,bg(document,"mouseup",g),bg(f.scroller,"drop",g),Math.abs(c.clientX-i.clientX)+Math.abs(c.clientY-i.clientY)<10&&(Wf(i),Bb(a.doc,e),Pc(a),b&&!d&&setTimeout(function(){document.body.focus(),Pc(a)},20))});h&&(f.scroller.draggable=!0),a.state.draggingText=g,f.scroller.dragDrop&&f.scroller.dragDrop(),ag(document,"mouseup",g),ag(f.scroller,"drop",g)}function $c(a,b,c,d,f){function p(b){if(0!=nb(o,b))if(o=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=qg(zf(i,c.line).text,c.ch,f),h=qg(zf(i,b.line).text,b.ch,f),m=Math.min(g,h),n=Math.max(g,h),p=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));q>=p;p++){var r=zf(i,p).text,s=rg(r,m,f);m==n?e.push(new sb(mb(p,s),mb(p,s))):r.length>s&&e.push(new sb(mb(p,s),mb(p,rg(r,n,f))))}e.length||e.push(new sb(c,c)),Hb(i,tb(l.ranges.slice(0,k).concat(e),k),ng)}else{var t=j,u=t.anchor,v=b;if("single"!=d){if("double"==d)var w=Xd(i,b);else var w=new sb(mb(b.line,0),wb(i,mb(b.line+1,0)));nb(w.anchor,u)>0?(v=w.head,u=qb(t.from(),w.anchor)):(v=w.anchor,u=pb(t.to(),w.head))}var e=l.ranges.slice(0);e[k]=new sb(wb(i,u),v),Hb(i,tb(e,k),ng)}}function s(b){var c=++r,e=Uc(a,b,!0,"rect"==d);if(e)if(0!=nb(e,o)){Qc(a),p(e);var f=P(h,i);(e.line>=f.to||e.line<f.from)&&setTimeout(zc(a,function(){r==c&&s(b)}),150)}else{var g=b.clientY<q.top?-20:b.clientY>q.bottom?20:0;g&&setTimeout(zc(a,function(){r==c&&(h.scroller.scrollTop+=g,s(b))}),50)}}function t(b){r=1/0,Wf(b),Pc(a),bg(document,"mousemove",u),bg(document,"mouseup",v),i.history.lastSelOrigin=null}var h=a.display,i=a.doc;Wf(b);var j,k,l=i.sel;if(f?(k=i.sel.contains(c),j=k>-1?i.sel.ranges[k]:new sb(c,c)):j=i.sel.primary(),b.altKey)d="rect",f||(j=new sb(c,c)),c=Uc(a,b,!0,!0),k=-1;else if("double"==d){var m=Xd(i,c);j=a.display.shift||i.extend?Ab(i,j,m.anchor,m.head):m}else if("triple"==d){var n=new sb(mb(c.line,0),wb(i,mb(c.line+1,0)));j=a.display.shift||i.extend?Ab(i,j,n.anchor,n.head):n}else j=Ab(i,j,c);f?k>-1?Db(i,k,j,ng):(k=i.sel.ranges.length,Hb(i,tb(i.sel.ranges.concat([j]),k),{scroll:!1,origin:"*mouse"})):(k=0,Hb(i,new rb([j],0),ng));var o=c,q=h.wrapper.getBoundingClientRect(),r=0,u=zc(a,function(a){(g&&!e?a.buttons:_f(a))?s(a):t(a)}),v=zc(a,t);ag(document,"mousemove",u),ag(document,"mouseup",v)}function _c(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(b){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Wf(b);var h=a.display,i=h.lineDiv.getBoundingClientRect();if(g>i.bottom||!ig(a,c))return Yf(b);g-=i.top-h.viewOffset;for(var j=0;j<a.options.gutters.length;++j){var k=h.gutters.childNodes[j];if(k&&k.getBoundingClientRect().right>=f){var l=Ef(a.doc,g),m=a.options.gutters[j];return e(a,c,a,l,m,b),Yf(b)}}}function ad(a,b){return _c(a,b,"gutterClick",!0,fg)}function cd(a){var c=this;if(!hg(c,a)&&!Tc(c.display,a)){Wf(a),b&&(bd=+new Date);var d=Uc(c,a,!0),e=a.dataTransfer.files;if(d&&!Rc(c))if(e&&e.length&&window.FileReader&&window.File)for(var f=e.length,g=Array(f),h=0,i=function(a,b){var e=new FileReader;e.onload=zc(c,function(){if(g[b]=e.result,++h==f){d=wb(c.doc,d);var a={from:d,to:d,text:Tg(g.join("\n")),origin:"paste"};Ed(c.doc,a),Gb(c.doc,ub(d,yd(a)))}}),e.readAsText(a)},j=0;f>j;++j)i(e[j],j);else{if(c.state.draggingText&&c.doc.sel.contains(d)>-1)return c.state.draggingText(a),setTimeout(Ag(Pc,c),20),void 0;try{var g=a.dataTransfer.getData("Text");if(g){var k=c.state.draggingText&&c.listSelections();if(Ib(c.doc,ub(d,d)),k)for(var j=0;j<k.length;++j)Kd(c.doc,"",k[j].anchor,k[j].head,"drag");c.replaceSelection(g,"around","paste"),Pc(c)}}catch(a){}}}}function dd(a,c){if(b&&(!a.state.draggingText||+new Date-bd<100))return Zf(c),void 0;if(!hg(a,c)&&!Tc(a.display,c)&&(c.dataTransfer.setData("Text",a.getSelection()),c.dataTransfer.setDragImage&&!l)){var d=Gg("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),c.dataTransfer.setDragImage(d,0,0),k&&d.parentNode.removeChild(d)}}function ed(b,c){Math.abs(b.doc.scrollTop-c)<2||(b.doc.scrollTop=c,a||U(b,{top:c}),b.display.scroller.scrollTop!=c&&(b.display.scroller.scrollTop=c),b.display.scrollbarV.scrollTop!=c&&(b.display.scrollbarV.scrollTop=c),a&&U(b),Rb(b,100))}function fd(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,Q(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function id(b,c){var d=c.wheelDeltaX,e=c.wheelDeltaY;null==d&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(d=c.detail),null==e&&c.detail&&c.axis==c.VERTICAL_AXIS?e=c.detail:null==e&&(e=c.wheelDelta);var f=b.display,g=f.scroller;if(d&&g.scrollWidth>g.clientWidth||e&&g.scrollHeight>g.clientHeight){if(e&&s&&h)a:for(var i=c.target,j=f.view;i!=g;i=i.parentNode)for(var l=0;l<j.length;l++)if(j[l].node==i){b.display.currentWheelTarget=i;break a}if(d&&!a&&!k&&null!=hd)return e&&ed(b,Math.max(0,Math.min(g.scrollTop+e*hd,g.scrollHeight-g.clientHeight))),fd(b,Math.max(0,Math.min(g.scrollLeft+d*hd,g.scrollWidth-g.clientWidth))),Wf(c),f.wheelStartX=null,void 0;if(e&&null!=hd){var m=e*hd,n=b.doc.scrollTop,o=n+f.wrapper.clientHeight;0>m?n=Math.max(0,n+m-50):o=Math.min(b.doc.height,o+m+50),U(b,{top:n,bottom:o})}20>gd&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(hd=(hd*gd+c)/(gd+1),++gd)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function jd(a,b,c){if("string"==typeof b&&(b=he[b],!b))return!1;a.display.pollingFast&&Nc(a)&&(a.display.pollingFast=!1);var d=a.display.shift,e=!1;try{Rc(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=lg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function kd(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function md(a,b){var c=je(a.options.keyMap),d=c.auto;clearTimeout(ld),d&&!le(b)&&(ld=setTimeout(function(){je(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,G(a))},50));var e=me(b,!0),f=!1;if(!e)return!1;var g=kd(a);return f=b.shiftKey?ke("Shift-"+e,g,function(b){return jd(a,b,!0)})||ke(e,g,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?jd(a,b):void 0}):ke(e,g,function(b){return jd(a,b)}),f&&(Wf(b),Qb(a),fg(a,"keyHandled",a,e,b)),f}function nd(a,b,c){var d=ke("'"+c+"'",kd(a),function(b){return jd(a,b,!0)});return d&&(Wf(b),Qb(a),fg(a,"keyHandled",a,"'"+c+"'",b)),d}function pd(a){var c=this;if(Qc(c),!hg(c,a)){b&&27==a.keyCode&&(a.returnValue=!1);var d=a.keyCode;c.display.shift=16==d||a.shiftKey;var e=md(c,a);k&&(od=e?d:null,!e&&88==d&&!Vg&&(s?a.metaKey:a.ctrlKey)&&c.replaceSelection("",null,"cut")),18!=d||/\bCodeMirror-crosshair\b/.test(c.display.lineDiv.className)||qd(c)}}function qd(a){function c(a){18!=a.keyCode&&a.altKey||(b.className=b.className.replace(" CodeMirror-crosshair",""),bg(document,"keyup",c),bg(document,"mouseover",c))}var b=a.display.lineDiv;b.className+=" CodeMirror-crosshair",ag(document,"keyup",c),ag(document,"mouseover",c)}function rd(a){hg(this,a)||16==a.keyCode&&(this.doc.sel.shift=!1)}function sd(a){var b=this;if(!hg(b,a)){var c=a.keyCode,e=a.charCode;if(k&&c==od)return od=null,Wf(a),void 0;if(!(k&&(!a.which||a.which<10)||m)||!md(b,a)){var f=String.fromCharCode(null==e?c:e);nd(b,a,f)||(g&&!d&&(b.display.inputHasSelection=null),Mc(b))}}}function td(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(cg(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),a.curOp||(Oc(a),h&&setTimeout(Ag(Oc,a,!0),0))),Lc(a),Qb(a))}function ud(a){a.state.focused&&(cg(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function wd(a,b){function j(){if(null!=c.input.selectionStart){var b=c.input.value="\u200b"+(a.somethingSelected()?c.input.value:"");c.prevInput="\u200b",c.input.selectionStart=1,c.input.selectionEnd=b.length}}function l(){if(c.inputDiv.style.position="relative",c.input.style.cssText=i,d&&(c.scrollbarV.scrollTop=c.scroller.scrollTop=f),Lc(a),null!=c.input.selectionStart){(!g||d)&&j(),clearTimeout(vd);var b=0,e=function(){"\u200b"==c.prevInput&&0==c.input.selectionStart?zc(a,he.selectAll)(a):b++<10?vd=setTimeout(e,500):Oc(a)};vd=setTimeout(e,200)}}if(!hg(a,b,"contextmenu")){var c=a.display;if(!Tc(c,b)&&!xd(a,b)){var e=Uc(a,b),f=c.scroller.scrollTop;if(e&&!k){var h=a.options.resetSelectionOnContextMenu;h&&-1==a.doc.sel.contains(e)&&zc(a,Hb)(a.doc,ub(e),mg);var i=c.input.style.cssText;if(c.inputDiv.style.position="absolute",c.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(g?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Pc(a),Oc(a),a.somethingSelected()||(c.input.value=c.prevInput=" "),g&&!d&&j(),w){Zf(b);var m=function(){bg(window,"mouseup",m),setTimeout(l,20)};ag(window,"mouseup",m)}else setTimeout(l,50)}}}}function xd(a,b){return ig(a,"gutterContextMenu")?_c(a,b,"gutterContextMenu",!1,cg):!1}function zd(a,b){if(nb(a,b.from)<0)return a;if(nb(a,b.to)<=0)return yd(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=yd(b).ch-b.to.ch),mb(c,d)}function Ad(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new sb(zd(e.anchor,b),zd(e.head,b)))}return tb(c,a.sel.primIndex)}function Bd(a,b,c){return a.line==b.line?mb(c.line,a.ch-b.ch+c.ch):mb(c.line+(a.line-b.line),a.ch)}function Cd(a,b,c){for(var d=[],e=mb(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=Bd(h.from,e,f),j=Bd(yd(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=nb(k.head,k.anchor)<0;d[g]=new sb(l?j:i,l?i:j)}else d[g]=new sb(i,i)}return new rb(d,a.sel.primIndex)}function Dd(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=wb(a,b)),c&&(this.to=wb(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),cg(a,"beforeChange",a,d),a.cm&&cg(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Ed(a,b,c){if(a.cm){if(!a.cm.curOp)return zc(a.cm,Ed)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(ig(a,"beforeChange")||a.cm&&ig(a.cm,"beforeChange"))||(b=Dd(a,b,!0))){var d=x&&!c&&Fe(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Fd(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text});else Fd(a,b)}}function Fd(a,b){if(1!=b.text.length||""!=b.text[0]||0!=nb(b.from,b.to)){var c=Ad(a,b);Lf(a,b,c,a.cm?a.cm.curOp.id:0/0),Id(a,b,c,Ce(a,b));var d=[];xf(a,function(a,c){c||-1!=wg(d,a.history)||(Vf(a.history,b),d.push(a.history)),Id(a,b,null,Ce(a,b))})}}function Gd(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var e,d=a.history,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,i=0;i<g.length&&(e=g[i],c?!e.ranges||e.equals(a.sel):e.ranges);i++);if(i!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;e=g.pop(),e.ranges;){if(Of(e,h),c&&!e.equals(a.sel))return Hb(a,e,{clearRedo:!1}),void 0;f=e}var j=[];Of(f,h),h.push({changes:j,generation:d.generation}),d.generation=e.generation||++d.maxGeneration;for(var k=ig(a,"beforeChange")||a.cm&&ig(a.cm,"beforeChange"),i=e.changes.length-1;i>=0;--i){var l=e.changes[i];if(l.origin=b,k&&!Dd(a,l,!1))return g.length=0,void 0;j.push(If(a,l));var m=i?Ad(a,l,null):ug(g);Id(a,l,m,Ee(a,l)),a.cm&&Qd(a.cm);var n=[];xf(a,function(a,b){b||-1!=wg(n,a.history)||(Vf(a.history,l),n.push(a.history)),Id(a,l,null,Ee(a,l))})}}}}function Hd(a,b){a.first+=b,a.sel=new rb(xg(a.sel.ranges,function(a){return new sb(mb(a.anchor.line+b,a.anchor.ch),mb(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm&&Ec(a.cm,a.first,a.first-b,b)}function Id(a,b,c,d){if(a.cm&&!a.cm.curOp)return zc(a.cm,Id)(a,b,c,d);if(b.to.line<a.first)return Hd(a,b.text.length-1-(b.to.line-b.from.line)),void 0;if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Hd(a,e),b={from:mb(a.first,0),to:mb(b.to.line+e,b.to.ch),text:[ug(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:mb(f,zf(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=Af(a,b.from,b.to),c||(c=Ad(a,b,null)),a.cm?Jd(a.cm,b,d):qf(a,b,d),Ib(a,c,mg)}}function Jd(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,i=f.line;a.options.lineWrapping||(i=Df(Pe(zf(d,f.line))),d.iter(i,g.line+1,function(a){return a==e.maxLine?(h=!0,!0):void 0})),d.sel.contains(b.from,b.to)>-1&&(a.curOp.cursorActivity=!0),qf(d,b,c,E(a)),a.options.lineWrapping||(d.iter(i,f.line+b.text.length,function(a){var b=K(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0)),d.frontier=Math.min(d.frontier,f.line),Rb(a,400);var j=b.text.length-(g.line-f.line)-1;f.line!=g.line||1!=b.text.length||pf(a.doc,b)?Ec(a,f.line,g.line+1,j):Fc(a,f.line,"text"),(ig(a,"change")||ig(a,"changes"))&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push({from:f,to:g,text:b.text,removed:b.removed,origin:b.origin})}function Kd(a,b,c,d,e){if(d||(d=c),nb(d,c)<0){var f=d;d=c,c=f}"string"==typeof b&&(b=Tg(b)),Ed(a,{from:c,to:d,text:b,origin:e})}function Ld(a,b){var c=a.display,d=c.sizer.getBoundingClientRect(),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!p){var f=Gg("div","\u200b",null,"position: absolute; top: "+(b.top-c.viewOffset-Vb(a.display))+"px; height: "+(b.bottom-b.top+kg)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(f),f.scrollIntoView(e),a.display.lineSpace.removeChild(f)}}function Md(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=nc(a,b),g=c&&c!=b?nc(a,c):f,h=Od(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),i=a.doc.scrollTop,j=a.doc.scrollLeft;if(null!=h.scrollTop&&(ed(a,h.scrollTop),Math.abs(a.doc.scrollTop-i)>1&&(e=!0)),null!=h.scrollLeft&&(fd(a,h.scrollLeft),Math.abs(a.doc.scrollLeft-j)>1&&(e=!0)),!e)return f}}function Nd(a,b,c,d,e){var f=Od(a,b,c,d,e);null!=f.scrollTop&&ed(a,f.scrollTop),null!=f.scrollLeft&&fd(a,f.scrollLeft)}function Od(a,b,c,d,e){var f=a.display,g=tc(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,i=f.scroller.clientHeight-kg,j={},k=a.doc.height+Wb(f),l=g>c,m=e>k-g;if(h>c)j.scrollTop=l?0:c;else if(e>h+i){var n=Math.min(c,(m?k:e)-i);n!=h&&(j.scrollTop=n)}var o=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft,p=f.scroller.clientWidth-kg;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return o+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>p+o-3&&(j.scrollLeft=d+10-p),j}function Pd(a,b,c){(null!=b||null!=c)&&Rd(a),null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b),null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Qd(a){Rd(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?mb(b.line,b.ch-1):b,d=mb(b.line,b.ch+1)),a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Rd(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=oc(a,b.from),d=oc(a,b.to),e=Od(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function Sd(a,b,c,d){var f,e=a.doc;null==c&&(c="add"),"smart"==c&&(a.doc.mode.indent?f=Ub(a,b):c="prev");var g=a.options.tabSize,h=zf(e,b),i=qg(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var k,j=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(k=a.doc.mode.indent(f,h.text.slice(j.length),h.text),k==lg)){if(!d)return;c="prev"}}else k=0,c="not";"prev"==c?k=b>e.first?qg(zf(e,b-1).text,null,g):0:"add"==c?k=i+a.options.indentUnit:"subtract"==c?k=i-a.options.indentUnit:"number"==typeof c&&(k=i+c),k=Math.max(0,k);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(k/g);n;--n)m+=g,l+="	";if(k>m&&(l+=tg(k-m)),l!=j)Kd(a.doc,l,mb(b,0),mb(b,j.length),"+input");else for(var n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];if(o.head.line==b&&o.head.ch<j.length){var m=mb(b,j.length);Db(e,n,new sb(m,m));break}}h.stateAfter=null}function Td(a,b,c,d){var e=b,f=b,g=a.doc;return"number"==typeof b?f=zf(g,vb(g,b)):e=Df(b),null==e?null:d(f,e)?(Fc(a,e,c),f):null}function Ud(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&nb(f.from,ug(d).to)<=0;){var g=d.pop();if(nb(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}yc(a,function(){for(var b=d.length-1;b>=0;b--)Kd(a.doc,"",d[b].from,d[b].to,"+delete");Qd(a)})}function Vd(a,b,c,d,e){function k(){var b=f+c;return b<a.first||b>=a.first+a.size?j=!1:(f=b,i=zf(a,b))}function l(a){var b=(e?gh:hh)(i,g,c,!0);if(null==b){if(a||!k())return j=!1;g=e?(0>c?_g:$g)(i):0>c?i.text.length:0}else g=b;return!0}var f=b.line,g=b.ch,h=c,i=zf(a,f),j=!0;if("char"==d)l();else if("column"==d)l(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=!0;!(0>c)||l(!o);o=!1){var p=i.text.charAt(g)||"\n",q=Cg(p)?"w":n&&"\n"==p?"n":!n||/\s/.test(p)?null:"p";if(!n||o||q||(q="s"),m&&m!=q){0>c&&(c=1,l());break}if(q&&(m=q),c>0&&!l(!o))break}var r=Mb(a,mb(f,g),h,!0);return j||(r.hitSide=!0),r}function Wd(a,b,c,d){var g,e=a.doc,f=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);g=b.top+c*(h-(0>c?1.5:.5)*tc(a.display))}else"line"==d&&(g=c>0?b.bottom+3:b.top-3);for(;;){var i=qc(a,f,g);if(!i.outside)break;if(0>c?0>=g:g>=e.height){i.hitSide=!0;break}g+=5*c}return i}function Xd(a,b){var c=zf(a,b.line).text,d=b.ch,e=b.ch;if(c){(b.xRel<0||e==c.length)&&d?--d:++e;for(var f=c.charAt(d),g=Cg(f)?Cg:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Cg(a)};d>0&&g(c.charAt(d-1));)--d;for(;e<c.length&&g(c.charAt(e));)++e}return new sb(mb(b.line,d),mb(b.line,e))}function $d(a,b,c,d){z.defaults[a]=b,c&&(Zd[a]=d?function(a,b,d){d!=_d&&c(a,b,d)}:c)}function je(a){return"string"==typeof a?ie[a]:a}function qe(a,b,c,d,e){if(d&&d.shared)return se(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return zc(a.cm,qe)(a,b,c,d,e);var f=new oe(a,e),g=nb(b,c);if(d&&zg(d,f,!1),g>0||0==g&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=Gg("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(Oe(a,b.line,b,c,f)||b.line!=c.line&&Oe(a,c.line,b,c,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");y=!0}f.addToHistory&&Lf(a,{from:b,to:c,origin:"markText"},a.sel,0/0);var j,h=b.line,i=a.cm;if(a.iter(h,c.line+1,function(a){i&&f.collapsed&&!i.options.lineWrapping&&Pe(a)==i.display.maxLine&&(j=!0),f.collapsed&&h!=b.line&&Cf(a,0),ze(a,new we(f,h==b.line?b.ch:null,h==c.line?c.ch:null)),++h}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Te(a,b)&&Cf(b,0)}),f.clearOnEnter&&ag(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(x=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed&&(f.id=++pe,f.atomic=!0),i){if(j&&(i.curOp.updateMaxLine=!0),f.collapsed)Ec(i,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle)for(var k=b.line;k<=c.line;k++)Fc(i,k,"text");f.atomic&&Kb(i.doc),fg(i,"markerAdded",i,f)}return f}function se(a,b,c,d,e){d=zg(d),d.shared=!1;var f=[qe(a,b,c,d,e)],g=f[0],h=d.widgetNode;return xf(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(qe(a,wb(a,b),wb(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=ug(f)}),new re(f,g)}function te(a){return a.findMarks(mb(a.first,0),a.clipPos(mb(a.lastLine())),function(a){return a.parent})}function ue(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(nb(f,g)){var h=qe(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function ve(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];xf(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==wg(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function we(a,b,c){this.marker=a,this.from=b,this.to=c}function xe(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function ye(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function ze(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Ae(a,b,c){if(a)for(var e,d=0;d<a.length;++d){var f=a[d],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(e||(e=[])).push(new we(g,f.from,i?null:f.to))}}return e}function Be(a,b,c){if(a)for(var e,d=0;d<a.length;++d){var f=a[d],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(e||(e=[])).push(new we(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return e}function Ce(a,b){var c=yb(a,b.from.line)&&zf(a,b.from.line).markedSpans,d=yb(a,b.to.line)&&zf(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==nb(b.from,b.to),h=Ae(c,e,g),i=Be(d,f,g),j=1==b.text.length,k=ug(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=xe(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=xe(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}h&&(h=De(h)),i&&i!=h&&(i=De(i));var o=[h];if(!j){var q,p=b.text.length-2;if(p>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(q||(q=[])).push(new we(h[l].marker,null,null));for(var l=0;p>l;++l)o.push(q);o.push(i)}return o}function De(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function Ee(a,b){var c=Rf(a,b),d=Ce(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Fe(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=wg(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(nb(j.to,h.from)<0||nb(j.from,h.to)>0)){var k=[i,1],l=nb(j.from,h.from),m=nb(j.to,h.to);(0>l||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(m>0||!g.inclusiveRight&&!m)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Ge(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function He(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Ie(a){return a.inclusiveLeft?-1:0
}function Je(a){return a.inclusiveRight?1:0}function Ke(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=nb(d.from,e.from)||Ie(a)-Ie(b);if(f)return-f;var g=nb(d.to,e.to)||Je(a)-Je(b);return g?g:b.id-a.id}function Le(a,b){var d,c=y&&a.markedSpans;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||Ke(d,e.marker)<0)&&(d=e.marker);return d}function Me(a){return Le(a,!0)}function Ne(a){return Le(a,!1)}function Oe(a,b,c,d,e){var f=zf(a,b),g=y&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=nb(j.from,c)||Ie(i.marker)-Ie(e),l=nb(j.to,d)||Je(i.marker)-Je(e);if(!(k>=0&&0>=l||0>=k&&l>=0)&&(0>=k&&(nb(j.to,c)||Je(i.marker)-Ie(e))>0||k>=0&&(nb(j.from,d)||Ie(i.marker)-Je(e))<0))return!0}}}function Pe(a){for(var b;b=Me(a);)a=b.find(-1,!0).line;return a}function Qe(a){for(var b,c;b=Ne(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function Re(a,b){var c=zf(a,b),d=Pe(c);return c==d?b:Df(d)}function Se(a,b){if(b>a.lastLine())return b;var d,c=zf(a,b);if(!Te(a,c))return b;for(;d=Ne(c);)c=d.find(1,!0).line;return Df(c)+1}function Te(a,b){var c=y&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Ue(a,b,d))return!0}}function Ue(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return Ue(a,d.line,xe(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&Ue(a,b,e))return!0}function We(a,b,c){Ff(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Pd(a,null,c)}function Xe(a){return null!=a.height?a.height:(Kg(document.body,a.node)||Jg(a.cm.display.measure,Gg("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Ye(a,b,c,d){var e=new Ve(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),Td(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Te(a.doc,b)){var d=Ff(b)<a.doc.scrollTop;Cf(b,b.height+Xe(e)),d&&Pd(a,null,e.height),a.curOp.forceUpdate=!0}return!0}),e}function $e(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Ge(a),He(a,c);var e=d?d(a):1;e!=a.height&&Cf(a,e)}function _e(a){a.parent=null,Ge(a)}function af(a,b,c,d,e,f){var g=c.flattenSpans;null==g&&(g=a.options.flattenSpans);var k,h=0,i=null,j=new ne(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();){if(j.pos>a.options.maxHighlightLength?(g=!1,f&&df(a,b,d,j.pos),j.pos=b.length,k=null):k=c.token(j,d),a.options.addModeClass){var l=z.innerMode(c,d).mode.name;l&&(k="m-"+(k?l+" "+k:l))}g&&i==k||(h<j.start&&e(j.start,i),h=j.start,i=k),j.start=j.pos}for(;h<j.pos;){var m=Math.min(j.pos,h+5e4);e(m,i),h=m}}function bf(a,b,c,d){var e=[a.state.modeGen];af(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},d);for(var f=0;f<a.state.overlays.length;++f){var g=a.state.overlays[f],h=1,i=0;af(a,b.text,g.mode,!0,function(a,b){for(var c=h;a>i;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d),h+=2,i=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,b),h=c+2;else for(;h>c;c+=2){var f=e[c+1];e[c+1]=f?f+" "+b:b}})}return e}function cf(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=bf(a,b,b.stateAfter=Ub(a,Df(b)))),b.styles}function df(a,b,c,d){var e=a.doc.mode,f=new ne(b,a.options.tabSize);for(f.start=f.pos=d||0,""==b&&e.blankLine&&e.blankLine(c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)e.token(f,c),f.start=f.pos}function gf(a,b){if(!a)return null;for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}if(/^\s*$/.test(a))return null;var e=b.cm.options.addModeClass?ff:ef;return e[a]||(e[a]=a.replace(/\S+/g,"cm-$&"))}function hf(a,b){var c=Gg("span",null,null,h?"padding-right: .1px":null),d={pre:Gg("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var i,f=e?b.rest[e-1]:b.line;d.pos=0,d.addToken=kf,(g||h)&&a.getOption("lineWrapping")&&(d.addToken=lf(d.addToken)),Sg(a.display.measure)&&(i=Gf(f))&&(d.addToken=mf(d.addToken,i)),d.map=[],of(f,d,cf(a,f)),0==d.map.length&&d.map.push(0,0,d.content.appendChild(Qg(a.display.measure))),0==e?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return cg(a,"renderLine",a,b.line,d.pre),d}function jf(a){var b=Gg("span","\u2022","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b}function kf(a,b,c,e,f,g){if(b){var h=a.cm.options.specialChars,i=!1;if(h.test(b))for(var j=document.createDocumentFragment(),k=0;;){h.lastIndex=k;var l=h.exec(b),m=l?l.index-k:b.length-k;if(m){var n=document.createTextNode(b.slice(k,k+m));d?j.appendChild(Gg("span",[n])):j.appendChild(n),a.map.push(a.pos,a.pos+m,n),a.col+=m,a.pos+=m}if(!l)break;if(k+=m+1,"	"==l[0]){var o=a.cm.options.tabSize,p=o-a.col%o,n=j.appendChild(Gg("span",tg(p),"cm-tab"));a.col+=p}else{var n=a.cm.options.specialCharPlaceholder(l[0]);d?j.appendChild(Gg("span",[n])):j.appendChild(n),a.col+=1}a.map.push(a.pos,a.pos+1,n),a.pos++}else{a.col+=b.length;var j=document.createTextNode(b);a.map.push(a.pos,a.pos+b.length,j),d&&(i=!0),a.pos+=b.length}if(c||e||f||i){var q=c||"";e&&(q+=e),f&&(q+=f);var r=Gg("span",[j],q);return g&&(r.title=g),a.content.appendChild(r)}a.content.appendChild(j)}}function lf(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\xa0";return b+=" "}return function(c,d,e,f,g,h){a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function mf(a,b){return function(c,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";for(var i=c.pos,j=i+d.length;;){for(var k=0;k<b.length;k++){var l=b[k];if(l.to>i&&l.from<=i)break}if(l.to>=j)return a(c,d,e,f,g,h);a(c,d.slice(0,l.to-i),e,f,null,h),f=null,d=d.slice(l.to-i),i=l.to}}}function nf(a,b,c,d){var e=!d&&c.widgetNode;e&&(a.map.push(a.pos,a.pos+b,e),a.content.appendChild(e)),a.pos+=b}function of(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var k,m,n,o,p,q,h=e.length,i=0,g=1,j="",l=0;;){if(l==i){m=n=o=p="",q=null,l=1/0;for(var r=[],s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=i&&(null==t.to||t.to>i)?(null!=t.to&&l>t.to&&(l=t.to,n=""),u.className&&(m+=" "+u.className),u.startStyle&&t.from==i&&(o+=" "+u.startStyle),u.endStyle&&t.to==l&&(n+=" "+u.endStyle),u.title&&!p&&(p=u.title),u.collapsed&&(!q||Ke(q.marker,u)<0)&&(q=t)):t.from>i&&l>t.from&&(l=t.from),"bookmark"==u.type&&t.from==i&&u.widgetNode&&r.push(u)}if(q&&(q.from||0)==i&&(nf(b,(null==q.to?h+1:q.to)-i,q.marker,null==q.from),null==q.to))return;if(!q&&r.length)for(var s=0;s<r.length;++s)nf(b,0,r[s])}if(i>=h)break;for(var v=Math.min(h,l);;){if(j){var w=i+j.length;if(!q){var x=w>v?j.slice(0,v-i):j;b.addToken(b,x,k?k+m:m,o,i+x.length==l?n:"",p)}if(w>=v){j=j.slice(v-i),i=v;break}i=w,o=""}j=e.slice(f,f=c[g++]),k=gf(c[g++],b)}}else for(var g=1;g<c.length;g+=2)b.addToken(b,e.slice(f,f=c[g]),gf(c[g+1],b))}function pf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==ug(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function qf(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){$e(a,c,e,d),fg(a,"change",a,b)}var g=b.from,h=b.to,i=b.text,j=zf(a,g.line),k=zf(a,h.line),l=ug(i),m=e(i.length-1),n=h.line-g.line;if(pf(a,b)){for(var o=0,p=[];o<i.length-1;++o)p.push(new Ze(i[o],e(o),d));f(k,k.text,m),n&&a.remove(g.line,n),p.length&&a.insert(g.line,p)}else if(j==k)if(1==i.length)f(j,j.text.slice(0,g.ch)+l+j.text.slice(h.ch),m);else{for(var p=[],o=1;o<i.length-1;++o)p.push(new Ze(i[o],e(o),d));p.push(new Ze(l+j.text.slice(h.ch),m,d)),f(j,j.text.slice(0,g.ch)+i[0],e(0)),a.insert(g.line+1,p)}else if(1==i.length)f(j,j.text.slice(0,g.ch)+i[0]+k.text.slice(h.ch),e(0)),a.remove(g.line+1,n);else{f(j,j.text.slice(0,g.ch)+i[0],e(0)),f(k,l+k.text.slice(h.ch),m);for(var o=1,p=[];o<i.length-1;++o)p.push(new Ze(i[o],e(o),d));n>1&&a.remove(g.line+1,n-1),a.insert(g.line+1,p)}fg(a,"change",a,b)}function rf(a){this.lines=a,this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function sf(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}function xf(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function yf(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,F(a),B(a),a.options.lineWrapping||L(a),a.options.mode=b.modeOption,Ec(a)}function zf(a,b){if(b-=a.first,0>b||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(f>b){c=e;break}b-=f}return c.lines[b]}function Af(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function Bf(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function Cf(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function Df(a){if(null==a.parent)return null;for(var b=a.parent,c=wg(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function Ef(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(f>b){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var d=0;d<a.lines.length;++d){var g=a.lines[d],h=g.height;if(h>b)break;b-=h}return c+d}function Ff(a){a=Pe(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var d=0;d<f.children.length;++d){var g=f.children[d];if(g==c)break;b+=g.height}return b}function Gf(a){var b=a.order;return null==b&&(b=a.order=ih(a.text)),b}function Hf(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function If(a,b){var c={from:ob(b.from),to:yd(b),text:Af(a,b.from,b.to)};return Pf(a,c,b.from.line,b.to.line+1),xf(a,function(a){Pf(a,c,b.from.line,b.to.line+1)},!0),c}function Jf(a){for(;a.length;){var b=ug(a);if(!b.ranges)break;a.pop()}}function Kf(a,b){return b?(Jf(a.done),ug(a.done)):a.done.length&&!ug(a.done).ranges?ug(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),ug(a.done)):void 0}function Lf(a,b,c,d){var e=a.history;e.undone.length=0;var g,f=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(g=Kf(e,e.lastOp==d))){var h=ug(g.changes);0==nb(b.from,b.to)&&0==nb(b.from,h.to)?h.to=yd(b):g.changes.push(If(a,b))}else{var i=ug(e.done);for(i&&i.ranges||Of(a.sel,e.done),g={changes:[If(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=f,e.lastOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,h||cg(a,"historyAdded")}function Mf(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function Nf(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||Mf(a,f,ug(e.done),b))?e.done[e.done.length-1]=b:Of(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastOp=c,d&&d.clearRedo!==!1&&Jf(e.undone)}function Of(a,b){var c=ug(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Pf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function Qf(a){if(!a)return null;for(var c,b=0;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Rf(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(Qf(c[d]));return e}function Sf(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?rb.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];e.push({changes:h});for(var i=0;i<g.length;++i){var k,j=g[i];if(h.push({from:j.from,to:j.to,text:j.text}),b)for(var l in j)(k=l.match(/^spans_(\d+)$/))&&wg(b,Number(k[1]))>-1&&(ug(h)[l]=j[l],delete j[l])}}}return e}function Tf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Uf(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Tf(f.ranges[h].anchor,b,c,d),Tf(f.ranges[h].head,b,c,d)}else{for(var h=0;h<f.changes.length;++h){var i=f.changes[h];if(c<i.from.line)i.from=mb(i.from.line+d,i.from.ch),i.to=mb(i.to.line+d,i.to.ch);else if(b<=i.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Vf(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Uf(a.done,c,d,e),Uf(a.undone,c,d,e)}function Yf(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function $f(a){return a.target||a.srcElement}function _f(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),s&&a.ctrlKey&&1==b&&(b=3),b}function fg(a,b){function e(a){return function(){a.apply(null,d)}}var c=a._handlers&&a._handlers[b];if(c){var d=Array.prototype.slice.call(arguments,2);dg||(++eg,dg=[],setTimeout(gg,0));for(var f=0;f<c.length;++f)dg.push(e(c[f]))}}function gg(){--eg;var a=dg;dg=null;for(var b=0;b<a.length;++b)a[b]()}function hg(a,b,c){return cg(a,c||b.type,a,b),Yf(b)||b.codemirrorIgnore}function ig(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function jg(a){a.prototype.on=function(a,b){ag(this,a,b)},a.prototype.off=function(a,b){bg(this,a,b)}}function pg(){this.id=null}function rg(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function tg(a){for(;sg.length<=a;)sg.push(ug(sg)+" ");return sg[a]}function ug(a){return a[a.length-1]}function wg(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function xg(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function yg(a,b){var c;if(Object.create)c=Object.create(a);else{var d=function(){};d.prototype=a,c=new d}return b&&zg(b,c),c}function zg(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Ag(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Dg(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Fg(a){return a.charCodeAt(0)>=768&&Eg.test(a)}function Gg(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function Ig(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function Jg(a,b){return Ig(a).appendChild(b)}function Kg(a,b){if(a.contains)return a.contains(b);for(;b=b.parentNode;)if(b==a)return!0}function Lg(){return document.activeElement}function Og(a){if(null!=Ng)return Ng;var b=Gg("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Jg(a,b),b.offsetWidth&&(Ng=b.offsetHeight-b.clientHeight),Ng||0}function Qg(a){if(null==Pg){var b=Gg("span","\u200b");Jg(a,Gg("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Pg=b.offsetWidth<=1&&b.offsetHeight>2&&!c)}return Pg?Gg("span","\u200b"):Gg("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Sg(a){if(null!=Rg)return Rg;var b=Jg(a,document.createTextNode("A\u062eA")),c=Hg(b,0,1).getBoundingClientRect();if(c.left==c.right)return!1;var d=Hg(b,1,2).getBoundingClientRect();return Rg=d.right-c.right<3}function Xg(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function Yg(a){return a.level%2?a.to:a.from}function Zg(a){return a.level%2?a.from:a.to}function $g(a){var b=Gf(a);return b?Yg(b[0]):0}function _g(a){var b=Gf(a);return b?Zg(ug(b)):a.text.length}function ah(a,b){var c=zf(a.doc,b),d=Pe(c);d!=c&&(b=Df(d));var e=Gf(d),f=e?e[0].level%2?_g(d):$g(d):0;return mb(b,f)}function bh(a,b){for(var c,d=zf(a.doc,b);c=Ne(d);)d=c.find(1,!0).line,b=null;var e=Gf(d),f=e?e[0].level%2?$g(d):_g(d):d.text.length;return mb(null==b?Df(d):b,f)}function ch(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function eh(a,b){dh=null;for(var d,c=0;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b){if(null!=d)return ch(a,e.level,a[d].level)?(e.from!=e.to&&(dh=d),c):(e.from!=e.to&&(dh=c),d);d=c}}return d}function fh(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&Fg(a.text.charAt(b)));return b}function gh(a,b,c,d){var e=Gf(a);if(!e)return hh(a,b,c,d);for(var f=eh(e,b),g=e[f],h=fh(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return eh(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?fh(a,g.to,-1,d):fh(a,g.from,1,d)}}function hh(a,b,c,d){var e=b+c;if(d)for(;e>0&&Fg(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var a=/gecko\/\d/i.test(navigator.userAgent),b=/MSIE \d/.test(navigator.userAgent),c=b&&(null==document.documentMode||document.documentMode<8),d=b&&(null==document.documentMode||document.documentMode<9),e=b&&(null==document.documentMode||document.documentMode<10),f=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),g=b||f,h=/WebKit\//.test(navigator.userAgent),i=h&&/Qt\/\d+\.\d+/.test(navigator.userAgent),j=/Chrome\//.test(navigator.userAgent),k=/Opera\//.test(navigator.userAgent),l=/Apple Computer/.test(navigator.vendor),m=/KHTML\//.test(navigator.userAgent),n=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),o=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),p=/PhantomJS/.test(navigator.userAgent),q=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r=q||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),s=q||/Mac/.test(navigator.platform),t=/win/i.test(navigator.platform),u=k&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);u&&(u=Number(u[1])),u&&u>=15&&(k=!1,h=!0);var v=s&&(i||k&&(null==u||12.11>u)),w=a||g&&!d,x=!1,y=!1,mb=z.Pos=function(a,b){return this instanceof mb?(this.line=a,this.ch=b,void 0):new mb(a,b)},nb=z.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};rb.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=nb(c.anchor,d.anchor)||0!=nb(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new sb(ob(this.ranges[b].anchor),ob(this.ranges[b].head));return new rb(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(nb(b,d.from())>=0&&nb(a,d.to())<=0)return c}return-1}},sb.prototype={from:function(){return qb(this.anchor,this.head)},to:function(){return pb(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var sc,Wc,Xc,dc={left:0,right:0,top:0,bottom:0},vc=0,bd=0,gd=0,hd=null;g?hd=-.53:a?hd=15:j?hd=-.7:l&&(hd=-1/3);var ld,vd,od=null,yd=z.changeEnd=function(a){return a.text?mb(a.from.line+a.text.length-1,ug(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};z.prototype={constructor:z,focus:function(){window.focus(),Pc(this),Mc(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,Zd.hasOwnProperty(a)&&zc(this,Zd[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:Ac(function(a,b){var c=a.token?a:z.getMode(this.options,a);if(c.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque}),this.state.modeGen++,Ec(this)}),removeOverlay:Ac(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,Ec(this),void 0}}),indentLine:Ac(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),yb(this.doc,a)&&Sd(this,a,b,c)}),indentSelection:Ac(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Sd(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Qd(this));else{var f=Math.max(c,e.from().line),g=e.to();c=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var h=f;c>h;++h)Sd(this,h,a)}}}),getTokenAt:function(a,b){var c=this.doc;a=wb(c,a);for(var d=Ub(this,a.line,b),e=this.doc.mode,f=zf(c,a.line),g=new ne(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=e.token(g,d)}return{start:g.start,end:g.pos,string:g.current(),type:h||null,state:d}},getTokenTypeAt:function(a){a=wb(this.doc,a);var b=cf(this,zf(this.doc,a.line)),c=0,d=(b.length-1)/2,e=a.ch;if(0==e)return b[2];for(;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=e)d=f;else{if(!(b[2*f+1]<e))return b[2*f+2];c=f+1}}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?z.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!ee.hasOwnProperty(b))return ee;var d=ee[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(var f=0;f<d._global.length;f++){var h=d._global[f];h.pred(e,this)&&-1==wg(c,h.val)&&c.push(h.val)}return c},getStateAfter:function(a,b){var c=this.doc;return a=vb(c,null==a?c.first+c.size-1:a),Ub(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?wb(this.doc,a):a?d.from():d.to(),nc(this,c,b||"page")},charCoords:function(a,b){return mc(this,wb(this.doc,a),b||"page")},coordsChar:function(a,b){return a=lc(this,a,b||"page"),qc(this,a.left,a.top)},lineAtHeight:function(a,b){return a=lc(this,{top:a,left:0},b||"page").top,Ef(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=zf(this.doc,a);return kc(this,e,{top:0,left:0},b||"page").top+(c?this.doc.height-Ff(e):0)},defaultTextHeight:function(){return tc(this.display)},defaultCharWidth:function(){return uc(this.display)},setGutterMarker:Ac(function(a,b,c){return Td(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Dg(d)&&(a.gutterMarkers=null),!0})}),clearGutter:Ac(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Fc(b,d,"gutter"),Dg(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:Ac(function(a,b,c){return Td(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Ac(function(a,b,c){return Td(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:Ac(function(a,b,c){return Ye(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!yb(this.doc,a))return null;var b=a;if(a=zf(this.doc,a),!a)return null}else{var b=Df(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=nc(this,wb(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Nd(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:Ac(pd),triggerOnKeyPress:Ac(sd),triggerOnKeyUp:Ac(rd),execCommand:function(a){return he.hasOwnProperty(a)?he[a](this):void 0},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=wb(this.doc,a);b>f&&(g=Vd(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:Ac(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Vd(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},og)}),deleteH:Ac(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):Ud(this,function(c){var e=Vd(d,c.head,a,b,!1);return 0>a?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=wb(this.doc,a);b>g;++g){var i=nc(this,h,"div");if(null==f?f=i.left:i.left=f,h=Wd(this,i,e,c),h.hitSide)break}return h},moveV:Ac(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=nc(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=Wd(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Pd(c,null,mc(c,i,"div").top-h.top),i},og),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursorDiv.className+=" CodeMirror-overwrite":this.display.cursorDiv.className=this.display.cursorDiv.className.replace(" CodeMirror-overwrite",""),cg(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Lg()==this.display.input},scrollTo:Ac(function(a,b){(null!=a||null!=b)&&Rd(this),null!=a&&(this.curOp.scrollLeft=a),null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=kg;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:Ac(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:mb(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)Rd(this),this.curOp.scrollToPos=a;else{var c=Od(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:Ac(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&gc(this),this.curOp.forceUpdate=!0,cg(this,"refresh",this)}),operation:function(a){return yc(this,a)},refresh:Ac(function(){var a=this.display.cachedTextHeight;Ec(this),hc(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),(null==a||Math.abs(a-tc(this.display))>.5)&&F(this),cg(this,"refresh",this)}),swapDoc:Ac(function(a){var b=this.doc;return b.cm=null,yf(this,a),hc(this),Oc(this),this.scrollTo(a.scrollLeft,a.scrollTop),fg(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},jg(z);var Yd=z.defaults={},Zd=z.optionHandlers={},_d=z.Init={toString:function(){return"CodeMirror.Init"}};$d("value","",function(a,b){a.setValue(b)},!0),$d("mode",null,function(a,b){a.doc.modeOption=b,B(a)},!0),$d("indentUnit",2,B,!0),$d("indentWithTabs",!1),$d("smartIndent",!0),$d("tabSize",4,function(a){C(a),hc(a),Ec(a)},!0),$d("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),a.refresh()},!0),$d("specialCharPlaceholder",jf,function(a){a.refresh()},!0),$d("electricChars",!0),$d("rtlMoveVisually",!t),$d("wholeLineUpdateBefore",!0),$d("theme","default",function(a){H(a),I(a)},!0),$d("keyMap","default",G),$d("extraKeys",null),$d("lineWrapping",!1,D,!0),$d("gutters",[],function(a){M(a.options),I(a)},!0),$d("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?T(a.display)+"px":"0",a.refresh()},!0),$d("coverGutterNextToScrollbar",!1,O,!0),$d("lineNumbers",!1,function(a){M(a.options),I(a)},!0),$d("firstLineNumber",1,I,!0),$d("lineNumberFormatter",function(a){return a},I,!0),$d("showCursorWhenSelecting",!1,Nb,!0),$d("resetSelectionOnContextMenu",!0),$d("readOnly",!1,function(a,b){"nocursor"==b?(ud(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||Oc(a))}),$d("disableInput",!1,function(a,b){b||Oc(a)},!0),$d("dragDrop",!0),$d("cursorBlinkRate",530),$d("cursorScrollMargin",0),$d("cursorHeight",1),$d("workTime",100),$d("workDelay",100),$d("flattenSpans",!0,C,!0),$d("addModeClass",!1,C,!0),$d("pollInterval",100),$d("undoDepth",200,function(a,b){a.doc.history.undoDepth=b}),$d("historyEventDelay",1250),$d("viewportMargin",10,function(a){a.refresh()},!0),$d("maxHighlightLength",1e4,C,!0),$d("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),$d("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),$d("autofocus",null);var ae=z.modes={},be=z.mimeModes={};z.defineMode=function(a,b){if(z.defaults.mode||"null"==a||(z.defaults.mode=a),arguments.length>2){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}ae[a]=b},z.defineMIME=function(a,b){be[a]=b},z.resolveMode=function(a){if("string"==typeof a&&be.hasOwnProperty(a))a=be[a];else if(a&&"string"==typeof a.name&&be.hasOwnProperty(a.name)){var b=be[a.name];"string"==typeof b&&(b={name:b}),a=yg(b,a),a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return z.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}
},z.getMode=function(a,b){var b=z.resolveMode(b),c=ae[b.name];if(!c)return z.getMode(a,"text/plain");var d=c(a,b);if(ce.hasOwnProperty(b.name)){var e=ce[b.name];for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}if(d.name=b.name,b.helperType&&(d.helperType=b.helperType),b.modeProps)for(var f in b.modeProps)d[f]=b.modeProps[f];return d},z.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),z.defineMIME("text/plain","null");var ce=z.modeExtensions={};z.extendMode=function(a,b){var c=ce.hasOwnProperty(a)?ce[a]:ce[a]={};zg(b,c)},z.defineExtension=function(a,b){z.prototype[a]=b},z.defineDocExtension=function(a,b){uf.prototype[a]=b},z.defineOption=$d;var de=[];z.defineInitHook=function(a){de.push(a)};var ee=z.helpers={};z.registerHelper=function(a,b,c){ee.hasOwnProperty(a)||(ee[a]=z[a]={_global:[]}),ee[a][b]=c},z.registerGlobalHelper=function(a,b,c,d){z.registerHelper(a,b,d),ee[a]._global.push({pred:c,val:d})};var fe=z.copyState=function(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c},ge=z.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};z.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var he=z.commands={selectAll:function(a){a.setSelection(mb(a.firstLine(),0),mb(a.lastLine()),mg)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),mg)},killLine:function(a){Ud(a,function(b){if(b.empty()){var c=zf(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:mb(b.head.line+1,0)}:{from:b.head,to:mb(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Ud(a,function(b){return{from:mb(b.from().line,0),to:wb(a.doc,mb(b.to().line+1,0))}})},delLineLeft:function(a){Ud(a,function(a){return{from:mb(a.from().line,0),to:a.from()}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(mb(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(mb(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return ah(a,b.head.line)},og)},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){var c=ah(a,b.head.line),d=a.getLineHandle(c.line),e=Gf(d);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.head.line==c.line&&b.head.ch<=f&&b.head.ch;return mb(c.line,g?0:f)}return c},og)},goLineEnd:function(a){a.extendSelectionsBy(function(b){return bh(a,b.head.line)},og)},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},og)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},og)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=qg(a.getLine(f.line),f.ch,d);b.push(new Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){yc(a,function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c].head,e=zf(a.doc,d.line).text;d.ch>0&&d.ch<e.length-1&&a.replaceRange(e.charAt(d.ch)+e.charAt(d.ch-1),mb(d.line,d.ch-1),mb(d.line,d.ch+1))}})},newlineAndIndent:function(a){yc(a,function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0),Qd(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},ie=z.keyMap={};ie.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ie.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ie.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},ie.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},ie["default"]=s?ie.macDefault:ie.pcDefault;var ke=z.lookupKey=function(a,b,c){function d(b){b=je(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0;g<f.length;++g){var h=d(f[g]);if(h)return h}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},le=z.isModifierKey=function(a){var b=Wg[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b},me=z.keyName=function(a,b){if(k&&34==a.keyCode&&a["char"])return!1;var c=Wg[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(v?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(v?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)};z.fromTextArea=function(a,b){function d(){a.value=i.getValue()}if(b||(b={}),b.value=a.value,!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var c=Lg();b.autofocus=c==a||null!=a.getAttribute("autofocus")&&c==document.body}if(a.form&&(ag(a.form,"submit",d),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){d(),e.submit=f,e.submit(),e.submit=g}}catch(h){}}a.style.display="none";var i=z(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);return i.save=d,i.getTextArea=function(){return a},i.toTextArea=function(){d(),a.parentNode.removeChild(i.getWrapperElement()),a.style.display="",a.form&&(bg(a.form,"submit",d),"function"==typeof a.form.submit&&(a.form.submit=f))},i};var ne=z.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ne.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=qg(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?qg(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return qg(this.string,null,this.tabSize)-(this.lineStart?qg(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a){var f=this.string.slice(this.pos).match(a);return f&&f.index>0?null:(f&&b!==!1&&(this.pos+=f[0].length),f)}var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);return d(e)==d(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var oe=z.TextMarker=function(a,b){this.lines=[],this.type=b,this.doc=a};jg(oe),oe.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&wc(a),ig(this,"clear")){var c=this.find();c&&fg(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=xe(g.markedSpans,this);a&&!this.collapsed?Fc(a,Df(g),"text"):a&&(null!=h.to&&(e=Df(g)),null!=h.from&&(d=Df(g))),g.markedSpans=ye(g.markedSpans,h),null==h.from&&this.collapsed&&!Te(this.doc,g)&&a&&Cf(g,tc(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Pe(this.lines[f]),j=K(i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&Ec(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Kb(a.doc)),a&&fg(a,"markerCleared",a,this),b&&xc(a),this.parent&&this.parent.clear()}},oe.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=xe(f.markedSpans,this);if(null!=g.from&&(c=mb(b?f:Df(f),g.from),-1==a))return c;if(null!=g.to&&(d=mb(b?f:Df(f),g.to),1==a))return d}return c&&{from:c,to:d}},oe.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&yc(c,function(){var d=a.line,e=Df(a.line),f=ac(c,e);if(f&&(fc(f),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Te(b.doc,d)&&null!=b.height){var g=b.height;b.height=null;var h=Xe(b)-g;h&&Cf(d,d.height+h)}})},oe.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=wg(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},oe.prototype.detachLine=function(a){if(this.lines.splice(wg(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var pe=0,re=z.SharedTextMarker=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};jg(re),re.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();fg(this,"clear")}},re.prototype.find=function(a,b){return this.primary.find(a,b)};var Ve=z.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};jg(Ve),Ve.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=Df(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Xe(this);yc(a,function(){We(a,c,-f),Fc(a,d,"widget"),Cf(c,Math.max(0,c.height-f))})}},Ve.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=Xe(this)-a;d&&yc(b,function(){b.curOp.forceUpdate=!0,We(b,c,d),Cf(c,c.height+d)})};var Ze=z.Line=function(a,b,c){this.text=a,He(this,b),this.height=c?c(this):1};jg(Ze),Ze.prototype.lineNo=function(){return Df(this)};var ef={},ff={};rf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,_e(e),fg(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},sf.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof rf))){var h=[];this.collapse(h),this.children=[new rf(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>=a){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(;e.lines.length>50;){var g=e.lines.splice(e.lines.length-25,25),h=new rf(g);e.height-=h.height,this.children.splice(d+1,0,h),h.parent=this}this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new sf(b);if(a.parent){a.size-=c.size,a.height-=c.height;var e=wg(a.parent.children,a);a.parent.children.splice(e+1,0,c)}else{var d=new sf(a.children);d.parent=a,a.children=[d,c],a=d}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var tf=0,uf=z.Doc=function(a,b,c){if(!(this instanceof uf))return new uf(a,b,c);null==c&&(c=0),sf.call(this,[new rf([new Ze("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var d=mb(c,0);this.sel=ub(d),this.history=new Hf(null),this.id=++tf,this.modeOption=b,"string"==typeof a&&(a=Tg(a)),qf(this,{from:d,to:d,text:a}),Hb(this,ub(d),mg)};uf.prototype=yg(sf.prototype,{constructor:uf,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Bf(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:Bc(function(a){var b=mb(this.first,0),c=this.first+this.size-1;Ed(this,{from:b,to:mb(c,zf(this,c).text.length),text:Tg(a),origin:"setValue"},!0),Hb(this,ub(b))}),replaceRange:function(a,b,c,d){b=wb(this,b),c=c?wb(this,c):b,Kd(this,a,b,c,d)},getRange:function(a,b,c){var d=Af(this,wb(this,a),wb(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){return yb(this,a)?zf(this,a):void 0},getLineNumber:function(a){return Df(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=zf(this,a)),Pe(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return wb(this,a)},getCursor:function(a){var c,b=this.sel.primary();return c=null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||a===!1?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bc(function(a,b,c){Eb(this,wb(this,"number"==typeof a?mb(a,b||0):a),null,c)}),setSelection:Bc(function(a,b,c){Eb(this,wb(this,a),wb(this,b||a),c)}),extendSelection:Bc(function(a,b,c){Bb(this,wb(this,a),b&&wb(this,b),c)}),extendSelections:Bc(function(a,b){Cb(this,zb(this,a,b))}),extendSelectionsBy:Bc(function(a,b){Cb(this,xg(this.sel.ranges,a),b)}),setSelections:Bc(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new sb(wb(this,a[d].anchor),wb(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),Hb(this,tb(e,b),c)}}),addSelection:Bc(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new sb(wb(this,a),wb(this,b||a))),Hb(this,tb(d,d.length-1),c)}),getSelection:function(a){for(var c,b=this.sel.ranges,d=0;d<b.length;d++){var e=Af(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return a===!1?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Af(this,c[d].from(),c[d].to());a!==!1&&(e=e.join(a||"\n")),b[d]=e}return b},replaceSelection:Bc(function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")}),replaceSelections:function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:Tg(a[f]),origin:c}}for(var h=b&&"end"!=b&&Cd(this,d,b),f=d.length-1;f>=0;f--)Ed(this,d[f]);h?Gb(this,h):this.cm&&Qd(this.cm)},undo:Bc(function(){Gd(this,"undo")}),redo:Bc(function(){Gd(this,"redo")}),undoSelection:Bc(function(){Gd(this,"undo",!0)}),redoSelection:Bc(function(){Gd(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Hf(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Sf(this.history.done),undone:Sf(this.history.undone)}},setHistory:function(a){var b=this.history=new Hf(this.history.maxGeneration);b.done=Sf(a.done.slice(0),null,!0),b.undone=Sf(a.undone.slice(0),null,!0)},markText:function(a,b,c){return qe(this,wb(this,a),wb(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};return a=wb(this,a),qe(this,a,a,c,"bookmark")},findMarksAt:function(a){a=wb(this,a);var b=[],c=zf(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=wb(this,a),b=wb(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];e==a.line&&a.ch>i.to||null==i.from&&e!=a.line||e==b.line&&i.from>b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,++c,void 0)}),wb(this,mb(c,b))},indexFromPos:function(a){a=wb(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new uf(Bf(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new uf(Bf(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],ue(d,te(this)),d},unlinkDoc:function(a){if(a instanceof z&&(a=a.doc),this.linked)for(var b=0;b<this.linked.length;++b){var c=this.linked[b];if(c.doc==a){this.linked.splice(b,1),a.unlinkDoc(this),ve(te(this));break}}if(a.history==this.history){var d=[a.id];xf(a,function(a){d.push(a.id)},!0),a.history=new Hf(null),a.history.done=Sf(this.history.done,d),a.history.undone=Sf(this.history.undone,d)}},iterLinkedDocs:function(a){xf(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),uf.prototype.eachLine=uf.prototype.iter;var vf="iter insert remove copy getEditor".split(" ");for(var wf in uf.prototype)uf.prototype.hasOwnProperty(wf)&&wg(vf,wf)<0&&(z.prototype[wf]=function(a){return function(){return a.apply(this.doc,arguments)}}(uf.prototype[wf]));jg(uf);var dg,Wf=z.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Xf=z.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Zf=z.e_stop=function(a){Wf(a),Xf(a)},ag=z.on=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}},bg=z.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}},cg=z.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},eg=0,kg=30,lg=z.Pass={toString:function(){return"CodeMirror.Pass"}},mg={scroll:!1},ng={origin:"*mouse"},og={origin:"+move"};pg.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var qg=z.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(0>h||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}},sg=[""],vg=function(a){a.select()};q?vg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:g&&(vg=function(a){try{a.select()}catch(b){}}),[].indexOf&&(wg=function(a,b){return a.indexOf(b)}),[].map&&(xg=function(a,b){return a.map(b)});var Hg,Bg=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Cg=z.isWordChar=function(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||Bg.test(a))},Eg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Hg=document.createRange?function(a,b,c){var d=document.createRange();return d.setEnd(a,c),d.setStart(a,b),d}:function(a,b,c){var d=document.body.createTextRange();return d.moveToElementText(a.parentNode),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d},b&&(Lg=function(){try{return document.activeElement}catch(a){return document.body}});var Ng,Pg,Rg,Mg=function(){if(d)return!1;var a=Gg("div");return"draggable"in a||"dragDrop"in a}(),Tg=z.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Ug=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Vg=function(){var a=Gg("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Wg={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};z.keyNames=Wg,function(){for(var a=0;10>a;a++)Wg[a+48]=Wg[a+96]=String(a);for(var a=65;90>=a;a++)Wg[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Wg[a+111]=Wg[a+63235]="F"+a}();var dh,ih=function(){function c(c){return 247>=c?a.charAt(c):c>=1424&&1524>=c?"R":c>=1536&&1773>=c?b.charAt(c-1536):c>=1774&&2220>=c?"r":c>=8192&&8203>=c?"w":8204==c?"b":"L"}function j(a,b,c){this.level=a,this.from=b,this.to=c}var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",b="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(a){if(!d.test(a))return!1;for(var m,b=a.length,k=[],l=0;b>l;++l)k.push(m=c(a.charCodeAt(l)));for(var l=0,n=i;b>l;++l){var m=k[l];"m"==m?k[l]=n:n=m}for(var l=0,o=i;b>l;++l){var m=k[l];"1"==m&&"r"==o?k[l]="n":f.test(m)&&(o=m,"r"==m&&(k[l]="R"))}for(var l=1,n=k[0];b-1>l;++l){var m=k[l];"+"==m&&"1"==n&&"1"==k[l+1]?k[l]="1":","!=m||n!=k[l+1]||"1"!=n&&"n"!=n||(k[l]=n),n=m}for(var l=0;b>l;++l){var m=k[l];if(","==m)k[l]="N";else if("%"==m){for(var p=l+1;b>p&&"%"==k[p];++p);for(var q=l&&"!"==k[l-1]||b>p&&"1"==k[p]?"1":"N",r=l;p>r;++r)k[r]=q;l=p-1}}for(var l=0,o=i;b>l;++l){var m=k[l];"L"==o&&"1"==m?k[l]="L":f.test(m)&&(o=m)}for(var l=0;b>l;++l)if(e.test(k[l])){for(var p=l+1;b>p&&e.test(k[p]);++p);for(var s="L"==(l?k[l-1]:i),t="L"==(b>p?k[p]:i),q=s||t?"L":"R",r=l;p>r;++r)k[r]=q;l=p-1}for(var v,u=[],l=0;b>l;)if(g.test(k[l])){var w=l;for(++l;b>l&&g.test(k[l]);++l);u.push(new j(0,w,l))}else{var x=l,y=u.length;for(++l;b>l&&"L"!=k[l];++l);for(var r=x;l>r;)if(h.test(k[r])){r>x&&u.splice(y,0,new j(1,x,r));var z=r;for(++r;l>r&&h.test(k[r]);++r);u.splice(y,0,new j(2,z,r)),x=r}else++r;l>x&&u.splice(y,0,new j(1,x,l))}return 1==u[0].level&&(v=a.match(/^\s+/))&&(u[0].from=v[0].length,u.unshift(new j(0,0,v[0].length))),1==ug(u).level&&(v=a.match(/\s+$/))&&(ug(u).to-=v[0].length,u.push(new j(0,b-v[0].length,b))),u[0].level!=ug(u).level&&u.push(new j(u[0].level,b,b)),u}}();return z.version="4.0.4",z}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("apl",function(){var a={".":"innerProduct","\\":"scan","/":"reduce","\u233f":"reduce1Axis","\u2340":"scan1Axis","\xa8":"each","\u2363":"power"},b={"+":["conjugate","add"],"\u2212":["negate","subtract"],"\xd7":["signOf","multiply"],"\xf7":["reciprocal","divide"],"\u2308":["ceiling","greaterOf"],"\u230a":["floor","lesserOf"],"\u2223":["absolute","residue"],"\u2373":["indexGenerate","indexOf"],"?":["roll","deal"],"\u22c6":["exponentiate","toThePowerOf"],"\u235f":["naturalLog","logToTheBase"],"\u25cb":["piTimes","circularFuncs"],"!":["factorial","binomial"],"\u2339":["matrixInverse","matrixDivide"],"<":[null,"lessThan"],"\u2264":[null,"lessThanOrEqual"],"=":[null,"equals"],">":[null,"greaterThan"],"\u2265":[null,"greaterThanOrEqual"],"\u2260":[null,"notEqual"],"\u2261":["depth","match"],"\u2262":[null,"notMatch"],"\u2208":["enlist","membership"],"\u2377":[null,"find"],"\u222a":["unique","union"],"\u2229":[null,"intersection"],"\u223c":["not","without"],"\u2228":[null,"or"],"\u2227":[null,"and"],"\u2371":[null,"nor"],"\u2372":[null,"nand"],"\u2374":["shapeOf","reshape"],",":["ravel","catenate"],"\u236a":[null,"firstAxisCatenate"],"\u233d":["reverse","rotate"],"\u2296":["axis1Reverse","axis1Rotate"],"\u2349":["transpose",null],"\u2191":["first","take"],"\u2193":[null,"drop"],"\u2282":["enclose","partitionWithAxis"],"\u2283":["diclose","pick"],"\u2337":[null,"index"],"\u234b":["gradeUp",null],"\u2352":["gradeDown",null],"\u22a4":["encode",null],"\u22a5":["decode",null],"\u2355":["format","formatByExample"],"\u234e":["execute",null],"\u22a3":["stop","left"],"\u22a2":["pass","right"]},c=/[\.\/\u233f\u2340\xa8\u2363]/,d=/\u236c/,e=/[\+\u2212\xd7\xf7\u2308\u230a\u2223\u2373\?\u22c6\u235f\u25cb!\u2339<\u2264=>\u2265\u2260\u2261\u2262\u2208\u2377\u222a\u2229\u223c\u2228\u2227\u2371\u2372\u2374,\u236a\u233d\u2296\u2349\u2191\u2193\u2282\u2283\u2337\u234b\u2352\u22a4\u22a5\u2355\u234e\u22a3\u22a2]/,f=/\u2190/,g=/[\u235d#].*$/,h=function(a){var b;
return b=!1,function(c){return b=c,c===a?"\\"===b:!0}};return{startState:function(){return{prev:!1,func:!1,op:!1,string:!1,escape:!1}},token:function(i,j){var k,l,m;return i.eatSpace()?null:(k=i.next(),'"'===k||"'"===k?(i.eatWhile(h(k)),i.next(),j.prev=!0,"string"):/[\[{\(]/.test(k)?(j.prev=!1,null):/[\]}\)]/.test(k)?(j.prev=!0,null):d.test(k)?(j.prev=!1,"niladic"):/[\xaf\d]/.test(k)?(j.func?(j.func=!1,j.prev=!1):j.prev=!0,i.eatWhile(/[\w\.]/),"number"):c.test(k)?"operator apl-"+a[k]:f.test(k)?"apl-arrow":e.test(k)?(l="apl-",null!=b[k]&&(l+=j.prev?b[k][1]:b[k][0]),j.func=!0,j.prev=!1,"function "+l):g.test(k)?(i.skipToEnd(),"comment"):"\u2218"===k&&"."===i.peek()?(i.next(),"function jot-dot"):(i.eatWhile(/[\w\$_]/),m=i.current(),j.prev=!0,"keyword"))}}}),a.defineMIME("text/apl","apl")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("sql",function(a,b){function k(a,b){var k=a.next();if(i[k]){var n=i[k](a,b);if(n!==!1)return n}if(1==h.hexNumber&&("0"==k&&a.match(/^[xX][0-9a-fA-F]+/)||("x"==k||"X"==k)&&a.match(/^'[0-9a-fA-F]+'/)))return"number";if(1==h.binaryNumber&&(("b"==k||"B"==k)&&a.match(/^'[01]+'/)||"0"==k&&a.match(/^b[01]+/)))return"number";if(k.charCodeAt(0)>47&&k.charCodeAt(0)<58)return a.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==h.decimallessFloat&&a.eat("."),"number";if("?"==k&&(a.eatSpace()||a.eol()||a.eat(";")))return"variable-3";if("'"==k||'"'==k&&h.doubleQuote)return b.tokenize=l(k),b.tokenize(a,b);if((1==h.nCharCast&&("n"==k||"N"==k)||1==h.charsetCast&&"_"==k&&a.match(/[a-z][a-z0-9]*/i))&&("'"==a.peek()||'"'==a.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(k))return null;if(h.commentSlashSlash&&"/"==k&&a.eat("/"))return a.skipToEnd(),"comment";if(h.commentHash&&"#"==k||"-"==k&&a.eat("-")&&(!h.commentSpaceRequired||a.eat(" ")))return a.skipToEnd(),"comment";if("/"==k&&a.eat("*"))return b.tokenize=m,b.tokenize(a,b);if("."!=k){if(g.test(k))return a.eatWhile(g),null;if("{"==k&&(a.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||a.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";a.eatWhile(/^[_\w\d]/);var o=a.current().toLowerCase();return j.hasOwnProperty(o)&&(a.match(/^( )+'[^']*'/)||a.match(/^( )+"[^"]*"/))?"number":d.hasOwnProperty(o)?"atom":e.hasOwnProperty(o)?"builtin":f.hasOwnProperty(o)?"keyword":c.hasOwnProperty(o)?"string-2":null}return 1==h.zerolessFloat&&a.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==h.ODBCdotTable&&a.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function l(a){return function(b,c){for(var e,d=!1;null!=(e=b.next());){if(e==a&&!d){c.tokenize=k;break}d=!d&&"\\"==e}return"string"}}function m(a,b){for(;;){if(!a.skipTo("*")){a.skipToEnd();break}if(a.next(),a.eat("/")){b.tokenize=k;break}}return"comment"}function n(a,b,c){b.context={prev:b.context,indent:a.indentation(),col:a.column(),type:c}}function o(a){a.indent=a.context.indent,a.context=a.context.prev}var c=b.client||{},d=b.atoms||{"false":!0,"true":!0,"null":!0},e=b.builtin||{},f=b.keywords||{},g=b.operatorChars||/^[*+\-%<>!=&|~^]/,h=b.support||{},i=b.hooks||{},j=b.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:k,context:null}},token:function(a,b){if(a.sol()&&b.context&&null==b.context.align&&(b.context.align=!1),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==c)return c;b.context&&null==b.context.align&&(b.context.align=!0);var d=a.current();return"("==d?n(a,b,")"):"["==d?n(a,b,"]"):b.context&&b.context.type==d&&o(b),c},indent:function(b,c){var d=b.context;if(!d)return 0;var e=c.charAt(0)==d.type;return d.align?d.col+(e?0:1):d.indent+(e?0:a.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:h.commentSlashSlash?"//":h.commentHash?"#":null}}),function(){function b(a){for(var b;null!=(b=a.next());)if("`"==b&&!a.eat("`"))return"variable-2";return null}function c(a){return a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./)),a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function d(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function f(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}var e="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";a.defineMIME("text/x-sql",{name:"sql",keywords:f(e+"begin"),builtin:f("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:f("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:f("date time timestamp"),support:f("ODBCdotTable doubleQuote binaryNumber hexNumber")}),a.defineMIME("text/x-mssql",{name:"sql",client:f("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:f(e+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered"),builtin:f("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:f("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:f("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":c}}),a.defineMIME("text/x-mysql",{name:"sql",client:f("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:f(e+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:f("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:f("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:f("date time timestamp"),support:f("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":c,"`":b,"\\":d}}),a.defineMIME("text/x-mariadb",{name:"sql",client:f("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:f(e+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:f("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:f("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:f("date time timestamp"),support:f("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":c,"`":b,"\\":d}}),a.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:f("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:f("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),atoms:f("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:f("commentSlashSlash decimallessFloat"),hooks:{}}),a.defineMIME("text/x-plsql",{name:"sql",client:f("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:f("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:f("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:f("date time timestamp"),support:f("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),a.defineMIME("text/x-hive",{name:"sql",keywords:f("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:f("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:f("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:f("date timestamp"),support:f("ODBCdotTable doubleQuote binaryNumber hexNumber")})}()}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function d(a){for(var d=0;d<a.state.activeLines.length;d++)a.removeLineClass(a.state.activeLines[d],"wrap",b),a.removeLineClass(a.state.activeLines[d],"background",c)}function e(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}function f(a,f){for(var g=[],h=0;h<f.length;h++){var i=a.getLineHandleVisualStart(f[h].head.line);g[g.length-1]!=i&&g.push(i)}e(a.state.activeLines,g)||a.operation(function(){d(a);for(var e=0;e<g.length;e++)a.addLineClass(g[e],"wrap",b),a.addLineClass(g[e],"background",c);a.state.activeLines=g})}function g(a,b){f(a,b.ranges)}var b="CodeMirror-activeline",c="CodeMirror-activeline-background";a.defineOption("styleActiveLine",!1,function(b,c,e){var h=e&&e!=a.Init;c&&!h?(b.state.activeLines=[],f(b,b.listSelections()),b.on("beforeSelectionChange",g)):!c&&h&&(b.off("beforeSelectionChange",g),d(b),delete b.state.activeLines)})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function e(a){var b=a.search(c);return-1==b?0:b}var b={},c=/[^\s\u00a0]/,d=a.Pos;a.commands.toggleComment=function(a){for(var b=1/0,c=a.listSelections(),e=null,f=c.length-1;f>=0;f--){var g=c[f].from(),h=c[f].to();g.line>=b||(h.line>=b&&(h=d(b,0)),b=g.line,null==e?a.uncomment(g,h)?e="un":(a.lineComment(g,h),e="line"):"un"==e?a.uncomment(g,h):a.lineComment(g,h))}},a.defineExtension("lineComment",function(a,f,g){g||(g=b);var h=this,i=h.getModeAt(a),j=g.lineComment||i.lineComment;if(!j)return(g.blockCommentStart||i.blockCommentStart)&&(g.fullLines=!0,h.blockComment(a,f,g)),void 0;var k=h.getLine(a.line);if(null!=k){var l=Math.min(0!=f.ch||f.line==a.line?f.line+1:f.line,h.lastLine()+1),m=null==g.padding?" ":g.padding,n=g.commentBlankLines||a.line==f.line;h.operation(function(){if(g.indent)for(var b=k.slice(0,e(k)),f=a.line;l>f;++f){var i=h.getLine(f),o=b.length;(n||c.test(i))&&(i.slice(0,o)!=b&&(o=e(i)),h.replaceRange(b+j+m,d(f,0),d(f,o)))}else for(var f=a.line;l>f;++f)(n||c.test(h.getLine(f)))&&h.replaceRange(j+m,d(f,0))})}}),a.defineExtension("blockComment",function(a,e,f){f||(f=b);var g=this,h=g.getModeAt(a),i=f.blockCommentStart||h.blockCommentStart,j=f.blockCommentEnd||h.blockCommentEnd;if(!i||!j)return(f.lineComment||h.lineComment)&&0!=f.fullLines&&g.lineComment(a,e,f),void 0;var k=Math.min(e.line,g.lastLine());k!=a.line&&0==e.ch&&c.test(g.getLine(k))&&--k;var l=null==f.padding?" ":f.padding;a.line>k||g.operation(function(){if(0!=f.fullLines){var b=c.test(g.getLine(k));g.replaceRange(l+j,d(k)),g.replaceRange(i+l,d(a.line,0));var m=f.blockCommentLead||h.blockCommentLead;if(null!=m)for(var n=a.line+1;k>=n;++n)(n!=k||b)&&g.replaceRange(m+l,d(n,0))}else g.replaceRange(j,e),g.replaceRange(i,a)})}),a.defineExtension("uncomment",function(a,e,f){f||(f=b);var n,g=this,h=g.getModeAt(a),i=Math.min(e.line,g.lastLine()),j=Math.min(a.line,i),k=f.lineComment||h.lineComment,l=[],m=null==f.padding?" ":f.padding;a:if(k){for(var o=j;i>=o;++o){var p=g.getLine(o),q=p.indexOf(k);if(q>-1&&!/comment/.test(g.getTokenTypeAt(d(o,q+1)))&&(q=-1),-1==q&&(o!=i||o==j)&&c.test(p))break a;if(q>-1&&c.test(p.slice(0,q)))break a;l.push(p)}if(g.operation(function(){for(var a=j;i>=a;++a){var b=l[a-j],c=b.indexOf(k),e=c+k.length;0>c||(b.slice(e,e+m.length)==m&&(e+=m.length),n=!0,g.replaceRange("",d(a,c),d(a,e)))}}),n)return!0}var r=f.blockCommentStart||h.blockCommentStart,s=f.blockCommentEnd||h.blockCommentEnd;if(!r||!s)return!1;var t=f.blockCommentLead||h.blockCommentLead,u=g.getLine(j),v=i==j?u:g.getLine(i),w=u.indexOf(r),x=v.lastIndexOf(s);return-1==x&&j!=i&&(v=g.getLine(--i),x=v.lastIndexOf(s)),-1!=w&&-1!=x&&/comment/.test(g.getTokenTypeAt(d(j,w+1)))&&/comment/.test(g.getTokenTypeAt(d(i,x+1)))?(g.operation(function(){g.replaceRange("",d(i,x-(m&&v.slice(x-m.length,x)==m?m.length:0)),d(i,x+s.length));var a=w+r.length;if(m&&u.slice(a,a+m.length)==m&&(a+=m.length),g.replaceRange("",d(j,w),d(j,a)),t)for(var b=j+1;i>=b;++b){var e=g.getLine(b),f=e.indexOf(t);if(-1!=f&&!c.test(e.slice(0,f))){var h=f+t.length;m&&e.slice(h,h+m.length)==m&&(h+=m.length),g.replaceRange("",d(b,f),d(b,h))}}}),!0):!1})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){var b=a.getWrapperElement();a.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:b.style.width,height:b.style.height},b.style.width="",b.style.height="auto",b.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",a.refresh()}function c(a){var b=a.getWrapperElement();b.className=b.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=a.state.fullScreenRestore;b.style.width=c.width,b.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),a.refresh()}a.defineOption("fullScreen",!1,function(d,e,f){f==a.Init&&(f=!1),!f!=!e&&(e?b(d):c(d))})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){function e(a,b,e,g){var h=a.getLineHandle(b.line),i=b.ch-1,j=i>=0&&d[h.text.charAt(i)]||d[h.text.charAt(++i)];if(!j)return null;var k=">"==j.charAt(1)?1:-1;if(e&&k>0!=(i==b.ch))return null;var l=a.getTokenTypeAt(c(b.line,i+1)),m=f(a,c(b.line,i+(k>0?1:0)),k,l||null,g);return{from:c(b.line,i),to:m&&m.pos,match:m&&m.ch==j.charAt(0),forward:k>0}}function f(a,b,e,f,g){for(var h=g&&g.maxScanLineLength||1e4,i=g&&g.maxScanLines||500,j=[],k=g&&g.bracketRegex?g.bracketRegex:/[(){}[\]]/,l=e>0?Math.min(b.line+i,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-i),m=b.line;m!=l;m+=e){var n=a.getLine(m);if(n){var o=e>0?0:n.length-1,p=e>0?n.length:-1;if(!(n.length>h))for(m==b.line&&(o=b.ch-(0>e?1:0));o!=p;o+=e){var q=n.charAt(o);if(k.test(q)&&(void 0===f||a.getTokenTypeAt(c(m,o+1))==f)){var r=d[q];if(">"==r.charAt(1)==e>0)j.push(q);else{if(!j.length)return{pos:c(m,o),ch:q};j.pop()}}}}}}function g(a,d,f){for(var g=a.state.matchBrackets.maxHighlightLineLength||1e3,h=[],i=a.listSelections(),j=0;j<i.length;j++){var k=i[j].empty()&&e(a,i[j].head,!1,f);if(k&&a.getLine(k.from.line).length<=g&&k.to&&a.getLine(k.to.line).length<=g){var l=k.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(a.markText(k.from,c(k.from.line,k.from.ch+1),{className:l})),k.to&&h.push(a.markText(k.to,c(k.to.line,k.to.ch+1),{className:l}))}}if(h.length){b&&a.state.focused&&a.display.input.focus();var m=function(){a.operation(function(){for(var a=0;a<h.length;a++)h[a].clear()})};if(!d)return m;setTimeout(m,800)}}function i(a){a.operation(function(){h&&(h(),h=null),h=g(a,!1,a.state.matchBrackets)})}var b=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),c=a.Pos,d={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},h=null;a.defineOption("matchBrackets",!1,function(b,c,d){d&&d!=a.Init&&b.off("cursorActivity",i),c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",i))}),a.defineExtension("matchBrackets",function(){g(this,!0)}),a.defineExtension("findMatchingBracket",function(a,b,c){return e(this,a,b,c)}),a.defineExtension("scanForBracket",function(a,b,c,d){return f(this,a,b,c,d)})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)}(function(a){"use strict";function b(a){a.state.tagHit&&a.state.tagHit.clear(),a.state.tagOther&&a.state.tagOther.clear(),a.state.tagHit=a.state.tagOther=null}function c(c){c.state.failedTagMatch=!1,c.operation(function(){if(b(c),!c.somethingSelected()){var d=c.getCursor(),e=c.getViewport();e.from=Math.min(e.from,d.line),e.to=Math.max(d.line+1,e.to);var f=a.findMatchingTag(c,d,e);if(f){if(c.state.matchBothTags){var g="open"==f.at?f.open:f.close;g&&(c.state.tagHit=c.markText(g.from,g.to,{className:"CodeMirror-matchingtag"}))}var h="close"==f.at?f.open:f.close;h?c.state.tagOther=c.markText(h.from,h.to,{className:"CodeMirror-matchingtag"}):c.state.failedTagMatch=!0}}})}function d(a){a.state.failedTagMatch&&c(a)}a.defineOption("matchTags",!1,function(e,f,g){g&&g!=a.Init&&(e.off("cursorActivity",c),e.off("viewportChange",d),b(e)),f&&(e.state.matchBothTags="object"==typeof f&&f.bothTags,e.on("cursorActivity",c),e.on("viewportChange",d),c(e))}),a.commands.toMatchingTag=function(b){var c=a.findMatchingTag(b,b.getCursor());if(c){var d="close"==c.at?c.open:c.close;d&&b.extendSelection(d.to,d.from)}}}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../../mode/sql/sql")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/sql/sql"],a):a(CodeMirror)}(function(a){"use strict";function f(b){var c=b.doc.modeOption;return"sql"===c&&(c="text/x-sql"),a.resolveMode(c).keywords}function g(a,b){var c=a.length,d=b.substr(0,c);return a.toUpperCase()===d.toUpperCase()}function h(a,b,c,d){for(var e in c)c.hasOwnProperty(e)&&(Array.isArray(c)&&(e=c[e]),g(b,e)&&a.push(d(e)))}function i(a,c){var d=c.getCursor(),f=c.getTokenAt(d),g=f.string.substr(1),i=e(d.line,f.start),j=c.getTokenAt(i).string;b.hasOwnProperty(j)||(j=m(j,c));var k=b[j];k&&h(a,g,k,function(a){return"."+a})}function j(a,b){if(a)for(var c=/[,;]/g,d=a.split(" "),e=0;e<d.length;e++)b(d[e]?d[e].replace(c,""):"")}function k(a){return a.line+a.ch/Math.pow(10,6)}function l(a){return e(Math.floor(a),+a.toString().split(".").pop())}function m(a,c){for(var f=c.doc,g=f.getValue(),h=a.toUpperCase(),i="",m="",n=[],o={start:e(0,0),end:e(c.lastLine(),c.getLineHandle(c.lastLine()).length)},p=g.indexOf(d.QUERY_DIV);-1!=p;)n.push(f.posFromIndex(p)),p=g.indexOf(d.QUERY_DIV,p+1);n.unshift(e(0,0)),n.push(e(c.lastLine(),c.getLineHandle(c.lastLine()).text.length));for(var q=0,r=k(c.getCursor()),s=0;s<n.length;s++){var t=k(n[s]);if(r>q&&t>=r){o={start:l(q),end:l(t)};break}q=t}for(var u=f.getRange(o.start,o.end,!1),s=0;s<u.length;s++){var v=u[s];if(j(v,function(a){var c=a.toUpperCase();c===h&&b.hasOwnProperty(i)&&(m=i),c!==d.ALIAS_KEYWORD&&(i=a)}),m)break}return m}function n(a,d){b=d&&d.tables||{},c=c||f(a);var g=a.getCursor(),j=a.getTokenAt(g),k=j.end,l=[],m=j.string.trim();if("."==m.charAt(0)){if(i(l,a),!l.length){for(;j.start&&"."==m.charAt(0);)j=a.getTokenAt(e(g.line,j.start-1)),m=j.string+m;h(l,m,b,function(a){return a})}}else h(l,m,c,function(a){return a.toUpperCase()}),h(l,m,b,function(a){return a});return{list:l,from:e(g.line,j.start),to:e(g.line,k)}}var b,c,d={QUERY_DIV:";",ALIAS_KEYWORD:"AS"},e=a.Pos;a.registerHelper("hint","sql",n)}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function c(a,b){return a.line==b.line&&a.ch==b.ch}function e(a){d.push(a),d.length>50&&d.shift()}function f(a){return d.length?(d[d.length-1]+=a,void 0):e(a)}function g(a){return d[d.length-(a?Math.min(a,1):1)]||""}function h(){return d.length>1&&d.pop(),g()}function j(a,b,d,g,h){null==h&&(h=a.getRange(b,d)),g&&i&&i.cm==a&&c(b,i.pos)&&a.isClean(i.gen)?f(h):e(h),a.replaceRange("",b,d,"+delete"),i=g?{cm:a,pos:b,gen:a.changeGeneration()}:null}function k(a,b,c){return a.findPosH(b,c,"char",!0)}function l(a,b,c){return a.findPosH(b,c,"word",!0)}function m(a,b,c){return a.findPosV(b,c,"line",a.doc.sel.goalColumn)}function n(a,b,c){return a.findPosV(b,c,"page",a.doc.sel.goalColumn)}function o(a,c,d){for(var e=c.line,f=a.getLine(e),g=/\S/.test(0>d?f.slice(0,c.ch):f.slice(c.ch)),h=a.firstLine(),i=a.lastLine();;){if(e+=d,h>e||e>i)return a.clipPos(b(e-d,0>d?0:null));f=a.getLine(e);var j=/\S/.test(f);if(j)g=!0;else if(g)return b(e,0)}}function p(a,c,d){for(var e=c.line,f=c.ch,g=a.getLine(c.line),h=!1;;){var i=g.charAt(f+(0>d?-1:0));if(i){if(h&&/[!?.]/.test(i))return b(e,f+(d>0?1:0));h||(h=/\w/.test(i)),f+=d}else{if(e==(0>d?a.firstLine():a.lastLine()))return b(e,f);if(g=a.getLine(e+d),!/\S/.test(g))return b(e,f);e+=d,f=0>d?g.length:0}}}function q(a,d,e){var f;
if(a.findMatchingBracket&&(f=a.findMatchingBracket(d,!0))&&f.match&&(f.forward?1:-1)==e)return e>0?b(f.to.line,f.to.ch+1):f.to;for(var g=!0;;g=!1){var h=a.getTokenAt(d),i=b(d.line,0>e?h.start:h.end);if(!(g&&e>0&&h.end==d.ch)&&/\w/.test(h.string))return i;var j=a.findPosH(i,e,"char");if(c(i,j))return d;d=j}}function r(a,b){var c=a.state.emacsPrefix;return c?(z(a),"-"==c?-1:Number(c)):b?null:1}function s(a){var b="string"==typeof a?function(b){b.execCommand(a)}:a;return function(a){var c=r(a);b(a);for(var d=1;c>d;++d)b(a)}}function t(a,b,d){var e=a.getCursor(),f=r(a);0>f&&(d=-d,f=-f);for(var g=0;f>g;++g){var h=b(a,e,d);if(c(h,e))break;e=h}return e}function u(a,b){var c=function(c){c.extendSelection(t(c,a,b))};return c.motion=!0,c}function v(a,b,c){j(a,a.getCursor(),t(a,b,c),!0)}function w(a,b){return a.state.emacsPrefix?("-"!=b&&(a.state.emacsPrefix+=b),void 0):(a.state.emacsPrefix=b,a.on("keyHandled",y),a.on("inputRead",A),void 0)}function y(a,b){a.state.emacsPrefixMap||x.hasOwnProperty(b)||z(a)}function z(a){a.state.emacsPrefix=null,a.off("keyHandled",y),a.off("inputRead",A)}function A(a,b){var c=r(a);if(c>1&&"+input"==b.origin){for(var d=b.text.join("\n"),e="",f=1;c>f;++f)e+=d;a.replaceSelection(e)}}function B(a){a.state.emacsPrefixMap=!0,a.addKeyMap(K),a.on("keyHandled",C),a.on("inputRead",C)}function C(a,b){("string"!=typeof b||!/^\d$/.test(b)&&"Ctrl-U"!=b)&&(a.removeKeyMap(K),a.state.emacsPrefixMap=!1,a.off("keyHandled",C),a.off("inputRead",C))}function D(a){a.setCursor(a.getCursor()),a.setExtending(!a.getExtending()),a.on("change",function(){a.setExtending(!1)})}function E(a){a.setExtending(!1),a.setCursor(a.getCursor())}function F(a,b,c){a.openDialog?a.openDialog(b+': <input type="text" style="width: 10em"/>',c,{bottom:!0}):c(prompt(b,""))}function G(a,b){var c=a.getCursor(),d=a.findPosH(c,1,"word");a.replaceRange(b(a.getRange(c,d)),c,d),a.setCursor(d)}function H(a){for(var c=a.getCursor(),d=c.line,e=c.ch,f=[];d>=a.firstLine();){for(var g=a.getLine(d),h=null==e?g.length:e;h>0;){var e=g.charAt(--h);if(")"==e)f.push("(");else if("]"==e)f.push("[");else if("}"==e)f.push("{");else if(/[\(\{\[]/.test(e)&&(!f.length||f.pop()!=e))return a.extendSelection(b(d,h))}--d,e=null}}function I(a){a.execCommand("clearSearch"),E(a)}function L(a){K[a]=function(b){w(b,a)},J["Ctrl-"+a]=function(b){w(b,a)},x["Ctrl-"+a]=!0}var b=a.Pos,d=[],i=null,x={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},J=a.keyMap.emacs={"Ctrl-W":function(a){j(a,a.getCursor("start"),a.getCursor("end"))},"Ctrl-K":s(function(a){var c=a.getCursor(),d=a.clipPos(b(c.line)),e=a.getRange(c,d);/\S/.test(e)||(e+="\n",d=b(c.line+1,0)),j(a,c,d,!0,e)}),"Alt-W":function(a){e(a.getSelection()),E(a)},"Ctrl-Y":function(a){var b=a.getCursor();a.replaceRange(g(r(a)),b,b,"paste"),a.setSelection(b,a.getCursor())},"Alt-Y":function(a){a.replaceSelection(h(),"around","paste")},"Ctrl-Space":D,"Ctrl-Shift-2":D,"Ctrl-F":u(k,1),"Ctrl-B":u(k,-1),Right:u(k,1),Left:u(k,-1),"Ctrl-D":function(a){v(a,k,1)},Delete:function(a){v(a,k,1)},"Ctrl-H":function(a){v(a,k,-1)},Backspace:function(a){v(a,k,-1)},"Alt-F":u(l,1),"Alt-B":u(l,-1),"Alt-D":function(a){v(a,l,1)},"Alt-Backspace":function(a){v(a,l,-1)},"Ctrl-N":u(m,1),"Ctrl-P":u(m,-1),Down:u(m,1),Up:u(m,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":u(n,-1),"Ctrl-V":u(n,1),PageUp:u(n,-1),PageDown:u(n,1),"Ctrl-Up":u(o,-1),"Ctrl-Down":u(o,1),"Alt-A":u(p,-1),"Alt-E":u(p,1),"Alt-K":function(a){v(a,p,1)},"Ctrl-Alt-K":function(a){v(a,q,1)},"Ctrl-Alt-Backspace":function(a){v(a,q,-1)},"Ctrl-Alt-F":u(q,1),"Ctrl-Alt-B":u(q,-1),"Shift-Ctrl-Alt-2":function(a){a.setSelection(t(a,q,1),a.getCursor())},"Ctrl-Alt-T":function(a){var b=q(a,a.getCursor(),-1),c=q(a,b,1),d=q(a,c,1),e=q(a,d,-1);a.replaceRange(a.getRange(e,d)+a.getRange(c,e)+a.getRange(b,c),b,d)},"Ctrl-Alt-U":s(H),"Alt-Space":function(a){for(var c=a.getCursor(),d=c.ch,e=c.ch,f=a.getLine(c.line);d&&/\s/.test(f.charAt(d-1));)--d;for(;e<f.length&&/\s/.test(f.charAt(e));)++e;a.replaceRange(" ",b(c.line,d),b(c.line,e))},"Ctrl-O":s(function(a){a.replaceSelection("\n","start")}),"Ctrl-T":s(function(a){var c=a.getCursor();c.ch<a.getLine(c.line).length&&(c=b(c.line,c.ch+1));var d=a.findPosH(c,-2,"char"),e=a.getRange(d,c);2==e.length&&(a.setSelection(d,c),a.replaceSelection(e.charAt(1)+e.charAt(0),null,"+transpose"))}),"Alt-C":s(function(a){G(a,function(a){var b=a.search(/\w/);return-1==b?a:a.slice(0,b)+a.charAt(b).toUpperCase()+a.slice(b+1).toLowerCase()})}),"Alt-U":s(function(a){G(a,function(a){return a.toUpperCase()})}),"Alt-L":s(function(a){G(a,function(a){return a.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":s("undo"),"Shift-Ctrl--":s("undo"),"Ctrl-Z":s("undo"),"Cmd-Z":s("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":I,"Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G":function(a){a.setOption("keyMap","emacs-Alt-G")},"Ctrl-X":function(a){a.setOption("keyMap","emacs-Ctrl-X")},"Ctrl-Q":function(a){a.setOption("keyMap","emacs-Ctrl-Q")},"Ctrl-U":B};a.keyMap["emacs-Ctrl-X"]={Tab:function(a){a.indentSelection(r(a,!0)||a.getOption("indentUnit"))},"Ctrl-X":function(a){a.setSelection(a.getCursor("head"),a.getCursor("anchor"))},"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:s("undo"),K:"close",Delete:function(a){j(a,a.getCursor(),p(a,a.getCursor(),1),!0)},auto:"emacs",nofallthrough:!0,disableInput:!0},a.keyMap["emacs-Alt-G"]={G:function(a){var b=r(a,!0);return null!=b&&b>0?a.setCursor(b-1):(F(a,"Goto line",function(b){var c;b&&!isNaN(c=Number(b))&&0|c==c&&c>0&&a.setCursor(c-1)}),void 0)},auto:"emacs",nofallthrough:!0,disableInput:!0},a.keyMap["emacs-Ctrl-Q"]={Tab:s("insertTab"),auto:"emacs",nofallthrough:!0};for(var K={"Ctrl-G":z},M=0;10>M;++M)L(String(M));L("-")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],a):a(CodeMirror)}(function(a){"use strict";function f(b,c,e){if(0>e&&0==c.ch)return b.clipPos(d(c.line-1));var f=b.getLine(c.line);if(e>0&&c.ch>=f.length)return b.clipPos(d(c.line+1,0));for(var h,g="start",i=c.ch,j=0>e?0:f.length,k=0;i!=j;i+=e,k++){var l=f.charAt(0>e?i-1:i),m="_"!=l&&a.isWordChar(l)?"w":"o";if("w"==m&&l.toUpperCase()==l&&(m="W"),"start"==g)"o"!=m&&(g="in",h=m);else if("in"==g&&h!=m){if("w"==h&&"W"==m&&0>e&&i--,"W"==h&&"w"==m&&e>0){h="w";continue}break}}return d(c.line,i)}function g(a,b){a.extendSelectionsBy(function(c){return a.display.shift||a.doc.extend||c.empty()?f(a.doc,c.head,b):0>b?c.from():c.to()})}function h(a,b){a.operation(function(){for(var c=a.listSelections().length,e=[],f=-1,g=0;c>g;g++){var h=a.listSelections()[g].head;if(!(h.line<=f)){var i=d(h.line+(b?0:1),0);a.replaceRange("\n",i,null,"+insertLine"),a.indentLine(i.line,null,!0),e.push({head:i,anchor:i}),f=h.line+1}}a.setSelections(e)})}function i(b,c){for(var e=c.ch,f=e,g=b.getLine(c.line);e&&a.isWordChar(g.charAt(e-1));)--e;for(;f<g.length&&a.isWordChar(g.charAt(f));)++f;return{from:d(c.line,e),to:d(c.line,f),word:g.slice(e,f)}}function k(a){var b=a.getCursor(),c=a.scanForBracket(b,-1);if(c)for(;;){var e=a.scanForBracket(b,1);if(!e)return;if(e.ch==j.charAt(j.indexOf(c.ch)+1))return a.setSelection(d(c.pos.line,c.pos.ch+1),e.pos,!1),!0;b=d(e.pos.line,e.pos.ch+1)}}function l(a,b){for(var f,c=a.listSelections(),e=[],g=0;g<c.length;g++){var h=c[g];if(!h.empty()){for(var i=h.from().line,j=h.to().line;g<c.length-1&&c[g+1].from().line==j;)j=h[++g].to().line;e.push(i,j)}}e.length?f=!0:e.push(a.firstLine(),a.lastLine()),a.operation(function(){for(var c=[],g=0;g<e.length;g+=2){var h=e[g],i=e[g+1],j=d(h,0),k=d(i),l=a.getRange(j,k,!1);b?l.sort():l.sort(function(a,b){var c=a.toUpperCase(),d=b.toUpperCase();return c!=d&&(a=c,b=d),b>a?-1:a==b?0:1}),a.replaceRange(l,j,k),f&&c.push({anchor:j,head:k})}f&&a.setSelections(c,0)})}function n(b,c){b.operation(function(){for(var d=b.listSelections(),e=[],f=[],g=0;g<d.length;g++){var h=d[g];h.empty()?(e.push(g),f.push("")):f.push(c(b.getRange(h.from(),h.to())))}b.replaceSelections(f,"around","case");for(var j,g=e.length-1;g>=0;g--){var h=d[e[g]];if(!(j&&a.cmpPos(h.head,j)>0)){var k=i(b,h.head);j=k.from,b.replaceRange(c(k.word),k.from,k.to)}}})}function o(b,c){var e=b.getCursor("from"),f=b.getCursor("to");if(0==a.cmpPos(e,f)){var g=i(b,e);if(!g.word)return;e=g.from,f=g.to}var h=b.getRange(e,f),j=b.getSearchCursor(h,c?f:e);(c?j.findNext():j.findPrevious())?b.setSelection(j.from(),j.to()):(j=b.getSearchCursor(h,c?d(b.firstLine(),0):b.clipPos(d(b.lastLine()))),(c?j.findNext():j.findPrevious())?b.setSelection(j.from(),j.to()):g&&b.setSelection(e,f))}var b=a.keyMap.sublime={fallthrough:"default"},c=a.commands,d=a.Pos,e=a.keyMap["default"]==a.keyMap.pcDefault?"Ctrl-":"Cmd-";c[b["Alt-Left"]="goSubwordLeft"]=function(a){g(a,-1)},c[b["Alt-Right"]="goSubwordRight"]=function(a){g(a,1)},c[b[e+"Up"]="scrollLineUp"]=function(a){a.scrollTo(null,a.getScrollInfo().top-a.defaultTextHeight())},c[b[e+"Down"]="scrollLineDown"]=function(a){a.scrollTo(null,a.getScrollInfo().top+a.defaultTextHeight())},c[b["Shift-"+e+"L"]="splitSelectionByLine"]=function(a){for(var b=a.listSelections(),c=[],e=0;e<b.length;e++)for(var f=b[e].from(),g=b[e].to(),h=f.line;h<=g.line;++h)g.line>f.line&&h==g.line&&0==g.ch||c.push({anchor:h==f.line?f:d(h,0),head:h==g.line?g:d(h)});a.setSelections(c,0)},b["Shift-Tab"]="indentLess",c[b.Esc="singleSelectionTop"]=function(a){var b=a.listSelections()[0];a.setSelection(b.anchor,b.head,{scroll:!1})},c[b[e+"L"]="selectLine"]=function(a){for(var b=a.listSelections(),c=[],e=0;e<b.length;e++){var f=b[e];c.push({anchor:d(f.from().line,0),head:d(f.to().line+1,0)})}a.setSelections(c)},b["Shift-"+e+"K"]="deleteLine",c[b[e+"Enter"]="insertLineAfter"]=function(a){h(a,!1)},c[b["Shift-"+e+"Enter"]="insertLineBefore"]=function(a){h(a,!0)},c[b[e+"D"]="selectNextOccurrence"]=function(b){var c=b.getCursor("from"),e=b.getCursor("to"),f=b.state.sublimeFindFullWord==b.doc.sel;if(0==a.cmpPos(c,e)){var g=i(b,c);if(!g.word)return;b.setSelection(g.from,g.to),f=!0}else{var h=b.getRange(c,e),j=f?new RegExp("\\b"+h+"\\b"):h,k=b.getSearchCursor(j,e);k.findNext()?b.addSelection(k.from(),k.to()):(k=b.getSearchCursor(j,d(b.firstLine(),0)),k.findNext()&&b.addSelection(k.from(),k.to()))}f&&(b.state.sublimeFindFullWord=b.doc.sel)};var j="(){}[]";c[b["Shift-"+e+"Space"]="selectScope"]=function(a){k(a)||a.execCommand("selectAll")},c[b["Shift-"+e+"M"]="selectBetweenBrackets"]=function(b){return k(b)?void 0:a.Pass},c[b[e+"M"]="goToBracket"]=function(b){b.extendSelectionsBy(function(c){var e=b.scanForBracket(c.head,1);if(e&&0!=a.cmpPos(e.pos,c.head))return e.pos;var f=b.scanForBracket(c.head,-1);return f&&d(f.pos.line,f.pos.ch+1)||c.head})},c[b["Shift-"+e+"Up"]="swapLineUp"]=function(a){for(var b=a.listSelections(),c=[],e=a.firstLine()-1,f=0;f<b.length;f++){var g=b[f],h=g.from().line-1,i=g.to().line;h>e?c.push(h,i):c.length&&(c[c.length-1]=i),e=i}a.operation(function(){for(var b=0;b<c.length;b+=2){var e=c[b],f=c[b+1],g=a.getLine(e);if(a.replaceRange("",d(e,0),d(e+1,0),"+swapLine"),f>a.lastLine()){a.replaceRange("\n"+g,d(a.lastLine()),null,"+swapLine");var h=a.listSelections(),i=h[h.length-1],j=i.head.line==f?d(f-1):i.head,k=i.anchor.line==f?d(f-1):i.anchor;a.setSelections(h.slice(0,h.length-1).concat([{head:j,anchor:k}]))}else a.replaceRange(g+"\n",d(f,0),null,"+swapLine")}a.scrollIntoView()})},c[b["Shift-"+e+"Down"]="swapLineDown"]=function(a){for(var b=a.listSelections(),c=[],e=a.lastLine()+1,f=b.length-1;f>=0;f--){var g=b[f],h=g.to().line+1,i=g.from().line;e>h?c.push(h,i):c.length&&(c[c.length-1]=i),e=i}a.operation(function(){for(var b=c.length-2;b>=0;b-=2){var e=c[b],f=c[b+1],g=a.getLine(e);e==a.lastLine()?a.replaceRange("",d(e-1),d(e),"+swapLine"):a.replaceRange("",d(e,0),d(e+1,0),"+swapLine"),a.replaceRange(g+"\n",d(f,0),null,"+swapLine")}a.scrollIntoView()})},b[e+"/"]="toggleComment",c[b[e+"J"]="joinLines"]=function(a){for(var b=a.listSelections(),c=[],e=0;e<b.length;e++){for(var f=b[e],g=f.from(),h=g.line,i=f.to().line;e<b.length-1&&b[e+1].from().line==i;)i=b[++e].to().line;c.push({start:h,end:i,anchor:!f.empty()&&g})}a.operation(function(){for(var b=0,e=[],f=0;f<c.length;f++){for(var i,g=c[f],h=g.anchor&&d(g.anchor.line-b,g.anchor.ch),j=g.start;j<=g.end;j++){var k=j-b;j==g.end&&(i=d(k,a.getLine(k).length+1)),k<a.lastLine()&&(a.replaceRange(" ",d(k),d(k+1,/^\s*/.exec(a.getLine(k+1))[0].length)),++b)}e.push({anchor:h||i,head:i})}a.setSelections(e,0)})},c[b["Shift-"+e+"D"]="duplicateLine"]=function(a){a.operation(function(){for(var b=a.listSelections().length,c=0;b>c;c++){var e=a.listSelections()[c];e.empty()?a.replaceRange(a.getLine(e.head.line)+"\n",d(e.head.line,0)):a.replaceRange(a.getRange(e.from(),e.to()),e.from())}a.scrollIntoView()})},b[e+"T"]="transposeChars",c[b.F9="sortLines"]=function(a){l(a,!0)},c[b[e+"F9"]="sortLinesInsensitive"]=function(a){l(a,!1)},c[b.F2="nextBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){var c=b.shift(),d=c.find();if(d)return b.push(c),a.setSelection(d.from,d.to)}},c[b["Shift-F2"]="prevBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){b.unshift(b.pop());var c=b[b.length-1].find();if(c)return a.setSelection(c.from,c.to);b.pop()}},c[b[e+"F2"]="toggleBookmark"]=function(a){for(var b=a.listSelections(),c=a.state.sublimeBookmarks||(a.state.sublimeBookmarks=[]),d=0;d<b.length;d++){for(var e=b[d].from(),f=b[d].to(),g=a.findMarks(e,f),h=0;h<g.length;h++)if(g[h].sublimeBookmark){g[h].clear();for(var i=0;i<c.length;i++)c[i]==g[h]&&c.splice(i--,1);break}h==g.length&&c.push(a.markText(e,f,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},c[b["Shift-"+e+"F2"]="clearBookmarks"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(var c=0;c<b.length;c++)b[c].clear();b.length=0},c[b["Alt-F2"]="selectBookmarks"]=function(a){var b=a.state.sublimeBookmarks,c=[];if(b)for(var d=0;d<b.length;d++){var e=b[d].find();e?c.push({anchor:e.from,head:e.to}):b.splice(d--,0)}c.length&&a.setSelections(c,0)},b["Alt-Q"]="wrapLines";var m=a.keyMap["sublime-Ctrl-K"]={auto:"sublime",nofallthrough:!0};b[e+"K"]=function(a){a.setOption("keyMap","sublime-Ctrl-K")},m[e+"Backspace"]="delLineLeft",c[m[e+"K"]="delLineRight"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange("",b[c].anchor,d(b[c].to().line),"+delete");a.scrollIntoView()})},c[m[e+"U"]="upcaseAtCursor"]=function(a){n(a,function(a){return a.toUpperCase()})},c[m[e+"L"]="downcaseAtCursor"]=function(a){n(a,function(a){return a.toLowerCase()})},c[m[e+"Space"]="setSublimeMark"]=function(a){a.state.sublimeMark&&a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor())},c[m[e+"A"]="selectToSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&a.setSelection(a.getCursor(),b)},c[m[e+"W"]="deleteToSublimeMark"]=function(b){var c=b.state.sublimeMark&&b.state.sublimeMark.find();if(c){var d=b.getCursor(),e=c;if(a.cmpPos(d,e)>0){var f=e;e=d,d=f}b.state.sublimeKilled=b.getRange(d,e),b.replaceRange("",d,e)}},c[m[e+"X"]="swapWithSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&(a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor()),a.setCursor(b))},c[m[e+"Y"]="sublimeYank"]=function(a){null!=a.state.sublimeKilled&&a.replaceSelection(a.state.sublimeKilled,null,"paste")},m[e+"G"]="clearBookmarks",c[m[e+"C"]="showInCenter"]=function(a){var b=a.cursorCoords(null,"local");a.scrollTo(null,(b.top+b.bottom)/2-a.getScrollInfo().clientHeight/2)},c[b["Shift-Alt-Up"]="selectLinesUpward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var e=b[c];e.head.line>a.firstLine()&&a.addSelection(d(e.head.line-1,e.head.ch))}})},c[b["Shift-Alt-Down"]="selectLinesDownward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var e=b[c];e.head.line<a.lastLine()&&a.addSelection(d(e.head.line+1,e.head.ch))}})},c[b[e+"F3"]="findUnder"]=function(a){o(a,!0)},c[b["Shift-"+e+"F3"]="findUnderPrevious"]=function(a){o(a,!1)},b["Shift-"+e+"["]="fold",b["Shift-"+e+"]"]="unfold",m[e+"0"]=m[e+"j"]="unfoldAll",b[e+"I"]="findIncremental",b["Shift-"+e+"I"]="findIncrementalReverse",b[e+"H"]="replace",b.F3="findNext",b["Shift-F3"]="findPrev"}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],a):a(CodeMirror)}(function(a){"use strict";var b=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["<C-[>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["<CR>"],type:"keyToKey",toKeys:["j","^"],context:"normal"},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:["]","p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:["[","p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["o"],type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{},context:"visual"},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:!0},motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:["<C-e>"],type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:["<C-y>"],type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["g","v"],type:"action",action:"reselectLastSelection"},{keys:["J"],type:"action",action:"joinLines",isEdit:!0},{keys:["p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:["P"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:["r","character"],type:"action",action:"replace",isEdit:!0},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:["u"],type:"action",action:"undo"},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:["g","*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:["g","#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:[":"],type:"ex"}],c=a.Pos,d=function(){function e(a,b){var d=a.state.vim;if(!d.insertMode&&!d.exMode){var e=b.ranges[0].head,f=b.ranges[0].anchor;if(e.ch&&e.ch==a.doc.getLine(e.line).length){var g=c(e.line,e.ch-1);b.update([{anchor:W(e,f)?g:f,head:g}])}}}function f(a){var b=a.state.vim;return b.onPasteFn||(b.onPasteFn=function(){b.insertMode||(a.setCursor(S(a.getCursor(),0,1)),P.enterInsertMode(a,{},b))}),b.onPasteFn}function j(a,b){for(var c=[],d=a;a+b>d;d++)c.push(String.fromCharCode(d));return c}function r(a,b){return b>=a.firstLine()&&b<=a.lastLine()}function s(a){return/^[a-z]$/.test(a)}function t(a){return-1!="()[]{}".indexOf(a)}function u(a){return g.test(a)}function v(a){return/^[A-Z]$/.test(a)}function w(a){return/^\s*$/.test(a)}function x(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function z(a,b,c){if(void 0===b)throw Error("defaultValue is required");c||(c="string"),y[a]={type:c,defaultValue:b},A(a,b)}function A(a,b){var c=y[a];if(!c)throw Error("Unknown option: "+a);if("boolean"==c.type){if(b&&b!==!0)throw Error("Invalid argument: "+a+"="+b);b!==!1&&(b=!0)}c.value="boolean"==c.type?!!b:b}function B(a){var b=y[a];if(!b)throw Error("Unknown option: "+a);return b.value}function E(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=D()}function F(a){return a.state.vim||(a.state.vim={inputState:new J,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,lastSelection:null}),a.state.vim}function H(){G={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:C(),macroModeState:new E,lastChararacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new L({})};for(var a in y){var b=y[a];b.value=b.defaultValue}}function J(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function K(a,b){this.clear(),this.keyBuffer=[a||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!b}function L(a){this.registers=a,this.unnamedRegister=a['"']=new K,a["."]=new K,a[":"]=new K}function Q(a,b,d){var e=Math.min(Math.max(a.firstLine(),b.line),a.lastLine()),f=Z(a,e)-1;f=d?f+1:f;var g=Math.min(Math.max(0,b.ch),f);return c(e,g)}function R(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function S(a,b,d){return c(a.line+b,a.ch+d)}function T(a,b){for(var c=0;c<a.length;c++)if(a[c]!=b[c]&&"character"!=b[c])return!1;return!0}function U(a,b,c){return function(){for(var d=0;c>d;d++)b(a)}}function V(a){return c(a.line,a.ch)}function W(a,b){return a.ch==b.ch&&a.line==b.line}function X(a,b){return a.line<b.line?!0:a.line==b.line&&a.ch<b.ch?!0:!1}function Y(a,b,c){var d=X(a,b),e=X(b,c);return d&&e}function Z(a,b){return a.getLine(b).length}function $(a){return a.split("").reverse().join("")}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function ab(a){return a.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function bb(b){b.off("mousedown",bb);var c=b.state.vim;c.lastSelection={curStart:c.marks["<"].find(),curEnd:c.marks[">"].find(),visualMode:c.visualMode,visualLine:c.visualLine},c.visualMode=!1,c.visualLine=!1;var d=b.getCursor("anchor"),e=b.getCursor("head");W(d,e)||b.setCursor(Q(b,e)),a.signal(b,"vim-mode-change",{mode:"normal"})}function cb(a,b,c){var d=a.getRange(b,c);if(/\n\s*$/.test(d)){var e=d.split("\n");e.pop();for(var f,f=e.pop();e.length>0&&f&&w(f);f=e.pop())c.line--,c.ch=0;f?(c.line--,c.ch=Z(a,c.line)):c.ch=0}}function db(a,b,c){b.ch=0,c.ch=0,c.line++}function eb(a){if(!a)return 0;var b=a.search(/\S/);return-1==b?a.length:b}function fb(a,b,d,e,f){var k,g=a.getCursor(),h=a.getLine(g.line),i=g.ch,j=h.substring(i);if(k=f?j.search(/\w/):j.search(/\S/),-1==k)return null;i+=k,j=h.substring(i);var m,l=h.substring(0,i);m=e?/^\S+/:/\w/.test(h.charAt(i))?/^\w+/:/^[^\w\s]+/;var n=m.exec(j),o=i,p=i+n[0].length,q=$(l),r=m.exec(q);if(r&&(o-=r[0].length),b){var s=h.substring(p),t=s.match(/^\s*/)[0].length;if(t>0)p+=t;else{var u=q.length-o,v=q.substring(u),w=v.match(/^\s*/)[0].length;o-=w}}return{start:c(g.line,o),end:c(g.line,p)}}function gb(a,b,c){W(b,c)||G.jumpList.add(a,b,c)}function hb(a,b){G.lastChararacterSearch.increment=a,G.lastChararacterSearch.forward=b.forward,G.lastChararacterSearch.selectedCharacter=b.selectedCharacter}function kb(a,b,d,e){var f=V(a.getCursor()),g=d?1:-1,h=d?a.lineCount():-1,i=f.ch,j=f.line,k=a.getLine(j),l={lineText:k,nextCh:k.charAt(i),lastCh:null,index:i,symb:e,reverseSymb:(d?{")":"(","}":"{"}:{"(":")","{":"}"})[e],forward:d,depth:0,curMoveThrough:!1},m=ib[e];
if(!m)return f;var n=jb[m].init,o=jb[m].isComplete;for(n&&n(l);j!==h&&b;){if(l.index+=g,l.nextCh=l.lineText.charAt(l.index),!l.nextCh){if(j+=g,l.lineText=a.getLine(j)||"",g>0)l.index=0;else{var p=l.lineText.length;l.index=p>0?p-1:0}l.nextCh=l.lineText.charAt(l.index)}o(l)&&(f.line=j,f.ch=l.index,b--)}return l.nextCh||l.curMoveThrough?c(j,l.index):f}function lb(a,b,c,d,e){var f=b.line,g=b.ch,j=a.getLine(f),k=c?1:-1,l=d?i:h;if(e&&""==j){if(f+=k,j=a.getLine(f),!r(a,f))return null;g=c?0:j.length}for(;;){if(e&&""==j)return{from:0,to:0,line:f};for(var m=k>0?j.length:-1,n=m,o=m;g!=m;){for(var p=!1,q=0;q<l.length&&!p;++q)if(l[q].test(j.charAt(g))){for(n=g;g!=m&&l[q].test(j.charAt(g));)g+=k;if(o=g,p=n!=o,n==b.ch&&f==b.line&&o==n+k)continue;return{from:Math.min(n,o+1),to:Math.max(n,o),line:f}}p||(g+=k)}if(f+=k,!r(a,f))return null;j=a.getLine(f),g=k>0?0:j.length}throw new Error("The impossible happened.")}function mb(a,b,d,e,f){var g=a.getCursor(),h=V(g),i=[];(d&&!e||!d&&e)&&b++;for(var j=!(d&&e),k=0;b>k;k++){var l=lb(a,g,d,f,j);if(!l){var m=Z(a,a.lastLine());i.push(d?{line:a.lastLine(),from:m,to:m}:{line:0,from:0,to:0});break}i.push(l),g=c(l.line,d?l.to-1:l.from)}var n=i.length!=b,o=i[0],p=i.pop();return d&&!e?(n||o.from==h.ch&&o.line==h.line||(p=i.pop()),c(p.line,p.from)):d&&e?c(p.line,p.to-1):!d&&e?(n||o.to==h.ch&&o.line==h.line||(p=i.pop()),c(p.line,p.to)):c(p.line,p.from)}function nb(a,b,d,e){for(var h,f=a.getCursor(),g=f.ch,i=0;b>i;i++){var j=a.getLine(f.line);if(h=qb(g,j,e,d,!0),-1==h)return null;g=h}return c(a.getCursor().line,h)}function ob(a,b){var d=a.getCursor().line;return Q(a,c(d,b-1))}function pb(a,b,c,d){x(c,p)&&(b.marks[c]&&b.marks[c].clear(),b.marks[c]=a.setBookmark(d))}function qb(a,b,c,d,e){var f;return d?(f=b.indexOf(c,a+1),-1==f||e||(f-=1)):(f=b.lastIndexOf(c,a-1),-1==f||e||(f+=1)),f}function rb(a,b,d){var f,g,e=a.getCursor(),h={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/}[b],i={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[b],j=a.getLine(e.line).charAt(e.ch),k=j===i?1:0;if(f=a.scanForBracket(c(e.line,e.ch+k),-1,null,{bracketRegex:h}),g=a.scanForBracket(c(e.line,e.ch+k),1,null,{bracketRegex:h}),!f||!g)return{start:e,end:e};if(f=f.pos,g=g.pos,f.line==g.line&&f.ch>g.ch||f.line>g.line){var l=f;f=g,g=l}return d?g.ch+=1:f.ch+=1,{start:f,end:g}}function sb(a,b,d){var h,i,j,k,e=V(a.getCursor()),f=a.getLine(e.line),g=f.split(""),l=g.indexOf(b);if(e.ch<l?e.ch=l:l<e.ch&&g[e.ch]==b&&(i=e.ch,--e.ch),g[e.ch]!=b||i)for(j=e.ch;j>-1&&!h;j--)g[j]==b&&(h=j+1);else h=e.ch+1;if(h&&!i)for(j=h,k=g.length;k>j&&!i;j++)g[j]==b&&(i=j);return h&&i?(d&&(--h,++i),{start:c(e.line,h),end:c(e.line,i)}):{start:e,end:e}}function tb(){}function ub(a){var b=a.state.vim;return b.searchState_||(b.searchState_=new tb)}function vb(a,b,c,d,e){a.openDialog?a.openDialog(b,d,{bottom:!0,value:e.value,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp}):d(prompt(c,""))}function wb(a){for(var b=!1,c=[],d=0;d<a.length;d++){var e=a.charAt(d);b||"/"!=e||c.push(d),b=!b&&"\\"==e}return c}function xb(a){for(var b=["|","(",")","{"],c=["}"],d=!1,e=[],f=-1;f<a.length;f++){var g=a.charAt(f)||"",h=a.charAt(f+1)||"",i=-1!=b.indexOf(h);d?("\\"===g&&i||e.push(g),d=!1):"\\"===g?(d=!0,-1!=c.indexOf(h)&&(i=!0),i&&"\\"!==h||e.push(g)):(e.push(g),i&&"\\"!==h&&e.push("\\"))}return e.join("")}function yb(a){for(var b=!1,c=[],d=-1;d<a.length;d++){var e=a.charAt(d)||"",f=a.charAt(d+1)||"";b?(c.push(e),b=!1):"\\"===e?(b=!0,u(f)||"$"===f?c.push("$"):"/"!==f&&"\\"!==f&&c.push("\\")):("$"===e&&c.push("$"),c.push(e),"/"===f&&c.push("\\"))}return c.join("")}function zb(b){for(var c=new a.StringStream(b),d=[];!c.eol();){for(;c.peek()&&"\\"!=c.peek();)d.push(c.next());c.match("\\/",!0)?d.push("/"):c.match("\\\\",!0)?d.push("\\"):d.push(c.next())}return d.join("")}function Ab(a,b,c){if(a instanceof RegExp)return a;var e,f,d=wb(a);if(d.length){e=a.substring(0,d[0]);var g=a.substring(d[0]);f=-1!=g.indexOf("i")}else e=a;if(!e)return null;B("pcre")||(e=xb(e)),c&&(b=/^[^A-Z]*$/.test(e));var h=new RegExp(e,b||f?"i":void 0);return h}function Bb(a,b){a.openNotification?a.openNotification('<span style="color: red">'+b+"</span>",{bottom:!0,duration:5e3}):alert(b)}function Cb(a,b){var c="";return a&&(c+='<span style="font-family: monospace">'+a+"</span>"),c+='<input type="text"/> <span style="color: #888">',b&&(c+='<span style="color: #888">',c+=b,c+="</span>"),c}function Eb(a,b){var c=(b.prefix||"")+" "+(b.desc||""),d=Cb(b.prefix,b.desc);vb(a,d,c,b.onClose,b)}function Fb(a,b){if(a instanceof RegExp&&b instanceof RegExp){for(var c=["global","multiline","ignoreCase","source"],d=0;d<c.length;d++){var e=c[d];if(a[e]!==b[e])return!1}return!0}return!1}function Gb(a,b,c,d){if(b){var e=ub(a),f=Ab(b,!!c,!!d);if(f)return Ib(a,f),Fb(f,e.getQuery())?f:(e.setQuery(f),f)}}function Hb(a){if("^"==a.source.charAt(0))var b=!0;return{token:function(c){if(b&&!c.sol())return c.skipToEnd(),void 0;var d=c.match(a,!1);if(d)return 0==d[0].length?(c.next(),"searching"):c.sol()||(c.backUp(1),a.exec(c.next()+d[0]))?(c.match(a),"searching"):(c.next(),null);for(;!c.eol()&&(c.next(),!c.match(a,!1)););},query:a}}function Ib(a,b){var c=ub(a).getOverlay();c&&b==c.query||(c&&a.removeOverlay(c),c=Hb(b),a.addOverlay(c),ub(a).setOverlay(c))}function Jb(a,b,d,e){return void 0===e&&(e=1),a.operation(function(){for(var f=a.getCursor(),g=a.getSearchCursor(d,f),h=0;e>h;h++){var i=g.find(b);if(0==h&&i&&W(g.from(),f)&&(i=g.find(b)),!i&&(g=a.getSearchCursor(d,b?c(a.lastLine()):c(a.firstLine(),0)),!g.find(b)))return}return g.from()})}function Kb(a){a.removeOverlay(ub(a).getOverlay()),ub(a).setOverlay(null)}function Lb(a,b,c){return"number"!=typeof a&&(a=a.line),b instanceof Array?x(a,b):c?a>=b&&c>=a:a==b}function Mb(a){var b=a.getScrollInfo(),c=6,d=10,e=a.coordsChar({left:0,top:c+b.top},"local"),f=b.clientHeight-d+b.top,g=a.coordsChar({left:0,top:f},"local");return{top:e.line,bottom:g.line}}function Ob(a){for(var b,c,d=[];a&&(c=/<\w+-.+?>|<\w+>|./.exec(a),null!==c);)b=c[0],a=a.substring(c.index+b.length),d.push(b);return d}function Rb(b,c,d,e,f,g,h){function k(){b.operation(function(){for(;!i;)l(),m();n()})}function l(){var a=b.getRange(f.from(),f.to()),c=a.replace(g,h);f.replace(c)}function m(){var a=f.findNext();a?Lb(f.from(),d,e)?(b.scrollIntoView(f.from(),30),b.setSelection(f.from(),f.to()),j=f.from(),i=!1):i=!0:i=!0}function n(a){if(a&&a(),b.focus(),j){b.setCursor(j);var c=b.state.vim;c.exMode=!1,c.lastHPos=c.lastHSPos=j.ch}}function o(c,d,e){a.e_stop(c);var f=a.keyName(c);switch(f){case"Y":l(),m();break;case"N":m();break;case"A":b.operation(k);break;case"L":l();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":n(e)}i&&n(e)}b.state.vim.exMode=!0;var i=!1,j=f.from();return m(),i?(Bb(b,"No matches for "+g.source),void 0):c?(Eb(b,{prefix:"replace with <strong>"+h+"</strong> (y/n/a/q/l)",onKeyDown:o}),void 0):(k(),void 0)}function Sb(){function b(a,b){var c=a;v(c)&&"Ctrl"==b&&(c=c.toLowerCase()),b&&(c=b.charAt(0)+"-"+c);var d={Enter:"CR",Backspace:"BS",Delete:"Del"}[c];return c=d?d:c,c=c.length>1?"<"+c+">":c}function c(b){return function(c){a.Vim.handleKey(c,b)}}function e(a,e){for(var f=0;f<a.length;f++){var g=a[f];e||1!=g.length||(g="'"+g+"'");var h=b(a[f],e),i=e?e+"-"+g:g;d[i]=c(h)}}var d={nofallthrough:!0,style:"fat-cursor"};return e(k),e(l),e(k,"Ctrl"),e(n),e(n,"Ctrl"),e(m),e(m,"Ctrl"),e(o),e(o,"Ctrl"),d}function Tb(b){var c=b.state.vim,d=G.macroModeState,e=G.registerController.getRegister("."),f=d.isPlaying;f||(b.off("change",Yb),a.off(b.getInputField(),"keydown",_b)),!f&&c.insertModeRepeat>1&&(ac(b,c,c.insertModeRepeat-1,!0),c.lastEditInputState.repeatOverride=c.insertModeRepeat),delete c.insertModeRepeat,c.insertMode=!1,b.setCursor(b.getCursor().line,b.getCursor().ch-1),b.setOption("keyMap","vim"),b.setOption("disableInput",!0),b.toggleOverwrite(!1),e.setText(d.lastInsertModeChanges.changes.join("")),a.signal(b,"vim-mode-change",{mode:"normal"}),d.isRecording&&Wb(d)}function Ub(b,c,d,e){var f=G.registerController.getRegister(e),g=f.keyBuffer,h=0;d.isPlaying=!0,d.replaySearchQueries=f.searchQueries.slice(0);for(var i=0;i<g.length;i++)for(var k,l,j=g[i];j;)k=/<\w+-.+?>|<\w+>|./.exec(j),l=k[0],j=j.substring(k.index+l.length),a.Vim.handleKey(b,l),c.insertMode&&(bc(b,f.insertModeChanges[h++].changes,1),Tb(b));d.isPlaying=!1}function Vb(a,b){if(!a.isPlaying){var c=a.latestRegister,d=G.registerController.getRegister(c);d&&d.pushText(b)}}function Wb(a){if(!a.isPlaying){var b=a.latestRegister,c=G.registerController.getRegister(b);c&&c.pushInsertModeChanges(a.lastInsertModeChanges)}}function Xb(a,b){if(!a.isPlaying){var c=a.latestRegister,d=G.registerController.getRegister(c);d&&d.pushSearchQuery(b)}}function Yb(a,b){var c=G.macroModeState,d=c.lastInsertModeChanges;if(!c.isPlaying)for(;b;){if(d.expectCursorActivityForChange=!0,"+input"==b.origin||"paste"==b.origin||void 0===b.origin){var e=b.text.join("\n");d.changes.push(e)}b=b.next}}function Zb(a,b){var c=a.state.vim;if(c.insertMode){var d=G.macroModeState;if(d.isPlaying)return;var e=d.lastInsertModeChanges;e.expectCursorActivityForChange?e.expectCursorActivityForChange=!1:e.changes=[]}else"*mouse"==b&&(c.lastHPos=a.doc.getCursor().ch)}function $b(a){this.keyName=a}function _b(b){function f(){return d.changes.push(new $b(e)),!0}var c=G.macroModeState,d=c.lastInsertModeChanges,e=a.keyName(b);(-1!=e.indexOf("Delete")||-1!=e.indexOf("Backspace"))&&a.lookupKey(e,["vim-insert"],f)}function ac(a,b,c,d){function h(){f?M.processAction(a,b,b.lastEditActionCommand):M.evalInput(a,b)}function i(c){if(e.lastInsertModeChanges.changes.length>0){c=b.lastEditActionCommand?c:1;var d=e.lastInsertModeChanges;e.lastInsertModeChanges={},bc(a,d.changes,c),e.lastInsertModeChanges=d}}var e=G.macroModeState;e.isPlaying=!0;var f=!!b.lastEditActionCommand,g=b.inputState;if(b.inputState=b.lastEditInputState,f&&b.lastEditActionCommand.interlaceInsertRepeat)for(var j=0;c>j;j++)h(),i(1);else d||h(),i(c);b.inputState=g,b.insertMode&&!d&&Tb(a),e.isPlaying=!1}function bc(b,c,d){function e(c){return"string"==typeof c?a.commands[c](b):c(b),!0}for(var f=0;d>f;f++)for(var g=0;g<c.length;g++){var h=c[g];if(h instanceof $b)a.lookupKey(h.keyName,["vim-insert"],e);else{var i=b.getCursor();b.replaceRange(h,i,i)}}}a.defineOption("vimMode",!1,function(b,c){c?(b.setOption("keyMap","vim"),b.setOption("disableInput",!0),a.signal(b,"vim-mode-change",{mode:"normal"}),b.on("beforeSelectionChange",e),b.on("cursorActivity",Zb),F(b),a.on(b.getInputField(),"paste",f(b))):b.state.vim&&(b.setOption("keyMap","default"),b.setOption("disableInput",!1),b.off("beforeSelectionChange",e),b.off("cursorActivity",Zb),a.off(b.getInputField(),"paste",f(b)),b.state.vim=null)});var g=/[\d]/,h=[/\w/,/[^\w\s]/],i=[/\S/],k=j(65,26),l=j(97,26),m=j(48,10),n="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split(""),o=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"],p=[].concat(k,l,m,["<",">"]),q=[].concat(k,l,m,["-",'"',".",":"]),y={},C=function(){function f(f,g,h){function k(c){var d=++b%a,g=e[d];g&&g.clear(),e[d]=f.setBookmark(c)}var i=b%a,j=e[i];if(j){var l=j.find();l&&!W(l,g)&&k(g)}else k(g);k(h),c=b,d=b-a+1,0>d&&(d=0)}function g(f,g){b+=g,b>c?b=c:d>b&&(b=d);var h=e[(a+b)%a];if(h&&!h.find()){var j,i=g>0?1:-1,k=f.getCursor();do if(b+=i,h=e[(a+b)%a],h&&(j=h.find())&&!W(k,j))break;while(c>b&&b>d)}return h}var a=100,b=-1,c=0,d=0,e=new Array(a);return{cachedCursor:void 0,add:f,move:g}},D=function(a){return a?{changes:a.changes,expectCursorActivityForChange:a.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};E.prototype={exitMacroRecordMode:function(){var a=G.macroModeState;a.onRecordingDone(),a.onRecordingDone=void 0,a.isRecording=!1},enterMacroRecordMode:function(a,b){var c=G.registerController.getRegister(b);c&&(c.clear(),this.latestRegister=b,this.onRecordingDone=a.openDialog("(recording)["+b+"]",null,{bottom:!0}),this.isRecording=!0)}};var G,I={buildKeyMap:function(){},getRegisterController:function(){return G.registerController},resetVimGlobalState_:H,getVimGlobalState_:function(){return G},maybeInitVimState_:F,InsertModeKey:$b,map:function(a,b,c){Qb.map(a,b,c)},setOption:A,getOption:B,defineOption:z,defineEx:function(a,b,c){if(0!==a.indexOf(b))throw new Error('(Vim.defineEx) "'+b+'" is not a prefix of "'+a+'", command not registered');Pb[a]=c,Qb.commandMap_[b]={name:a,shortName:b,type:"api"}},handleKey:function(c,d){var e,f=F(c),g=G.macroModeState;if(g.isRecording&&"q"==d)return g.exitMacroRecordMode(),f.inputState=new J,void 0;if("<Esc>"==d)return f.inputState=new J,f.visualMode&&bb(c),void 0;if(f.visualMode||W(c.getCursor("head"),c.getCursor("anchor"))||(f.visualMode=!0,f.visualLine=!1,a.signal(c,"vim-mode-change",{mode:"visual"}),c.on("mousedown",bb)),("0"!=d||"0"==d&&0===f.inputState.getRepeat())&&(e=M.matchCommand(d,b,f)),!e)return u(d)&&f.inputState.pushRepeatDigit(d),g.isRecording&&Vb(g,d),void 0;if("keyToKey"==e.type)for(var h=0;h<e.toKeys.length;h++)this.handleKey(c,e.toKeys[h]);else g.isRecording&&Vb(g,d),M.processCommand(c,f,e)},handleEx:function(a,b){Qb.processCommand(a,b)}};J.prototype.pushRepeatDigit=function(a){this.operator?this.motionRepeat=this.motionRepeat.concat(a):this.prefixRepeat=this.prefixRepeat.concat(a)},J.prototype.getRepeat=function(){var a=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(a=1,this.prefixRepeat.length>0&&(a*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(a*=parseInt(this.motionRepeat.join(""),10))),a},K.prototype={setText:function(a,b){this.keyBuffer=[a||""],this.linewise=!!b},pushText:function(a,b){b&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(a)},pushInsertModeChanges:function(a){this.insertModeChanges.push(D(a))},pushSearchQuery:function(a){this.searchQueries.push(a)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},L.prototype={pushText:function(a,b,c,d){d&&"\n"==c.charAt(0)&&(c=c.slice(1)+"\n"),d&&"\n"!==c.charAt(c.length-1)&&(c+="\n");var e=this.isValidRegister(a)?this.getRegister(a):null;if(!e){switch(b){case"yank":this.registers["0"]=new K(c,d);break;case"delete":case"change":-1==c.indexOf("\n")?this.registers["-"]=new K(c,d):(this.shiftNumericRegisters_(),this.registers["1"]=new K(c,d))}return this.unnamedRegister.setText(c,d),void 0}var f=v(a);f?e.pushText(c,d):e.setText(c,d),this.unnamedRegister.setText(e.toString(),d)},getRegister:function(a){return this.isValidRegister(a)?(a=a.toLowerCase(),this.registers[a]||(this.registers[a]=new K),this.registers[a]):this.unnamedRegister},isValidRegister:function(a){return a&&x(a,q)},shiftNumericRegisters_:function(){for(var a=9;a>=2;a--)this.registers[a]=this.getRegister(""+(a-1))}};var M={matchCommand:function(a,b,c){function j(b){return e.length<b.keys.length?(d.keyBuffer.push(a),null):("character"==b.keys[e.length-1]&&(d.selectedCharacter=g),d.keyBuffer=[],b)}for(var g,d=c.inputState,e=d.keyBuffer.concat(a),f=[],h=0;h<b.length;h++){var i=b[h];if(T(e,i.keys)){if(d.operator&&"action"==i.type)continue;if("character"==i.keys[e.length-1]&&(g=e[e.length-1],g.length>1))switch(g){case"<CR>":g="\n";break;case"<Space>":g=" ";break;default:continue}f.push(i)}}if(f.length){if(1==f.length)return j(f[0]);for(var l,k=c.visualMode?"visual":"normal",h=0;h<f.length;h++){var m=f[h];if(m.context==k){l=m;break}l||m.context||(l=m)}return j(l)}return d.keyBuffer=[],null},processCommand:function(a,b,c){switch(b.inputState.repeatOverride=c.repeatOverride,c.type){case"motion":this.processMotion(a,b,c);break;case"operator":this.processOperator(a,b,c);break;case"operatorMotion":this.processOperatorMotion(a,b,c);break;case"action":this.processAction(a,b,c);break;case"search":this.processSearch(a,b,c);break;case"ex":case"keyToEx":this.processEx(a,b,c)}},processMotion:function(a,b,c){b.inputState.motion=c.motion,b.inputState.motionArgs=R(c.motionArgs),this.evalInput(a,b)},processOperator:function(a,b,c){var d=b.inputState;if(d.operator){if(d.operator==c.operator)return d.motion="expandToLine",d.motionArgs={linewise:!0},this.evalInput(a,b),void 0;b.inputState=new J}d.operator=c.operator,d.operatorArgs=R(c.operatorArgs),b.visualMode&&this.evalInput(a,b)},processOperatorMotion:function(a,b,c){var d=b.visualMode,e=R(c.operatorMotionArgs);e&&d&&e.visualLine&&(b.visualLine=!0),this.processOperator(a,b,c),d||this.processMotion(a,b,c)},processAction:function(a,b,c){var d=b.inputState,e=d.getRepeat(),f=!!e,g=R(c.actionArgs)||{};d.selectedCharacter&&(g.selectedCharacter=d.selectedCharacter),c.operator&&this.processOperator(a,b,c),c.motion&&this.processMotion(a,b,c),(c.motion||c.operator)&&this.evalInput(a,b),g.repeat=e||1,g.repeatIsExplicit=f,g.registerName=d.registerName,b.inputState=new J,b.lastMotion=null,c.isEdit&&this.recordLastEdit(b,d,c),P[c.action](a,g,b)},processSearch:function(b,c,d){function j(a,e,f){try{Gb(b,a,e,f)}catch(g){return Bb(b,"Invalid regex: "+a),void 0}M.processMotion(b,c,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:d.searchArgs.toJumplist}})}function k(a){b.scrollTo(i.left,i.top),j(a,!0,!0);var c=G.macroModeState;c.isRecording&&Xb(c,a)}function l(a,c){var d;try{d=Gb(b,c,!0,!0)}catch(f){}d?b.scrollIntoView(Jb(b,!e,d),30):(Kb(b),b.scrollTo(i.left,i.top))}function m(c,d,e){var f=a.keyName(c);("Esc"==f||"Ctrl-C"==f||"Ctrl-["==f)&&(Gb(b,h),Kb(b),b.scrollTo(i.left,i.top),a.e_stop(c),e(),b.focus())}if(b.getSearchCursor){var e=d.searchArgs.forward,f=d.searchArgs.wholeWordOnly;ub(b).setReversed(!e);var g=e?"/":"?",h=ub(b).getQuery(),i=b.getScrollInfo();switch(d.searchArgs.querySrc){case"prompt":var n=G.macroModeState;if(n.isPlaying){var o=n.replaySearchQueries.shift();j(o,!0,!1)}else Eb(b,{onClose:k,prefix:g,desc:Db,onKeyUp:l,onKeyDown:m});break;case"wordUnderCursor":var p=fb(b,!1,!0,!1,!0),q=!0;if(p||(p=fb(b,!1,!0,!1,!1),q=!1),!p)return;var o=b.getLine(p.start.line).substring(p.start.ch,p.end.ch);o=q&&f?"\\b"+o+"\\b":ab(o),G.jumpList.cachedCursor=b.getCursor(),b.setCursor(p.start),j(o,!0,!1)}}},processEx:function(b,c,d){function e(a){Qb.processCommand(b,a)}function f(c,d,e){var f=a.keyName(c);("Esc"==f||"Ctrl-C"==f||"Ctrl-["==f)&&(a.e_stop(c),e(),b.focus())}"keyToEx"==d.type?Qb.processCommand(b,d.exArgs.input):c.visualMode?Eb(b,{onClose:e,prefix:":",value:"'<,'>",onKeyDown:f}):Eb(b,{onClose:e,prefix:":",onKeyDown:f})},evalInput:function(a,b){var n,o,d=b.inputState,e=d.motion,f=d.motionArgs||{},g=d.operator,h=d.operatorArgs||{},i=d.registerName,j=V(a.getCursor("head")),k=V(a.getCursor("anchor")),l=V(j),m=V(l);if(g&&this.recordLastEdit(b,d),o=void 0!==d.repeatOverride?d.repeatOverride:d.getRepeat(),o>0&&f.explicitRepeat?f.repeatIsExplicit=!0:(f.noRepeat||!f.explicitRepeat&&0===o)&&(o=1,f.repeatIsExplicit=!1),d.selectedCharacter&&(f.selectedCharacter=h.selectedCharacter=d.selectedCharacter),f.repeat=o,b.inputState=new J,e){var p=N[e](a,f,b);if(b.lastMotion=N[e],!p)return;if(f.toJumplist){var q=G.jumpList,r=q.cachedCursor;r?(gb(a,r,p),delete q.cachedCursor):gb(a,m,p)}if(p instanceof Array?(l=p[0],n=p[1]):n=p,n||(n=c(l.line,l.ch)),b.visualMode){if(X(k,j)&&(W(k,n)||X(n,k))?k.ch+=1:X(j,k)&&(W(k,n)||X(k,n))&&(k.ch-=1),j=n,k=p instanceof Array?l:k,b.visualLine)if(X(k,j)){k.ch=0;var s=a.lastLine();j.line>s&&(j.line=s),j.ch=Z(a,j.line)}else j.ch=0,k.ch=Z(a,k.line);a.setSelection(k,j),pb(a,b,"<",X(k,j)?k:j),pb(a,b,">",X(k,j)?j:k)}else g||(n=Q(a,n),a.setCursor(n.line,n.ch))}if(g){var t=!1;if(b.lastMotion=null,h.repeat=o,b.visualMode&&(l=k,n=j,f.inclusive=!0),X(n,l)){var u=l;l=n,n=u,t=!0}!f.inclusive||b.visualMode&&t||n.ch++;var v=f.linewise||b.visualMode&&b.visualLine;v?db(a,l,n):f.forward&&cb(a,l,n),h.registerName=i,h.linewise=v,O[g](a,h,b,l,n,m),b.visualMode&&bb(a)}},recordLastEdit:function(a,b,c){var d=G.macroModeState;d.isPlaying||(a.lastEditInputState=b,a.lastEditActionCommand=c,d.lastInsertModeChanges.changes=[],d.lastInsertModeChanges.expectCursorActivityForChange=!1)}},N={moveToTopLine:function(a,b){var d=Mb(a).top+b.repeat-1;return c(d,eb(a.getLine(d)))},moveToMiddleLine:function(a){var b=Mb(a),d=Math.floor(.5*(b.top+b.bottom));return c(d,eb(a.getLine(d)))},moveToBottomLine:function(a,b){var d=Mb(a).bottom-b.repeat+1;return c(d,eb(a.getLine(d)))},expandToLine:function(a,b){var d=a.getCursor();return c(d.line+b.repeat-1,1/0)},findNext:function(a,b){var c=ub(a),d=c.getQuery();if(d){var e=!b.forward;return e=c.isReversed()?!e:e,Ib(a,d),Jb(a,e,d,b.repeat)}},goToMark:function(a,b,c){var d=c.marks[b.selectedCharacter];if(d){var e=d.find();return b.linewise?{line:e.line,ch:eb(a.getLine(e.line))}:e}return null},moveToOtherHighlightedEnd:function(a){var b=V(a.getCursor("head")),c=V(a.getCursor("anchor"));return X(c,b)?b.ch+=1:X(b,c)&&(c.ch-=1),[b,c]},jumpToMark:function(a,b,d){for(var e=a.getCursor(),f=0;f<b.repeat;f++){var g=e;for(var h in d.marks)if(s(h)){var i=d.marks[h].find(),j=b.forward?X(i,g):X(g,i);if(!(j||b.linewise&&i.line==g.line)){var k=W(g,e),l=b.forward?Y(g,i,e):Y(e,i,g);(k||l)&&(e=i)}}}return b.linewise&&(e=c(e.line,eb(a.getLine(e.line)))),e},moveByCharacters:function(a,b){var d=a.getCursor(),e=b.repeat,f=b.forward?d.ch+e:d.ch-e;return c(d.line,f)},moveByLines:function(a,b,d){var e=a.getCursor(),f=e.ch;switch(d.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:f=d.lastHPos;break;default:d.lastHPos=f}var g=b.repeat+(b.repeatOffset||0),h=b.forward?e.line+g:e.line-g,i=a.firstLine(),j=a.lastLine();return i>h&&e.line==i||h>j&&e.line==j?void 0:(b.toFirstChar&&(f=eb(a.getLine(h)),d.lastHPos=f),d.lastHSPos=a.charCoords(c(h,f),"div").left,c(h,f))},moveByDisplayLines:function(a,b,d){var e=a.getCursor();switch(d.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:d.lastHSPos=a.charCoords(e,"div").left}var f=b.repeat,g=a.findPosV(e,b.forward?f:-f,"line",d.lastHSPos);if(g.hitSide)if(b.forward)var h=a.charCoords(g,"div"),i={top:h.top+8,left:d.lastHSPos},g=a.coordsChar(i,"div");else{var j=a.charCoords(c(a.firstLine(),0),"div");j.left=d.lastHSPos,g=a.coordsChar(j,"div")}return d.lastHPos=g.ch,g},moveByPage:function(a,b){var c=a.getCursor(),d=b.repeat;a.moveV(b.forward?d:-d,"page");var e=a.getCursor();return a.setCursor(c),e},moveByParagraph:function(a,b){for(var d=a.getCursor().line,e=b.repeat,f=b.forward?1:-1,g=0;e>g&&!(!b.forward&&d===a.firstLine()||b.forward&&d==a.lastLine());g++)for(d+=f;d!==a.firstLine()&&d!=a.lastLine()&&a.getLine(d);)d+=f;return c(d,0)},moveByScroll:function(a,b,c){var d=a.getScrollInfo(),e=null,f=b.repeat;f||(f=d.clientHeight/(2*a.defaultTextHeight()));var g=a.charCoords(a.getCursor(),"local");b.repeat=f;var e=N.moveByDisplayLines(a,b,c);if(!e)return null;var h=a.charCoords(e,"local");return a.scrollTo(null,d.top+h.top-g.top),e},moveByWords:function(a,b){return mb(a,b.repeat,!!b.forward,!!b.wordEnd,!!b.bigWord)},moveTillCharacter:function(a,b){var c=b.repeat,d=nb(a,c,b.forward,b.selectedCharacter),e=b.forward?-1:1;return hb(e,b),d?(d.ch+=e,d):null},moveToCharacter:function(a,b){var c=b.repeat;return hb(0,b),nb(a,c,b.forward,b.selectedCharacter)||a.getCursor()},moveToSymbol:function(a,b){var c=b.repeat;return kb(a,c,b.forward,b.selectedCharacter)||a.getCursor()},moveToColumn:function(a,b,c){var d=b.repeat;return c.lastHPos=d-1,c.lastHSPos=a.charCoords(a.getCursor(),"div").left,ob(a,d)},moveToEol:function(a,b,d){var e=a.getCursor();d.lastHPos=1/0;var f=c(e.line+b.repeat-1,1/0),g=a.clipPos(f);return g.ch--,d.lastHSPos=a.charCoords(g,"div").left,f},moveToFirstNonWhiteSpaceCharacter:function(a){var b=a.getCursor();return c(b.line,eb(a.getLine(b.line)))},moveToMatchedSymbol:function(a){var g,b=a.getCursor(),d=b.line,e=b.ch,f=a.getLine(d);do if(g=f.charAt(e++),g&&t(g)){var h=["string","comment"],i=a.getTokenTypeAt(c(d,e));if(h.indexOf(i)<0)break}while(g);if(g){var j=a.findMatchingBracket(c(d,e-1));return j.to}return b},moveToStartOfLine:function(a){var b=a.getCursor();return c(b.line,0)},moveToLineOrEdgeOfDocument:function(a,b){var d=b.forward?a.lastLine():a.firstLine();return b.repeatIsExplicit&&(d=b.repeat-a.getOption("firstLineNumber")),c(d,eb(a.getLine(d)))},textObjectManipulation:function(a,b){var c={"(":")",")":"(","{":"}","}":"{","[":"]","]":"["},d={"'":!0,'"':!0},e=b.selectedCharacter;"b"==e?e="(":"B"==e&&(e="{");var g,f=!b.textObjectInner;if(c[e])g=rb(a,e,f);else if(d[e])g=sb(a,e,f);else if("W"===e)g=fb(a,f,!0,!0);else{if("w"!==e)return null;g=fb(a,f,!0,!1)}return[g.start,g.end]},repeatLastCharacterSearch:function(a,b){var c=G.lastChararacterSearch,d=b.repeat,e=b.forward===c.forward,f=(c.increment?1:0)*(e?-1:1);a.moveH(-f,"char"),b.inclusive=e?!0:!1;var g=nb(a,d,e,c.selectedCharacter);return g?(g.ch+=f,g):(a.moveH(f,"char"),a.getCursor())}},O={change:function(a,b,c,d,e){if(G.registerController.pushText(b.registerName,"change",a.getRange(d,e),b.linewise),b.linewise){var f=e.line>a.lastLine()?"":"\n";a.replaceRange(f,d,e),a.indentLine(d.line,"smart"),d.ch=null}else{var g=a.getRange(d,e);if(!w(g)){var h=/\s+$/.exec(g);h&&(e=S(e,0,-h[0].length))}a.replaceRange("",d,e)}P.enterInsertMode(a,{},a.state.vim),a.setCursor(d)},"delete":function(a,b,c,d,e){b.linewise&&e.line>a.lastLine()&&d.line>a.firstLine()&&(d.line--,d.ch=Z(a,d.line)),G.registerController.pushText(b.registerName,"delete",a.getRange(d,e),b.linewise),a.replaceRange("",d,e),b.linewise?a.setCursor(N.moveToFirstNonWhiteSpaceCharacter(a)):a.setCursor(d)},indent:function(a,b,c,d,e){var f=d.line,g=e.line,h=c.visualMode?b.repeat:1;b.linewise&&g--;for(var i=f;g>=i;i++)for(var j=0;h>j;j++)a.indentLine(i,b.indentRight);a.setCursor(d),a.setCursor(N.moveToFirstNonWhiteSpaceCharacter(a))},swapcase:function(a,b,c,d,e,f){for(var g=a.getRange(d,e),h="",i=0;i<g.length;i++){var j=g.charAt(i);h+=v(j)?j.toLowerCase():j.toUpperCase()}a.replaceRange(h,d,e),b.shouldMoveCursor||a.setCursor(f)},yank:function(a,b,c,d,e,f){G.registerController.pushText(b.registerName,"yank",a.getRange(d,e),b.linewise),a.setCursor(f)}},P={jumpListWalk:function(a,b,c){if(!c.visualMode){var d=b.repeat,e=b.forward,f=G.jumpList,g=f.move(a,e?d:-d),h=g?g.find():void 0;h=h?h:a.getCursor(),a.setCursor(h)}},scroll:function(a,b,c){if(!c.visualMode){var d=b.repeat||1,e=a.defaultTextHeight(),f=a.getScrollInfo().top,g=e*d,h=b.forward?f+g:f-g,i=V(a.getCursor()),j=a.charCoords(i,"local");if(b.forward)h>j.top?(i.line+=(h-j.top)/e,i.line=Math.ceil(i.line),a.setCursor(i),j=a.charCoords(i,"local"),a.scrollTo(null,j.top)):a.scrollTo(null,h);else{var k=h+a.getScrollInfo().clientHeight;k<j.bottom?(i.line-=(j.bottom-k)/e,i.line=Math.floor(i.line),a.setCursor(i),j=a.charCoords(i,"local"),a.scrollTo(null,j.bottom-a.getScrollInfo().clientHeight)):a.scrollTo(null,h)}}},scrollToCursor:function(a,b){var d=a.getCursor().line,e=a.charCoords(c(d,0),"local"),f=a.getScrollInfo().clientHeight,g=e.top,h=e.bottom-g;switch(b.position){case"center":g=g-f/2+h;break;case"bottom":g=g-f+1.4*h;break;case"top":g+=.4*h}a.scrollTo(null,g)},replayMacro:function(a,b,c){var d=b.selectedCharacter,e=b.repeat,f=G.macroModeState;for("@"==d&&(d=f.latestRegister);e--;)Ub(a,c,f,d)},enterMacroRecordMode:function(a,b){var c=G.macroModeState,d=b.selectedCharacter;c.enterMacroRecordMode(a,d)},enterInsertMode:function(b,d,e){if(!b.getOption("readOnly")){e.insertMode=!0,e.insertModeRepeat=d&&d.repeat||1;var f=d?d.insertAt:null;if("eol"==f){var g=b.getCursor();g=c(g.line,Z(b,g.line)),b.setCursor(g)}else"charAfter"==f?b.setCursor(S(b.getCursor(),0,1)):"firstNonBlank"==f&&b.setCursor(N.moveToFirstNonWhiteSpaceCharacter(b));b.setOption("keyMap","vim-insert"),b.setOption("disableInput",!1),d&&d.replace?(b.toggleOverwrite(!0),b.setOption("keyMap","vim-replace"),a.signal(b,"vim-mode-change",{mode:"replace"})):(b.setOption("keyMap","vim-insert"),a.signal(b,"vim-mode-change",{mode:"insert"})),G.macroModeState.isPlaying||(b.on("change",Yb),a.on(b.getInputField(),"keydown",_b))}},toggleVisualMode:function(b,d,e){var h,f=d.repeat,g=b.getCursor();e.visualMode?(g=b.getCursor("anchor"),h=b.getCursor("head"),!e.visualLine&&d.linewise?(e.visualLine=!0,g.ch=X(g,h)?0:Z(b,g.line),h.ch=X(g,h)?Z(b,h.line):0,b.setSelection(g,h),a.signal(b,"vim-mode-change",{mode:"visual",subMode:"linewise"})):e.visualLine&&!d.linewise?(e.visualLine=!1,a.signal(b,"vim-mode-change",{mode:"visual"})):bb(b)):(b.on("mousedown",bb),e.visualMode=!0,e.visualLine=!!d.linewise,e.visualLine?(g.ch=0,h=Q(b,c(g.line+f-1,Z(b,g.line)),!0)):h=Q(b,c(g.line,g.ch+f),!0),d.repeatIsExplicit||e.visualLine?b.setSelection(g,h):(b.setCursor(h),b.setSelection(h,g)),a.signal(b,"vim-mode-change",{mode:"visual",subMode:e.visualLine?"linewise":""})),pb(b,e,"<",X(g,h)?g:h),pb(b,e,">",X(g,h)?h:g)},reselectLastSelection:function(b,c,d){if(d.lastSelection){var e=d.lastSelection;b.setSelection(e.curStart,e.curEnd),e.visualLine?(d.visualMode=!0,d.visualLine=!0):(d.visualMode=!0,d.visualLine=!1),a.signal(b,"vim-mode-change",{mode:"visual",subMode:d.visualLine?"linewise":""})}},joinLines:function(a,b,d){var e,f;if(d.visualMode)e=a.getCursor("anchor"),f=a.getCursor("head"),f.ch=Z(a,f.line)-1;else{var g=Math.max(b.repeat,2);e=a.getCursor(),f=Q(a,c(e.line+g-1,1/0))}var h=0;a.operation(function(){for(var b=e.line;b<f.line;b++){h=Z(a,e.line);var d=c(e.line+1,Z(a,e.line+1)),g=a.getRange(e,d);g=g.replace(/\n\s*/g," "),a.replaceRange(g,e,d)}var i=c(e.line,h);a.setCursor(i)})},newLineAndEnterInsertMode:function(b,d,e){e.insertMode=!0;var f=V(b.getCursor());if(f.line!==b.firstLine()||d.after){f.line=d.after?f.line:f.line-1,f.ch=Z(b,f.line),b.setCursor(f);var g=a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent;g(b)}else b.replaceRange("\n",c(b.firstLine(),0)),b.setCursor(b.firstLine(),0);this.enterInsertMode(b,{repeat:d.repeat},e)},paste:function(a,b){var d=V(a.getCursor()),e=G.registerController.getRegister(b.registerName),f=e.toString();if(f){if(b.matchIndent){var g=function(b){var c=b.split("	").length-1,d=b.split(" ").length-1;return c*a.options.tabSize+1*d},h=a.getLine(a.getCursor().line),i=g(h.match(/^\s*/)[0]),j=f.replace(/\n$/,""),k=f!==j,l=g(f.match(/^\s*/)[0]),f=j.replace(/^\s*/gm,function(b){var c=i+(g(b)-l);if(0>c)return"";if(a.options.indentWithTabs){var d=Math.floor(c/a.options.tabSize);return Array(d+1).join("	")}return Array(c+1).join(" ")});f+=k?"\n":""}if(b.repeat>1)var f=Array(b.repeat+1).join(f);var m=e.linewise;m?b.after?(f="\n"+f.slice(0,f.length-1),d.ch=Z(a,d.line)):d.ch=0:d.ch+=b.after?1:0,a.replaceRange(f,d);var n,o;m&&b.after?n=c(d.line+1,eb(a.getLine(d.line+1))):m&&!b.after?n=c(d.line,eb(a.getLine(d.line))):!m&&b.after?(o=a.indexFromPos(d),n=a.posFromIndex(o+f.length-1)):(o=a.indexFromPos(d),n=a.posFromIndex(o+f.length)),a.setCursor(n)}},undo:function(b,c){b.operation(function(){U(b,a.commands.undo,c.repeat)(),b.setCursor(b.getCursor("anchor"))})},redo:function(b,c){U(b,a.commands.redo,c.repeat)()},setRegister:function(a,b,c){c.inputState.registerName=b.selectedCharacter},setMark:function(a,b,c){var d=b.selectedCharacter;pb(a,c,d,a.getCursor())},replace:function(b,d,e){var h,i,f=d.selectedCharacter,g=b.getCursor();if(e.visualMode)g=b.getCursor("start"),i=b.getCursor("end"),i=b.clipPos(c(i.line,i.ch+1));else{var j=b.getLine(g.line);h=g.ch+d.repeat,h>j.length&&(h=j.length),i=c(g.line,h)}if("\n"==f)e.visualMode||b.replaceRange("",g,i),(a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent)(b);else{var k=b.getRange(g,i);k=k.replace(/[^\n]/g,f),b.replaceRange(k,g,i),e.visualMode?(b.setCursor(g),bb(b)):b.setCursor(S(i,0,-1))}},incrementNumberToken:function(a,b){for(var g,h,i,j,k,d=a.getCursor(),e=a.getLine(d.line),f=/-?\d+/g;null!==(g=f.exec(e))&&(k=g[0],h=g.index,i=h+k.length,!(d.ch<i)););if((b.backtrack||!(i<=d.ch))&&k){var l=b.increase?1:-1,m=parseInt(k)+l*b.repeat,n=c(d.line,h),o=c(d.line,i);j=m.toString(),a.replaceRange(j,n,o),a.setCursor(c(d.line,h+j.length-1))}},repeatLastEdit:function(a,b,c){var d=c.lastEditInputState;if(d){var e=b.repeat;e&&b.repeatIsExplicit?c.lastEditInputState.repeatOverride=e:e=c.lastEditInputState.repeatOverride||e,ac(a,c,e,!1)
}}},ib={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},jb={bracket:{isComplete:function(a){if(a.nextCh===a.symb){if(a.depth++,a.depth>=1)return!0}else a.nextCh===a.reverseSymb&&a.depth--;return!1}},section:{init:function(a){a.curMoveThrough=!0,a.symb=(a.forward?"]":"[")===a.symb?"{":"}"},isComplete:function(a){return 0===a.index&&a.nextCh===a.symb}},comment:{isComplete:function(a){var b="*"===a.lastCh&&"/"===a.nextCh;return a.lastCh=a.nextCh,b}},method:{init:function(a){a.symb="m"===a.symb?"{":"}",a.reverseSymb="{"===a.symb?"}":"{"},isComplete:function(a){return a.nextCh===a.symb?!0:!1}},preprocess:{init:function(a){a.index=0},isComplete:function(a){if("#"===a.nextCh){var b=a.lineText.match(/#(\w+)/)[1];if("endif"===b){if(a.forward&&0===a.depth)return!0;a.depth++}else if("if"===b){if(!a.forward&&0===a.depth)return!0;a.depth--}if("else"===b&&0===a.depth)return!0}return!1}}};z("pcre",!0,"boolean"),tb.prototype={getQuery:function(){return G.query},setQuery:function(a){G.query=a},getOverlay:function(){return this.searchOverlay},setOverlay:function(a){this.searchOverlay=a},isReversed:function(){return G.isReversed},setReversed:function(a){G.isReversed=a}};var Db="(Javascript regexp)",Nb=[{name:"map"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"set"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s"},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0}];d.ExCommandDispatcher=function(){this.buildCommandMap_()},d.ExCommandDispatcher.prototype={processCommand:function(b,c){var d=b.state.vim,e=G.registerController.getRegister(":"),f=e.toString();d.visualMode&&bb(b);var g=new a.StringStream(c);e.setText(c);var h={};h.input=c;try{this.parseInput_(b,g,h)}catch(i){throw Bb(b,i),i}var j;if(h.commandName){var k=this.matchCommand_(h.commandName);if(k){if(j=k.name,k.excludeFromCommandHistory&&e.setText(f),this.parseCommandArgs_(g,h,k),"exToKey"==k.type){for(var l=0;l<k.toKeys.length;l++)a.Vim.handleKey(b,k.toKeys[l]);return}if("exToEx"==k.type)return this.processCommand(b,k.toInput),void 0}}else void 0!==h.line&&(j="move");if(!j)return Bb(b,'Not an editor command ":'+c+'"'),void 0;try{Pb[j](b,h)}catch(i){throw Bb(b,i),i}},parseInput_:function(a,b,c){b.eatWhile(":"),b.eat("%")?(c.line=a.firstLine(),c.lineEnd=a.lastLine()):(c.line=this.parseLineSpec_(a,b),void 0!==c.line&&b.eat(",")&&(c.lineEnd=this.parseLineSpec_(a,b)));var d=b.match(/^(\w+)/);return c.commandName=d?d[1]:b.match(/.*/)[0],c},parseLineSpec_:function(a,b){var c=b.match(/^(\d+)/);if(c)return parseInt(c[1],10)-1;switch(b.next()){case".":return a.getCursor().line;case"$":return a.lastLine();case"'":var d=a.state.vim.marks[b.next()];if(d&&d.find())return d.find().line;throw new Error("Mark not set");default:return b.backUp(1),void 0}},parseCommandArgs_:function(a,b,c){if(!a.eol()){b.argString=a.match(/.*/)[0];var d=c.argDelimiter||/\s+/,e=_(b.argString).split(d);e.length&&e[0]&&(b.args=e)}},matchCommand_:function(a){for(var b=a.length;b>0;b--){var c=a.substring(0,b);if(this.commandMap_[c]){var d=this.commandMap_[c];if(0===d.name.indexOf(a))return d}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a=0;a<Nb.length;a++){var b=Nb[a],c=b.shortName||b.name;this.commandMap_[c]=b}},map:function(a,c,d){if(":"!=a&&":"==a.charAt(0)){if(d)throw Error("Mode not supported for ex mappings");var e=a.substring(1);this.commandMap_[e]=":"!=c&&":"==c.charAt(0)?{name:e,type:"exToEx",toInput:c.substring(1),user:!0}:{name:e,type:"exToKey",toKeys:Ob(c),user:!0}}else if(":"!=c&&":"==c.charAt(0)){var f={keys:Ob(a),type:"keyToEx",exArgs:{input:c.substring(1)},user:!0};d&&(f.context=d),b.unshift(f)}else{var f={keys:Ob(a),type:"keyToKey",toKeys:Ob(c),user:!0};d&&(f.context=d),b.unshift(f)}},unmap:function(a,c){var d=function(a,b){if(a===b)return!0;if(null==a||null==b)return!0;if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};if(":"!=a&&":"==a.charAt(0)){if(c)throw Error("Mode not supported for ex mappings");var e=a.substring(1);if(this.commandMap_[e]&&this.commandMap_[e].user)return delete this.commandMap_[e],void 0}else for(var f=Ob(a),g=0;g<b.length;g++)if(d(f,b[g].keys)&&b[g].context===c&&b[g].user)return b.splice(g,1),void 0;throw Error("No such mapping.")}};var Pb={map:function(a,b,c){var d=b.args;return!d||d.length<2?(a&&Bb(a,"Invalid mapping: "+b.input),void 0):(Qb.map(d[0],d[1],c),void 0)},nmap:function(a,b){this.map(a,b,"normal")},vmap:function(a,b){this.map(a,b,"visual")},unmap:function(a,b,c){var d=b.args;return!d||d.length<1?(a&&Bb(a,"No such mapping: "+b.input),void 0):(Qb.unmap(d[0],c),void 0)},move:function(a,b){M.processCommand(a,a.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:b.line+1})},set:function(a,b){var c=b.args;if(!c||c.length<1)return a&&Bb(a,"Invalid mapping: "+b.input),void 0;var d=c[0].split("="),e=d[0],f=d[1],g=!1;if("?"==e.charAt(e.length-1)){if(f)throw Error("Trailing characters: "+b.argString);e=e.substring(0,e.length-1),g=!0}void 0===f&&"no"==e.substring(0,2)&&(e=e.substring(2),f=!1);var h=y[e]&&"boolean"==y[e].type;if(h&&void 0==f&&(f=!0),!h&&!f||g){var i=B(e);i===!0||i===!1?Bb(a," "+(i?"":"no")+e):Bb(a,"  "+e+"="+i)}else A(e,f)},registers:function(a,b){var c=b.args,d=G.registerController.registers,e="----------Registers----------<br><br>";if(c){var f;c=c.join("");for(var h=0;h<c.length;h++)if(f=c.charAt(h),G.registerController.isValidRegister(f)){var i=d[f]||new K;e+='"'+f+"    "+i.toString()+"<br>"}}else for(var f in d){var g=d[f].toString();g.length&&(e+='"'+f+"    "+g+"<br>")}Bb(a,e)},sort:function(b,d){function i(){if(d.argString){var b=new a.StringStream(d.argString);if(b.eat("!")&&(e=!0),b.eol())return;if(!b.eatSpace())return"Invalid arguments";var c=b.match(/[a-z]+/);if(c){c=c[0],f=-1!=c.indexOf("i"),g=-1!=c.indexOf("u");var i=-1!=c.indexOf("d")&&1,j=-1!=c.indexOf("x")&&1,k=-1!=c.indexOf("o")&&1;if(i+j+k>1)return"Invalid arguments";h=i&&"decimal"||j&&"hex"||k&&"octal"}b.eatSpace()&&b.match(/\/.*\//)}}function u(a,b){if(e){var c;c=a,a=b,b=c}f&&(a=a.toLowerCase(),b=b.toLowerCase());var d=h&&p.exec(a),g=h&&p.exec(b);return d?(d=parseInt((d[1]+d[2]).toLowerCase(),q),g=parseInt((g[1]+g[2]).toLowerCase(),q),d-g):b>a?-1:1}var e,f,g,h,j=i();if(j)return Bb(b,j+": "+d.argString),void 0;var k=d.line||b.firstLine(),l=d.lineEnd||d.line||b.lastLine();if(k!=l){var m=c(k,0),n=c(l,Z(b,l)),o=b.getRange(m,n).split("\n"),p="decimal"==h?/(-?)([\d]+)/:"hex"==h?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==h?/([0-7]+)/:null,q="decimal"==h?10:"hex"==h?16:"octal"==h?8:null,r=[],s=[];if(h)for(var t=0;t<o.length;t++)p.exec(o[t])?r.push(o[t]):s.push(o[t]);else s=o;if(r.sort(u),s.sort(u),o=e?r.concat(s):s.concat(r),g){var w,v=o;o=[];for(var t=0;t<v.length;t++)v[t]!=w&&o.push(v[t]),w=v[t]}b.replaceRange(o.join("\n"),m,n)}},substitute:function(a,b){if(!a.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var d=b.argString,e=d?wb(d):[],f="";if(e.length){if(0!==e[0])return Bb(a,"Substitutions should be of the form :s/pattern/replace/"),void 0;var h,i,g=d.substring(e[0]+1,e[1]),j=!1;if(e[1]&&(f=d.substring(e[1]+1,e[2]),f=B("pcre")?zb(f):yb(f),G.lastSubstituteReplacePart=f),e[2]){var k=d.substring(e[2]+1).split(" ");h=k[0],i=parseInt(k[1])}h&&(-1!=h.indexOf("c")&&(j=!0,h.replace("c","")),g=g+"/"+h)}if(g)try{Gb(a,g,!0,!0)}catch(l){return Bb(a,"Invalid regex: "+g),void 0}if(f=f||G.lastSubstituteReplacePart,void 0===f)return Bb(a,"No previous substitute regular expression"),void 0;var m=ub(a),n=m.getQuery(),o=void 0!==b.line?b.line:a.getCursor().line,p=b.lineEnd||o;i&&(o=p,p=o+i-1);var q=Q(a,c(o,0)),r=a.getSearchCursor(n,q);Rb(a,j,o,p,r,n,f)},redo:a.commands.redo,undo:a.commands.undo,write:function(b){a.commands.save?a.commands.save(b):b.save()},nohlsearch:function(a){Kb(a)},delmarks:function(b,c){if(!c.argString||!_(c.argString))return Bb(b,"Argument required"),void 0;for(var d=b.state.vim,e=new a.StringStream(_(c.argString));!e.eol();){e.eatSpace();var f=e.pos;if(!e.match(/[a-zA-Z]/,!1))return Bb(b,"Invalid argument: "+c.argString.substring(f)),void 0;var g=e.next();if(e.match("-",!0)){if(!e.match(/[a-zA-Z]/,!1))return Bb(b,"Invalid argument: "+c.argString.substring(f)),void 0;var h=g,i=e.next();if(!(s(h)&&s(i)||v(h)&&v(i)))return Bb(b,"Invalid argument: "+h+"-"),void 0;var j=h.charCodeAt(0),k=i.charCodeAt(0);if(j>=k)return Bb(b,"Invalid argument: "+c.argString.substring(f)),void 0;for(var l=0;k-j>=l;l++){var m=String.fromCharCode(j+l);delete d.marks[m]}}else delete d.marks[g]}}},Qb=new d.ExCommandDispatcher;return a.keyMap.vim=Sb(),a.keyMap["vim-insert"]={Esc:Tb,"Ctrl-[":Tb,"Ctrl-C":Tb,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(b){var c=a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent;c(b)},fallthrough:["default"]},a.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]},H(),I};a.Vim=d()});